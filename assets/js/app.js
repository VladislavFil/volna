!function(){var t,e={266:function(){[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(t){t.hasOwnProperty("append")||Object.defineProperty(t,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var t=Array.prototype.slice.call(arguments),e=document.createDocumentFragment();t.forEach((function(t){var n,i,o=(n=t,null!=(i=Node)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?!!i[Symbol.hasInstance](n):n instanceof i);e.appendChild(o?t:document.createTextNode(String(t)))})),this.appendChild(e)}})})),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),Element.prototype.closest||(Element.prototype.closest=function(t){for(var e=this;e;){if(e.matches(t))return e;e=e.parentElement}return null})},61:function(t,e,n){"use strict";n(266);var i=n(338),o=n.n(i),a=n(667);function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"handlerDocumentReady",value:function(t){return"function"==typeof t&&("interactive"===document.readyState||"complete"===document.readyState?t():document.addEventListener("DOMContentLoaded",t))}},{key:"siblings",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Array.from(t.parentNode.children).filter((function(n){return e?n:n!==t}))}},{key:"removeElement",value:function(t){t.parentNode.removeChild(t)}},{key:"show",value:function(t){t.style.display="block"}},{key:"hide",value:function(t){t.style.display="none"}},{key:"clearHtml",value:function(t){t.innerHTML=""}},{key:"insetContent",value:function(t,e){var n;"string"==typeof e?t.insertAdjacentHTML("beforeend",e):"object"==(void 0===e?"undefined":(n=e)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)&&t.appendChild(e)}},{key:"keyExist",value:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},{key:"isEmptyObject",value:function(t){return 0===Object.keys(t).length}},{key:"isString",value:function(t){return"string"==typeof t}},{key:"getWindowHeight",value:function(){return window.innerHeight||document.documentElement.clientHeight}},{key:"getWindowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth}},{key:"getScrollTop",value:function(){return window.pageYOffset||document.documentElement.scrollTop}},{key:"isTouch",value:function(){return Boolean("undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&"undefined"!=typeof document&&(t=document,null!=(e=window.DocumentTouch)&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e)))||Boolean("undefined"!=typeof navigator&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints));var t,e}},{key:"isBreakpoint",value:function(t,e){return window.innerWidth>=t&&window.innerWidth<e}},{key:"isDesktop",value:function(){return window.innerWidth>1199}},{key:"isTablet",value:function(){return window.innerWidth<1023}},{key:"isMobile",value:function(){return window.innerWidth<768}},{key:"youTubeGetId",value:function(t){return t.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be[.]?\/|youtube\.com[.]?\/(?:embed\/|v\/|watch\/?\?(?:\S+=\S*&)*v=))([\w-]{11})\S*$/)?RegExp.$1:void 0}},{key:"throttle",value:function(t,e){var n=null;return function(i){var o=n;n=Date.now(),(void 0===o||n-o>e)&&t(i)}}},{key:"debounce",value:function(t,e){var n=this,i=null;return function(o){var a=i;i=Date.now(),a&&i-a<=e&&clearTimeout(n.lastCallTimer),n.lastCallTimer=setTimeout((function(){t(o)}),e)}}},{key:"numberFormatted",value:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}},{key:"getElementIndex",value:function(t){for(var e=0;t=t.previousElementSibling;)e++;return e}},{key:"getElementOffset",value:function(t){var e=document.documentElement,n=t.getBoundingClientRect();return{top:n.top+window.pageYOffset-e.clientTop,left:n.left+window.pageXOffset-e.clientLeft}}},{key:"loadScript",value:function(t){if(""===t.innerHTML){var e=document.createElement("script"),n=t.dataset.source;e.type="text/javascript",e.src=n,t.appendChild(e),setTimeout((function(){t.classList.remove("loading")}),2e3)}}},{key:"addScript",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=document.createElement("script");i.type="application/javascript",i.src=t,i.onload=n.onload,i.onerror=function(t){console.warn("Ошибка загрузки "+e.src),n.onerror(t)},document.head.appendChild(i)}},{key:"wrapContent",value:function(t,e,n){var i=document.createElement(e);return n&&i.classList.add(n),t.parentNode.insertBefore(i,t),i.appendChild(t)}},{key:"bodyFixed",value:function(t){var e="".concat(window.innerWidth-document.documentElement.clientWidth,"px");setTimeout((function(){(0,a.mh)(t,{reserveScrollBarGap:!0})}),0),setTimeout((function(){var t=document.documentElement;t&&t.style.setProperty("--lock-offset",e)}),0)}},{key:"bodyStatic",value:function(){setTimeout((function(){(0,a.qY)()}),0),setTimeout((function(){var t=document.documentElement;t&&t.style.setProperty("--lock-offset","")}),0)}},{key:"convertToNumber",value:function(t){return parseFloat(t.toString().replace(/\s/g,""))}},{key:"replaceSpace",value:function(t){return t.replace(/\s/g,"")}},{key:"convertToDigit",value:function(t){return Number(t).toLocaleString("ru-Ru")}},{key:"convertToRank",value:function(t,e){return Number(t)/e}},{key:"isInViewport",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=t.getBoundingClientRect(),i=n.top+e,o=n.left+e,a=window.innerHeight||document.documentElement.clientHeight,s=window.innerWidth||document.documentElement.clientWidth,r=i<=a&&i+n.height>=0,l=o<=s&&o+n.width>=0;return r&&l}},{key:"hyphenate",value:function(t){var e=t,n="[а-яА-Я]",i="[аеёиоуыэюяАЕЁИОУЫЭЮЯ]",o="[бвгджзклмнпрстфхцчшщБВГДЖЗКЛМНПРСТФХЦШЩ]",a=[];a[1]=new RegExp("(".concat("[йъьЙЪЬ]",")(").concat(n).concat(n,")"),"ig"),a[2]=new RegExp("(".concat(i,")(").concat(i).concat(n,")"),"ig"),a[4]=new RegExp("(".concat(i).concat(o,")(").concat(o).concat(i,")"),"ig"),a[3]=new RegExp("(".concat(o).concat(i,")(").concat(o).concat(i,")"),"ig"),a[5]=new RegExp("(".concat(i).concat(o,")(").concat(o).concat(o).concat(i,")"),"ig"),a[6]=new RegExp("(".concat(i).concat(o).concat(o,")(").concat(o).concat(o).concat(i,")"),"ig");for(var s=0;s<2;++s)for(var r=0;r<=6;++r)e=e.replace(a[r],"$1".concat("­","$2"));return e}},{key:"pluralWord",value:function(t,e){return e[t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2]}},{key:"clickOutside",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t){var o=[];t.nodeType===Node.ELEMENT_NODE?o=[[t]]:"string"==typeof t?o.push(Array.from(document.querySelectorAll(t))):Array.from(t).forEach((function(t){o.push(Array.from(document.querySelectorAll(t)))})),document.addEventListener("click",(function(a){var s=a.target;i&&(o=[],t.nodeType===Node.ELEMENT_NODE?o=[[t]]:"string"==typeof t?o.push(Array.from(document.querySelectorAll(t))):Array.from(t).forEach((function(t){o.push(Array.from(document.querySelectorAll(t)))})));do{try{o.forEach((function(t){if(-1!==t.indexOf(s))throw n(),!1}))}catch(t){return}s=s.parentNode}while(s);e()}))}}}],(n=null)&&s(e.prototype,n),i&&s(e,i),t}(),l=r,c=n(692);function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function d(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}window.jQuery=window.$=c,document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector("html"),e=function(){l.isTouch()?t.classList.remove("no-touch"):t.classList.add("no-touch")};["resize","orientationchange"].forEach((function(t){window.addEventListener(t,e)})),e(),o()();var n=document.querySelectorAll(".j-scroll-to");n.length&&n.forEach((function(t){t.addEventListener("click",(function(e){e.preventDefault();var n=t.dataset.scrollBy||t.getAttribute("href");!function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(t){var e=document.querySelector(".header").offsetHeight+20,n=l.getElementOffset(t).top-e;c("html").animate({scrollTop:n},500)}}(document.querySelector(n))}))}))}));var f=null,p=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.components=[],f||(f=this),f}var e,n,i;return e=t,n=[{key:"register",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.components=d(this.components).concat(d(t)),!0}},{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return this.components.length&&Array.from(this.components).forEach((function(e){e.init(t),document.dispatchEvent(new CustomEvent("afterInitComponent",{detail:{component:e,context:t}}))})),!0}}],n&&h(e.prototype,n),i&&h(e,i),t}();function m(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var v=null,y=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v||(v=this),this.channels={},v}var e,n,i;return e=t,n=[{key:"subscribe",value:function(t,e){this.channels[t]||(this.channels[t]=[]),this.channels[t].push({context:this,callback:e})}},{key:"unsubscribe",value:function(t){return!!this.channels[t]&&(delete this.channels[t],this)}},{key:"publish",value:function(t){if(!this.channels[t])return!1;var e=Array.prototype.slice.call(arguments,1);return this.channels[t].forEach((function(t){t.callback.apply(t.context,e)})),this}},{key:"installTo",value:function(t){t.channels={},t.publish=this.publish,t.subscribe=this.subscribe}}],n&&m(e.prototype,n),i&&m(e,i),t}(),b=y,g=n(144),k=n.n(g);function _(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var w=new b,C=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lazy=null,this.options={},this.trigger=e.trigger||".lazy",this.threshold=e.threshold||200,this.unobserve_entered=e.unobserve_entered||!1,this.islazyFunction=e.islazyFunction||!1,this.isInited=!1,this.isEntered=e.isEntered||!1,this.setlazyFunctions={test:function(t){console.log("test")}}}var e,n,i;return e=t,(n=[{key:"settings",value:function(){this.options={elements_selector:this.trigger,unobserve_entered:this.unobserve_entered,threshold:this.threshold,callback_exit:this.islazyFunction?this._exit.bind(this):null,callback_enter:this.islazyFunction?this._enter.bind(this):null}}},{key:"init",value:function(){this.settings(),this.lazy=new(k())(this.options),".lazy"===this.trigger&&this.subscribe()}},{key:"subscribe",value:function(){var t=this;w.subscribe("updateLazyLoad",(function(){t.lazy.update()}))}},{key:"_enter",value:function(t){if("entered"!==this._getStatus(t)||this.isEntered){var e=t.getAttribute("data-lazy-function-enter");if(e)w.publish(e,t),this._setStatus(t,"entered");else{var n=t.getAttribute("data-lazy-function"),i=this.setlazyFunctions[n];if(!i)return console.warn("LazyLoadFunction: ","Функция ".concat(n," не определена")),!1;i(t)}}}},{key:"_exit",value:function(t){if(this.isEntered){var e=t.getAttribute("data-lazy-function-exit");if(!e)return;w.publish(e,t),this._setStatus(t,"exit")}}},{key:"_setStatus",value:function(t,e){t.setAttribute("data-lf-status",e)}},{key:"_getStatus",value:function(t){return t.getAttribute("data-lf-status")}}])&&_(e.prototype,n),i&&_(e,i),t}(),S=n(700),E=n(575),L=n(692);function O(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}S.os.registerPlugin(E.u);var x=new b,T=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.option=e,this.gsap={},this.preloader=document.querySelector(".preloader"),this.reveals=S.os.utils.toArray(".gs"),this.settings={disabled:!1,ease:"Power2.easeOut",duration:.9,dataDelay:0,afterPreloaderDelay:600}}var e,n,i;return e=t,(n=[{key:"init",value:function(){this.preloader&&(this.settings.disabled||(this.preloaderShow(),this.beforeAnimationCheckElems(),this.gsRefresh()),this.preloaderHide())}},{key:"preloaderHide",value:function(){var t=this,e=document.querySelector(".wrapper");this.settings.disabled?this.preloader.style.display="none":(e&&(e.style.opacity=1),setTimeout((function(){t.preloader.style.opacity=0,setTimeout((function(){t.preloader.style.display="none",x.publish("preloader:end"),t.startAnimate()}),300)}),400))}},{key:"preloaderShow",value:function(){var t=document.querySelector(".wrapper");t&&(t.style.opacity=0)}},{key:"startAnimate",value:function(){var t=this;S.os.config({nullTargetWarn:!1}),this.reveals.length>0&&this.reveals.forEach((function(e){setTimeout((function(){t.gsap=S.os,E.u.create({trigger:e,onEnter:function(){t.animateFrom(e)},onLeaveBack:function(){if(e.classList.contains("gs-completed"))return!1;if(e.classList.contains("gs-addClass")){var n=e.dataset.gsClass;n&&e.classList.remove(n)}e.classList.contains("gs-moveTop")||e.classList.contains("gs-moveLeft")||t.hide(e)}})}),t.afterPreloaderDelay)}))}},{key:"animateFrom",value:function(t,e){var n,i=0,o=100*(e|=1),a=1,s="center",r=.5,c=40;if(t.classList.contains("gs-completed"))return!1;if(t.classList.contains("gs-hero"))console.log("Animation is empty");else if(t.classList.contains("gs-fromLeft"))i=-40,o=0;else if(t.classList.contains("gs-fromRight"))i=l.isTablet()?0:c,o=l.isTablet()?c:0;else if(t.classList.contains("gs-fadeIn"))i=0,o=0;else if(t.classList.contains("gs-zoomIn"))i=0,o=c,a=0,s="center bottom";else if(t.classList.contains("gs-fadeInTop"))i=0,o=c,r=0;else if(t.classList.contains("gs-moveTop")){if(!t.querySelector(".gs-move_item"))return!1;n=t.querySelectorAll(".gs-move_item"),t.style.opacity=1,t.style.visibility="visible",o=c}else if(t.classList.contains("gs-moveLeft")){if(!t.querySelector(".gs-move_item"))return!1;n=t.querySelectorAll(".gs-move_item"),i=-40,o=0,t.style.opacity=1,t.style.visibility="visible"}else{if(t.classList.contains("gs-addClass")){var u=t.dataset.gsClass;return u&&t.classList.add(u),!1}t.classList.contains("gs-grid")?setTimeout((function(){E.u.refresh()}),600):t.classList.contains("gs-scroll")}if(L(t).prev().hasClass("headline"))r=.4;else{var h=t.dataset.gsDelay;r=h?+h:0}n?this.gsap.from(n,{x:i,y:o,opacity:0,duration:this.settings.duration,delay:r,ease:this.settings.ease,stagger:.15}):this.gsap.fromTo(t,{x:i,y:o,scale:a,autoAlpha:0},{duration:this.settings.duration,delay:r,x:0,y:0,scale:1,transformOrigin:s,autoAlpha:1,ease:this.settings.ease,overwrite:"auto",clearProps:"all"}),"true"===t.dataset.gsOnly&&t.classList.add("gs-completed")}},{key:"gsRefresh",value:function(){var t;window.addEventListener("scroll",l.throttle((function(){var e=document.body.scrollHeight;e!==t&&(E.u.refresh(),t=e)}),20))}},{key:"hide",value:function(t){S.os.set(t,{autoAlpha:0})}},{key:"checkToHide",value:function(t){t.classList.contains("gs-hero")||t.classList.contains("gs-scroll")||t.classList.contains("gs-addClass")?(t.classList.contains("gs-moveTop")||t.classList.contains("gs-moveLeft"))&&(t.style.opacity=0):this.hide(t)}},{key:"beforeAnimationCheckElems",value:function(){var t=this;this.reveals.forEach((function(e){t.checkToHide(e)}))}}])&&O(e.prototype,n),i&&O(e,i),t}();function j(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var A=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.openClass="is-open",this.closeClass="is-close",this.isOpen=!1,this.body=document.querySelector("body"),this.bodyClass="_menu-opened"}var e,n,i;return e=t,(n=[{key:"init",value:function(t){var e=this;this.element=document.querySelector(".j-menu"),this.button=document.querySelector(".j-menu-trigger"),this.isOpen=this.button.classList.contains(this.openClass),window.addEventListener("load",(function(){e.element.classList.remove("hide")})),this._bindContext(),this._bindEvents()}},{key:"_bindContext",value:function(){this.open=this.open.bind(this),this.close=this.close.bind(this),this._changeState=this._changeState.bind(this)}},{key:"_bindEvents",value:function(){var t=this;document.addEventListener("keyup",(function(e){t._closeByKeyboard(e)})),this.button.addEventListener("click",this._changeState),["resize","orientationchange"].forEach((function(e){window.addEventListener(e,t._onResize.bind(t))}))}},{key:"_isDesktop",value:function(){return l.isBreakpoint(1200,1e4)}},{key:"_onResize",value:function(){this.isOpen&&this._isDesktop()&&this._changeState()}},{key:"_closeByKeyboard",value:function(t){27===t.keyCode&&this.isOpen&&this._changeState()}},{key:"_changeState",value:function(){this.isOpen=!this.isOpen;var t=this.isOpen?"add":"remove";this.button.classList[t](this.openClass),this.isOpen?this.open():this.close()}},{key:"open",value:function(){this.isOpen=!0,this.element.classList.add(this.openClass),this.element.classList.remove(this.closeClass),console.log(this.element.querySelector(".menu__wrapper")),l.bodyFixed(this.element.querySelector(".menu__wrapper")),this.body.classList.add(this.bodyClass)}},{key:"close",value:function(){this.isOpen||(this.isOpen=!1,this.element.classList.remove(this.openClass),this.element.classList.add(this.closeClass),l.bodyStatic(),this.body.classList.remove(this.bodyClass))}}])&&j(e.prototype,n),i&&j(e,i),t}(),P=A,M=n(987);function I(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var q=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cookie=document.querySelector(".j-cookie"),this.cookies=M.A,this.messageShowDelay=5e3,this.cookieDuration=this.cookie.dataset.cookieTime||365,this.activeClass="is-active"}var e,n,i;return e=t,(n=[{key:"init",value:function(){0==+this.cookieDuration&&this._removeCookie("cookie-accepted"),void 0===this._getCookie("cookie-accepted")?(this._showMessage(),this._bindEvents()):this._hideMessage()}},{key:"_bindEvents",value:function(){var t=this;document.querySelector(".j-cookie__close").addEventListener("click",(function(){t._hideMessage(),t._setCookie("cookie-accepted","yes")}))}},{key:"_setCookie",value:function(t,e){M.A.set(t,e,{expires:+this.cookieDuration})}},{key:"_getCookie",value:function(t){return this.cookies.get(t)}},{key:"_removeCookie",value:function(t){this.cookies.remove(t)}},{key:"_showMessage",value:function(){var t=this;setTimeout((function(){t.cookie.classList.add(t.activeClass)}),this.messageShowDelay)}},{key:"_hideMessage",value:function(){l.removeElement(this.cookie)}}])&&I(e.prototype,n),i&&I(e,i),t}(),B=q;function $(t,e,n){return e=H(e),function(t,e){if(e&&("object"==(n=e,n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof e))return e;var n;return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,W()?Reflect.construct(e,n||[],H(t).constructor):e.apply(t,n))}function z(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function D(t,e,n){return e&&F(t.prototype,e),n&&F(t,n),t}function N(t,e,n){return N="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=H(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n||t):o.value}},N(t,e,n||t)}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}function R(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}function Z(t,e){return Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Z(t,e)}function W(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(W=function(){return!!t})()}var G=new b,V=function(){function t(){z(this,t),this.openClass="is-open",this.isOpen=!1,this.closedHeight=0,this.height=null,this.elem=null,this.toggler=null,this.content=null,this.contentOuter=null,this.title=null,this.titleText="",this.hiddenText="Скрыть",this.closed=null,this.changeTitle=!0,this.subAccordion=!1,this.close=this.close.bind(this),this.open=this.open.bind(this)}return D(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setElements(t),this._setInitState(),this._subscribe(),this._bindEvents()}},{key:"reinit",value:function(){this._setInitState()}},{key:"_setElements",value:function(t){this.elem=t.elem,t.closed||void 0===t.closed?this.closed=this.elem.dataset.close||!0:this.closed=!1,this.toggler=this.elem.querySelector(t.toggler)||this.elem.querySelector(".acc__head"),this.content=this.elem.querySelector(t.content)||this.elem.querySelector(".acc__content"),this.contentOuter=this.elem.querySelector(t.contentOuter)||this.elem.querySelector(".acc__content-wrap"),this.title=this.elem.querySelector(t.title)||this.elem.querySelector(".acc__title"),this.contentOuter.querySelector(".j-acc")&&(this.subAccordion=!0)}},{key:"_setInitState",value:function(){this.height=this._getHeight(),this.isOpen=this.elem.classList.contains(this.openClass),this.titleText=!!this.title&&this.title.innerHTML,this.changeTitle=Boolean(this.elem.dataset.changeTitle),this.hiddenText=this.elem.dataset.alternateTitle||"Скрыть"}},{key:"_getHeight",value:function(){return this.content.offsetHeight}},{key:"_subscribe",value:function(){throw new Error("Метод _subscribe должен быть переопределен")}},{key:"_bindEvents",value:function(){var t=this;this.toggler.addEventListener("click",this._onTogglerClick.bind(this));["resize","orientationchange"].forEach((function(e){window.addEventListener(e,t._onResize.bind(t))}))}},{key:"_onTogglerClick",value:function(){var t=this.isOpen?this.close:this.open;this.height=this._getHeight(),t()}},{key:"_onResize",value:function(){this.isOpen&&this.update()}},{key:"_setContentHeight",value:function(t){this.contentOuter.style.height=t?"".concat(t,"px"):t}},{key:"open",value:function(){var t=this;this.changeTitle&&this.titleText&&(l.clearHtml(this.title),l.insetContent(this.title,this.hiddenText)),this.elem.classList.add(this.openClass),this.isOpen=!0,this._setContentHeight(this.height),this.subAccordion&&setTimeout((function(){t.contentOuter.style.height="auto",t.elem.classList.add("_is-sub-accordion")}),1e3)}},{key:"close",value:function(){this.subAccordion&&(this._setContentHeight(this.height),this.elem.classList.remove("_innerAcc")),this.changeTitle&&this.titleText&&(l.clearHtml(this.title),l.insetContent(this.title,this.titleText)),this.elem.classList.remove(this.openClass),this.isOpen=!1,this._setContentHeight(this.closedHeight)}},{key:"update",value:function(){this.height=this._getHeight(),this._setContentHeight(this.isOpen?this.height:this.closedHeight)}}]),t}(),U=function(t){function e(){return z(this,e),$(this,e,arguments)}return R(e,t),D(e,[{key:"_setInitState",value:function(){N(H(e.prototype),"_setInitState",this).call(this),this._setContentHeight(this.isOpen?this.height:this.closedHeight)}},{key:"open",value:function(){G.publish("openAccordion"),setTimeout((function(){G.publish("scrollResize")}),600),N(H(e.prototype),"open",this).call(this)}},{key:"_subscribe",value:function(){"false"!==this.closed&&G.subscribe("openAccordion",this.close)}}]),e}(V),Y=function(t){function e(){return z(this,e),$(this,e,arguments)}return R(e,t),D(e,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(H(e.prototype),"init",this).call(this,t)}},{key:"_initChildrenAcc",value:function(){this.childAcc.forEach((function(t){(new K).init({elem:t,toggler:".result-flats",content:".acc__content",contentOuter:".acc__content-wrap"})}))}},{key:"_setInitState",value:function(){N(H(e.prototype),"_setInitState",this).call(this),this._setContentHeight(this.isOpen?this.height:this.closedHeight)}},{key:"open",value:function(){this.isChild||G.publish("openAccordion"),N(H(e.prototype),"open",this).call(this),setTimeout((function(){}),600)}},{key:"close",value:function(){this.update(),this.elem.classList.remove(this.openClass),this.isOpen=!1,this._setContentHeight(this.closedHeight)}},{key:"_subscribe",value:function(){this.closed&&G.subscribe("openAccordion",this.close),G.subscribe("openChildAccordion",this.update.bind(this)),G.subscribe("closeChildAccordion",this.update.bind(this))}}]),e}(V),K=function(t){function e(){return z(this,e),$(this,e,arguments)}return R(e,t),D(e,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};N(H(e.prototype),"init",this).call(this,t),this.isChild=!0}},{key:"_setInitState",value:function(){N(H(e.prototype),"_setInitState",this).call(this),this._setContentHeight(this.isOpen?this.height:this.closedHeight)}},{key:"open",value:function(){this.isChild||G.publish("openAccordion"),G.publish("openChildrenAccordion"),N(H(e.prototype),"open",this).call(this),setTimeout((function(){G.publish("openChildAccordion")}),600)}},{key:"close",value:function(){N(H(e.prototype),"close",this).call(this),setTimeout((function(){G.publish("closeChildAccordion")}),600)}},{key:"_subscribe",value:function(){"false"!==this.closed&&G.subscribe("openAccordion",this.close),G.subscribe("openChildrenAccordion",this.close)}}]),e}(V),X=function(t){function e(){return z(this,e),$(this,e,arguments)}return R(e,t),D(e,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.breakpoint=t.breakpoint||1280,N(H(e.prototype),"init",this).call(this,t)}},{key:"_isDesktop",value:function(){return l.isBreakpoint(this.breakpoint,1e4)}},{key:"_setInitState",value:function(){N(H(e.prototype),"_setInitState",this).call(this),this._isDesktop()||this._setContentHeight(this.isOpen?this.height:this.closedHeight)}},{key:"_subscribe",value:function(){"false"!==this.closed&&G.subscribe("openMobileAccordion",this.close)}},{key:"_onResize",value:function(){this.update()}},{key:"open",value:function(){this._isDesktop()||(G.publish("openMobileAccordion"),N(H(e.prototype),"open",this).call(this))}},{key:"close",value:function(){this._isDesktop()||N(H(e.prototype),"close",this).call(this)}},{key:"update",value:function(){if(this._isDesktop())return this.height=this._getHeight(),void this._setContentHeight(null);N(H(e.prototype),"update",this).call(this)}}]),e}(V),J=n(692);function Q(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var tt=new b,et=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mapContainer=e.elem,this.ymaps={},this.map={},this.id=e.id,this.icon=this.mapContainer.dataset.icon,this.coords=this.mapContainer.dataset.coords,this.hintContent=this.mapContainer.dataset.content||"",this.lazy=!0===e.lazy,this.loadYandexMap=this.loadYandexMap.bind(this)}var e,n,i;return e=t,(n=[{key:"init",value:function(){this.lazy?this.subscribe():""===this.mapContainer.innerHTML&&this.loadYandexMap()}},{key:"loadYandexMap",value:function(){this.mapContainer.classList.add("loading");var t=this;l.addScript("https://api-maps.yandex.ru/2.1/?apikey=fc8ccd61-8a5d-43e8-ae97-d91256868293&lang=ru_RU",{onload:function(){window.ymaps.ready((function(){t.ymaps=window.ymaps,t.initYandexMap(),t.initMarker(),t.addZoomControl()}))},onerror:function(){t.mapContainer.classList.remove("loading"),t.mapContainer.classList.add("error")}})}},{key:"initYandexMap",value:function(){this.map=new ymaps.Map(this.mapContainer,this.setMapSettings(),{suppressMapOpenBlock:!0})}},{key:"subscribe",value:function(){tt.subscribe("startMapMarker",this.loadYandexMap)}},{key:"setMapSettings",value:function(){var t=this.mapContainer.offsetHeight;return this.coords=this.coords.split(","),{center:this.coords.length>1?this.coords:[57.15266,65.540508],zoom:17,zoomMargin:250,minZoom:10,maxZoom:18,zoomStep:1,controls:[],height:t}}},{key:"initMarker",value:function(){var t=new ymaps.Placemark(this.map.getCenter(),{},{hintLayout:this.addHintLayout(),iconLayout:"default#image",iconImageHref:this.icon,iconImageSize:[50,70],iconImageOffset:[-25,-70]});this.map.geoObjects.add(t),this.map.behaviors.disable("scrollZoom"),this.mapContainer.classList.remove("loading");var e=this;this.map.geoObjects.events.add("click",(function(t){l.isTouch()&&e.map.balloon.open(e.map.getCenter(),"".concat(e.hintContent),{})}))}},{key:"addHintLayout",value:function(){return ymaps.templateLayoutFactory.createClass("<div class='b-ymap-zoom__hint' style=\"width: 200px\">\n         ".concat(this.hintContent,"\n         </div>"),{getShape:function(){var t=this.getElement(),e=null;if(t){var n=t.firstChild;e=new ymaps.shape.Rectangle(new ymaps.geometry.pixel.Rectangle([[0,0],[n.offsetWidth,n.offsetHeight]]))}return e}})}},{key:"addZoomControl",value:function(){var t=this.mapContainer.offsetHeight,e=new ymaps.control.ZoomControl({options:{layout:this.createLayoutZoomControl()}});this.map.controls.add(e,{float:"none",position:{top:t/2,right:"15px"}})}},{key:"createLayoutZoomControl",value:function(){var t=this.id,e=ymaps.templateLayoutFactory.createClass('<div class="b-ymap-zoom-control">\n           <button type="button" id="'.concat(t,'-in" class=\'b-ymap-zoom__btn b-ymap-zoom__btn-plus\'>\n             <i></i>\n           </button>\n           <button type="button" id="').concat(t,"-out\" class='b-ymap-zoom__btn b-ymap-zoom__btn-minus'>\n             <i></i>\n           </button>\n         </div>"),{build:function(){e.superclass.build.call(this),this.zoomInCallback=ymaps.util.bind(this.zoomIn,this),this.zoomOutCallback=ymaps.util.bind(this.zoomOut,this),J("#".concat(t,"-in")).on("click",this.zoomInCallback),J("#".concat(t,"-out")).on("click",this.zoomOutCallback)},clear:function(){J("#".concat(t,"-in")).off("click",this.zoomInCallback),J("#".concat(t,"-out")).off("click",this.zoomOutCallback),e.superclass.clear.call(this)},zoomIn:function(){var t=this.getData().control.getMap();t.setZoom(t.getZoom()+1,{checkZoomRange:!0})},zoomOut:function(){var t=this.getData().control.getMap();t.setZoom(t.getZoom()-1,{checkZoomRange:!0})}});return e}}])&&Q(e.prototype,n),i&&Q(e,i),t}(),nt=et,it=(n(732),n(692));function ot(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var at=new b,st=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.elems=document.querySelectorAll(".j-modal")}var e,n,i;return e=t,(n=[{key:"init",value:function(){this.defaultSettings(),this.selection()}},{key:"defaultSettings",value:function(){window.$.magnificPopup=it.magnificPopup,it.extend(!0,it.magnificPopup.defaults,{fixedContentPos:!1,fixedBgPos:!1,overflowY:"auto",removalDelay:700,closeBtnInside:!0,closeMarkup:'<button title="%title%" type="button" class="mfp-close"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 5.29413L0.705868 0L0 0.705868L5.29413 6L0 11.2941L0.705868 12L6 6.70587L11.2941 12L12 11.2941L6.70587 6L12 0.705868L11.2941 0L6 5.29413Z"></path></svg></button>',mainClass:"mfp-move-from-top",tClose:"Закрыть (Esc)",tLoading:"",gallery:{tPrev:"Назад (Влево)",tNext:"Вперед (Вправо)",tCounter:"%curr% из %total%",arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"><svg viewBox="0 0 64 64"><path d="M44.152 32.024L15.824 60.353a2.014 2.014 0 1 0 2.848 2.849l29.736-29.736c.557-.557.718-1.439.445-2.177a2.042 2.042 0 0 0-.464-.725L18.652.828a2.013 2.013 0 1 0-2.848 2.848l28.348 28.348z"></path></svg></button>'},image:{tError:'<a href="%url%">Изображение</a> не загружено.'},ajax:{tError:'<a href="%url%">Контент</a> не найден.'},midClick:!0})}},{key:"selection",value:function(){var t=this;this.elems.forEach((function(e){if(e.classList.contains("j-modal-inline")){var n=it(e);t.inline(n)}if(e.classList.contains("j-modal-ymap")){var i=it(e);t.ymap(i)}if(e.classList.contains("j-modal-zoom")){var o=it(e);t.zoom(o)}if(e.classList.contains("j-modal-video")){var a=it(e);t.video(a)}if(e.classList.contains("j-modal-widget")){var s=it(e);t.widget(s)}if(e.classList.contains("j-modal-progress")){var r=it(e);t.videoProgress(r)}}))}},{key:"inline",value:function(t){t.magnificPopup({type:"inline",mainClass:t.attr("data-effect")?t.attr("data-effect"):"mfp-move-from-top",callbacks:{open:function(){console.log("⟶ ",this.contentContainer[0].parentNode),l.bodyFixed(this.contentContainer[0].parentNode)},close:function(){at.publish("removeDataCustomInput",this),l.bodyStatic()}}})}},{key:"widget",value:function(t){var e=t.attr("data-widget"),n=document.querySelector("body");t.magnificPopup({type:"inline",mainClass:"mfp-move-widget",callbacks:{beforeOpen:function(){var t=this.contentContainer.find(".modal");l.bodyFixed(t),e&&n.classList.add("_popup-".concat(e))},beforeClose:function(){l.bodyStatic(),e&&n.classList.remove("_popup-".concat(e))}}})}},{key:"ymap",value:function(t){t.magnificPopup({type:"inline",callbacks:{open:function(){var t=document.querySelector(".j-map-lazy");new nt({elem:t,id:105}).init()}}})}},{key:"zoom",value:function(t){t.magnificPopup({type:"image",closeOnContentClick:!0,closeBtnInside:!1,fixedContentPos:!1,closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',mainClass:"mfp-no-margins mfp-with-zoom",image:{verticalFit:!0},zoom:{enabled:!0,duration:300,opener:function(t){return t}},callbacks:{imageLoadComplete:function(){var t=this;setTimeout((function(){t.wrap.addClass("mfp-image-loaded")}),16)},close:function(){this.wrap.removeClass("mfp-image-loaded")}}})}},{key:"video",value:function(t){t.magnificPopup({type:"iframe",mainClass:"mfp-no-margins mfp-with-zoom",removalDelay:300,preloader:!1,closeOnContentClick:!0,closeBtnInside:!1,fixedContentPos:!0,closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>'})}},{key:"videoProgress",value:function(t){t.magnificPopup({type:"iframe",mainClass:"mfp-no-margins mfp-with-zoom modal-video-progress",removalDelay:300,preloader:!1,closeOnContentClick:!0,closeBtnInside:!1,fixedContentPos:!0,closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>'})}}])&&ot(e.prototype,n),i&&ot(e,i),t}(),rt=st;function lt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ct=function(){return null},ut=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elem=e.elem,this.hash=e.hash||Boolean(this.elem.dataset.tabHash)||!1,this.tabsParent=this.elem.querySelector(e.tabsParent||".tab__buttons")||null,this.tabItem=e.tabItem||".tab__btn",this.tabs=Array.from(this.tabsParent.querySelectorAll(this.tabItem)),this.isType=e.type||this.elem.dataset.type,this.contentItem="true"!==this.isType?e.contentItem||".tab__content-item":".tab__content-type-elem",this.contentsParent=this.elem.querySelector(e.contentsParent||".tab__content")||null,this.contents=!!this.contentsParent&&Array.from(this.contentsParent.querySelectorAll(this.contentItem)),this.dataTab={},this.onChangeCallback=e.onChangeCallback||ct,this.activeClass="is-active"}var e,n,i;return e=t,(n=[{key:"init",value:function(t){this._setInitialState(),this._bindContext(),this._bindEvents()}},{key:"_setInitialState",value:function(){var t=this.tabsParent.querySelector("".concat(this.tabItem,".").concat(this.activeClass))||this.tabs[0];if(this.hash){var e=this._getHash();t=e&&this.tabsParent.querySelector("".concat(this.tabItem,'[data-tab="').concat(e,'"]'))||t}this.isType&&(this.contents=!!this.contentsParent&&Array.from(this.contentsParent.querySelectorAll(".col"))),this.toggleTab(t)}},{key:"_getHash",value:function(){return window.location.hash.replace(RegExp("^#","u"),"")}},{key:"_bindContext",value:function(){this._onTabs=this._onTabs.bind(this)}},{key:"_bindEvents",value:function(){this.tabsParent.addEventListener("click",this._onTabs)}},{key:"_onTabs",value:function(t){t.preventDefault(),t.target&&t.target.closest(this.tabItem)&&this.toggleTab(t.target.closest(this.tabItem))}},{key:"toggleTab",value:function(t){this._setData(t),this._changeState(),this.onChangeCallback(this.dataTab),this.isType&&this._changeTypeState()}},{key:"_setData",value:function(t){this.dataTab={tab:t,id:t.dataset.tab}}},{key:"_changeState",value:function(){var t=this,e=this.dataTab.id;this.tabs.forEach((function(n){n.classList.toggle(t.activeClass,n.dataset.tab===e)})),this.contentsParent&&this.contents.forEach((function(n){n.classList.toggle(t.activeClass,n.dataset.tab===e)}))}},{key:"_changeTypeState",value:function(){var t=this.dataTab.id;this.contents.forEach((function(e){e.dataset.type===t||"all"===t?e.style.display="block":e.style.display="none"}))}}])&&lt(e.prototype,n),i&&lt(e,i),t}(),ht=ut;function dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ft=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.textContent=this.options.elem,this.iframes=this.textContent.querySelectorAll(":scope > iframe"),this.images=this.textContent.querySelectorAll(":scope > img")}var e,n,i;return e=t,(n=[{key:"init",value:function(){var t=this;this.iframes.forEach((function(e){t.iframeContent(e)})),this.images.forEach((function(e){t.imageContent(e)}))}},{key:"iframeContent",value:function(t){l.wrapContent(t,"div","ui-iframe")}},{key:"imageContent",value:function(t){var e=t.getAttribute("alt");if(""!==e&&!t.classList.length){l.wrapContent(t,"figure");var n=t.parentNode;l.insetContent(n,"<figcaption>"+e+"</figcaption>")}}}])&&dt(e.prototype,n),i&&dt(e,i),t}(),pt=ft;n(599);function mt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var vt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"prev",value:function(){return'<button type=\'button\' class=\'slick-prev\'>\n    <span class="slick-arrow__inner">\n    <svg class="slick-arrow__svg" width="13" height="22" viewBox="0 0 13 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M12.9675 2.9675L4.95253 11L12.9675 19.0325L10.5 21.5L2.91049e-05 11L10.5 0.5L12.9675 2.9675Z"/>\n      </svg>\n    </span>\n  </button>'}},{key:"next",value:function(){return'<button type=\'button\' class=\'slick-next\'>\n    <span class="slick-arrow__inner">\n      <svg class="slick-arrow__svg" width="13" height="22" viewBox="0 0 13 22" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M0.0324708 2.9675L8.04747 11L0.0324715 19.0325L2.49997 21.5L13 11L2.49997 0.5L0.0324708 2.9675Z"/>\n      </svg>\n    </span>\n  </button>'}}],(n=null)&&mt(e.prototype,n),i&&mt(e,i),t}(),yt=vt;n(692);function bt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function kt(t,e,n){return e&&gt(t.prototype,e),n&&gt(t,n),t}new b;S.os.config({nullTargetWarn:!1});var _t=function(){function t(e){bt(this,t),this.slider=e.elem,this.duration=e.duration||.6,this.animInNext="_fadeInLeft",this.animOutNext="_fadeOutLeft",this.animInPrev="_fadeInRight",this.animOutPrev="_fadeOutRight"}return kt(t,[{key:"init",value:function(){var t=this;this.slider.on({beforeChange:function(e,n,i,o){t.direction=t._getDirection(n,i,o),t._hideSlide(n.$slides[i],t.direction),setTimeout((function(){t._showSlide(n.$slides[o],t.direction)}),1e3*t.duration/2)}})}},{key:"_sliderEnter",value:function(){this.isPause=!1,this._progressbarStart(!0)}},{key:"_sliderExit",value:function(){this.isPause=!0}},{key:"_hideSlide",value:function(t,e){var n=this;"NEXT"===e?(this.animOut=this.animOutNext,this.animIn=this.animInNext):(this.animOut=this.animOutPrev,this.animIn=this.animInPrev);var i=t.querySelector(".sl-info__content"),o=[i];i&&(o.forEach((function(t){t&&t.classList.add(n.animOut)})),setTimeout((function(){i.classList.remove(n.animOutNext,n.animInNext,n.animOutPrev,n.animInPrev),o.forEach((function(t){t&&(t.classList.remove(n.animIn),t.classList.add("not-animated"))}))}),1e3*this.duration/2))}},{key:"_showSlide",value:function(t,e){"NEXT"===e?(this.animOut=this.animOutNext,this.animIn=this.animInNext):(this.animOut=this.animOutPrev,this.animIn=this.animInPrev);var n=t.querySelector(".sl-info__content");n&&n&&n.classList.add(this.animIn)}},{key:"_getDirection",value:function(t,e,n){var i=t.$slides.length;return e===i-1&&0===n?"NEXT":n===i-1&&0===e?"PREV":e<n?"NEXT":"PREV"}},{key:"on",value:function(t,e){this.$slickElem.on(t,e)}}]),t}(),wt=n(248),Ct=n(600),St=n(960),Et=n(692);function Lt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ot(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function xt(t,e,n){return e&&Ot(t.prototype,e),n&&Ot(t,n),t}function Tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jt=new b,At=function(){function t(e){Lt(this,t),this.options=e,this.slickWrap=this.options.elem,this.slick=this.options.inner||this.slickWrap.querySelector(".j-sl-slider"),this.slickOptions=this.options.settings,this.countSeparator=this.options.separator||this.slickWrap.dataset.separator||"/",this.slCounter=null,this.types={gallery:this.options.gallery||"true"===this.slickWrap.dataset.slickGallery||!1,counter:this.options.counter||"true"===this.slickWrap.dataset.slickCounter||!1,video:this.options.video||"true"===this.slickWrap.dataset.slickVideo||!1,embed:this.options.embed||"true"===this.slickWrap.dataset.slickEmbed||!1,lazy:this.options.lazy||"true"===this.slickWrap.dataset.lazy||!1},this.slideOnWindow=Number(this.slickWrap.dataset.slide)||1,this.isSliderHero=this.slickWrap.classList.contains("main__wrap")}return xt(t,[{key:"init",value:function(){this.isSliderHero&&l.isMobile()&&(this.types.counter=!1),this.createCounter(),this.setOptions(),this.createGalleryLink(),this.createVideo(),this.initSlick(),this._subscribe()}},{key:"setOptions",value:function(){switch(this.slickOptions.speed=this.slickOptions.speed||800,this.slickOptions.prevArrow=yt.prev(),this.slickOptions.nextArrow=yt.next(),"true"===this.slickWrap.dataset.slickGallery&&(this.types.gallery=!0),this.slideOnWindow){case 1:this.slickOptions.slidesToShow=1;break;case 2:this.slickOptions.slidesToShow=2,this.slickOptions.responsive=[{breakpoint:767,settings:{slidesToShow:1}}];break;case 3:this.slickOptions.slidesToShow=3,this.slickOptions.responsive=[{breakpoint:1200,settings:{slidesToShow:3}},{breakpoint:1023,settings:{slidesToShow:2}},{breakpoint:601,settings:{slidesToShow:1}}];break;case 4:this.slickOptions.slidesToShow=4,this.slickOptions.responsive=[{breakpoint:1200,settings:{slidesToShow:3}},{breakpoint:1023,settings:{slidesToShow:2}},{breakpoint:601,settings:{slidesToShow:1}}];break;case 5:this.slickOptions.slidesToShow=5,this.slickOptions.responsive=[{breakpoint:1200,settings:{slidesToShow:4}},{breakpoint:1023,settings:{slidesToShow:3}},{breakpoint:601,settings:{slidesToShow:2}}]}this.types.counter&&(this.slickOptions.appendArrows=this.slCounter)}},{key:"_subscribe",value:function(){var t=this;this.isSliderHero&&jt.subscribe("preloader:end",(function(){t.$slickElem.find(".slick-current .sl-info__content").addClass("_fadeInLeft")}))}},{key:"createCounter",value:function(){if(this.types.counter){this.slCounter=document.createElement("div"),this.slCounter.classList.add("sl-count"),l.insetContent(this.slickWrap,this.slCounter);var t=document.createElement("div");t.classList.add("sl-count__numbs"),l.insetContent(this.slCounter,t)}}},{key:"updateCounter",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.slickWrap.querySelector(".sl-count__numbs").innerHTML="<span>".concat(String(n+1),"</span> <span>").concat(this.countSeparator," ").concat(+e.slideCount,"</span>")}},{key:"createGalleryLink",value:function(){if(!this.types.gallery)return!1;this.slick.querySelectorAll(".sl-item").forEach((function(t){var e=t.querySelector("img"),n=t.getAttribute("data-video"),i=e.dataset.lazy||e.dataset.src;if(n){var o=document.createElement("a");o.setAttribute("href",i),o.setAttribute("class","sl-item__link sl-item__link-embed"),l.insetContent(t,o)}else{l.wrapContent(e,"a");var a=e.parentNode;a.setAttribute("href",i),a.setAttribute("class","sl-item__link ui-zoom")}}))}},{key:"createGalleryButton",value:function(){l.insetContent(this.slickWrap,'<div class=\'sl-gallery-btn\'>\n     <svg viewBox="0 0 96 96" xmlns="http://www.w3.org/2000/svg"><title/><g><path d="M30,0H6A5.9966,5.9966,0,0,0,0,6V30a6,6,0,0,0,12,0V12H30A6,6,0,0,0,30,0Z"/><path d="M90,0H66a6,6,0,0,0,0,12H84V30a6,6,0,0,0,12,0V6A5.9966,5.9966,0,0,0,90,0Z"/><path d="M30,84H12V66A6,6,0,0,0,0,66V90a5.9966,5.9966,0,0,0,6,6H30a6,6,0,0,0,0-12Z"/><path d="M90,60a5.9966,5.9966,0,0,0-6,6V84H66a6,6,0,0,0,0,12H90a5.9966,5.9966,0,0,0,6-6V66A5.9966,5.9966,0,0,0,90,60Z"/></g></svg>\n     </div>')}},{key:"bindEventGalleryButton",value:function(t,e){var n=this,i=0;t.addEventListener("lgBeforeSlide",(function(t){var e=t.detail.index;i=e})),t.addEventListener("lgBeforeClose",(function(){e.slick("slickGoTo",+i)})),this.slickWrap.querySelector(".sl-gallery-btn").addEventListener("click",(function(){n.slickWrap.querySelector(".slick-current .sl-item__link").click()}))}},{key:"changeSlideGalleryOnScroll",value:function(t,e){t.addEventListener("lgAfterOpen",(function(){window.addEventListener("wheel",(function(t){t.deltaY>0?e.goToNextSlide():e.goToPrevSlide()}))}))}},{key:"createVideo",value:function(){var t=this;if((this.types.video||this.types.embed)&&(this.slick.querySelectorAll(".sl-item").forEach((function(e){var n=e.querySelector("img"),i=n.getAttribute("data-src");if(i){var o=l.youTubeGetId(i),a=null;t.types.embed?(l.wrapContent(n,"div"),a=e.querySelector("div")):(l.wrapContent(n,"a"),(a=e.querySelector("a")).setAttribute("href",i)),a.setAttribute("class","hover-video");var s="https://img.youtube.com/vi_webp/".concat(o,"/sddefault.webp");n.setAttribute("src",s),t.types.embed&&t.embed(e,o)}})),!this.types.embed)){var e=this.slick;(0,wt.A)(e,{plugins:[St.A],selector:".sl-item a",mousewheel:!0,zoomFromOrigin:!1,getCaptionFromTitleOrAlt:!1,autoplayFirstVideo:!0,mobileSettings:{controls:!0,showCloseIcon:!0,download:!0}})}}},{key:"embed",value:function(t,e){var n=t.getAttribute("data-video"),i=t.querySelector(".hover-video");"click"!==n&&"play"!==n||i.addEventListener("click",(function(n){var i=document.createElement("iframe");i.setAttribute("frameborder","0"),i.setAttribute("class","sl-item__iframe"),i.setAttribute("allowfullscreen",""),i.setAttribute("src","https://www.youtube.com/embed/".concat(e,"?rel=0&showinfo=0&autoplay=1&mute=1&loop=1&enablejsapi=1&playlist=").concat(e)),t.innerHTML="",t.classList.add("loading"),i.onload=function(){t.classList.remove("loading")},t.appendChild(i)}))}},{key:"initSlick",value:function(){var t=this;if(this.$slickElem=Et(this.slick),this.types.counter&&this.$slickElem.on("init reInit afterChange",t.updateCounter.bind(this)),this.isSliderHero&&new _t({elem:this.$slickElem}).init(),this.$slickElem.on("init",t.onInit.bind(this)),this.$slickElem.on("afterChange",t.onAfterChange.bind(this)),this.$slickElem.on("beforeChange",t.onBeforeChange.bind(this)),this.$slickElem.slick(this.slickOptions),this.types.gallery){var e=t.slick;t.createGalleryButton(),t.bindEventGalleryButton(e,this.$slickElem);var n=(0,wt.A)(e,{selector:".slick-slide:not(.slick-cloned) .sl-item__link",plugins:[St.A],getCaptionFromTitleOrAlt:!1});t.changeSlideGalleryOnScroll(e,n)}}},{key:"onInit",value:function(t,e){this.slickWrap.classList.contains("sl-fix-shadow")&&this.slickWrap.closest("section").classList.add("overflow")}},{key:"onAfterChange",value:function(t,e,n){if(this.types.embed){var i=e.$slides[n],o=i.querySelector(".sl-item"),a=o.getAttribute("data-video"),s=i.querySelector("iframe");a&&"play"===a&&!s&&o.click()}}},{key:"onBeforeChange",value:function(t,e,n,i){var o=this;setTimeout((function(){o.types.lazy&&jt.publish("updateLazyLoad",t)}),100);var a=e.$slides[n].querySelector("iframe");a&&this._postMessage(a,"stopVideo")}},{key:"_postMessage",value:function(t,e){t.contentWindow.postMessage(JSON.stringify({event:"command",func:e}),"*")}}]),t}(),Pt=function(){function t(e){Lt(this,t),this.options=e,this.gallery=e.elem,this.galleryOpt=e.settings}return xt(t,[{key:"init",value:function(){this.initGallery()}},{key:"initGallery",value:function(){this.gallery.classList.add("_inited");var t,e=null;e=this.gallery.classList.contains("j-gallery-item")?"this":".j-gallery-item:not(._inited)",(0,wt.A)(this.gallery,(Tt(t={plugins:[Ct.A,St.A],licenseKey:"7EC452A9-0CFD441C-BD984C7C-17C8456E",selector:e},"licenseKey","1111-1111-1111-1111"),Tt(t,"getCaptionFromTitleOrAlt",!1),Tt(t,"zoomFromOrigin",!1),Tt(t,"download",!1),Tt(t,"hideScrollbar",!0),Tt(t,"mobileSettings",{controls:!0,showCloseIcon:!0,download:!1}),Tt(t,"youTubePlayerParams",{modestbranding:1,showinfo:0,rel:0}),t))}}]),t}(),Mt=n(319);function It(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var qt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.header=document.querySelector(".header"),this.innerElement=this.header.querySelector(".header-row"),this.height=this.header.offsetHeight,this.heightBase=this.innerElement.offsetHeight,this.scrollPosition=0,this.classes={show:"is-showed",hide:"_hidden",animate:"is-animate",fix:"_fixed",themeTransparent:"is-theme--transparent"},this.wrapperSite=document.querySelector(".wrapper"),this._changeState=this._changeState.bind(this),this.transitionTime=300}var e,n,i;return e=t,n=[{key:"init",value:function(){this._initState(),this._bindEvents()}},{key:"_initState",value:function(){this.header.dataset.static||(this.scrollPosition=l.getScrollTop(),this._isScrollInTarget()||this.header.classList.add(this.classes.fix,this.classes.hide))}},{key:"_bindEvents",value:function(){var t=this;window.addEventListener("scroll",(0,Mt.s)(6,this._changeState)),["resize","orientationchange"].forEach((function(e){window.addEventListener(e,(function(){t.height=t.header.offsetHeight,t.heightBase=t.innerElement.offsetHeight,t._changeState()}))}))}},{key:"_changeState",value:function(){if(!this.header.dataset.static){this.scrollPosition=l.getScrollTop();var t=this.classes,e=t.animate,n=t.fix,i=t.hide,o=t.show;this._isScrollUp()&&(this._isScrollInTarget()?(this.header.classList.remove(o),this.header.classList.add(i)):(this.header.classList.add(o,n,e),this.header.classList.remove(i)),this._isScrollInTarget(-1*this.height)&&this.header.classList.remove(n,e,i,o)),this._isScrollDown()&&!this._isScrollInTarget()&&window.scrollY>this.heightBase&&(this.header.classList.add(i,e),this.header.classList.remove(o)),this.prevScrollPosition=this.scrollPosition}}},{key:"_isScrollUp",value:function(){return this.scrollPosition-this.prevScrollPosition<-1}},{key:"_isScrollDown",value:function(){return this.scrollPosition>this.height&&this.scrollPosition-this.prevScrollPosition>1}},{key:"_isScrollInTarget",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.scrollPosition<100)return!0;if(!this.targetElement)return!1;var e=this.targetElement.offsetHeight-t;return e<0&&(e=0),e>this.scrollPosition&&this.scrollPosition}}],n&&It(e.prototype,n),i&&It(e,i),t}();function Bt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var $t=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elem=e,this.openClass="is-open",this.notCopy=!1}var e,n,i;return e=t,(n=[{key:"init",value:function(){this.elem&&(this._initElements(),this._bindEvents())}},{key:"_initElements",value:function(){this.button=this.elem.querySelector(".j-drop-trigger"),this.tooltipClose=this.elem.querySelector(".j-drop-close"),this.copyUrl=this.elem.querySelector(".j-drop-url"),this.copyUrl&&(this.copyUrlText=this.copyUrl.querySelector(".j-drop-url-text")),this.copyUrl||(this.notCopy=!0)}},{key:"_bindEvents",value:function(){var t=this;this.button.addEventListener("click",this._toggleOpen.bind(this)),this.tooltipClose.addEventListener("click",this._toggleOpen.bind(this)),this.notCopy||this.copyUrl.addEventListener("click",(function(e){e.preventDefault(),t._copyUrl()})),l.clickOutside([".j-drop"],this._close.bind(this),null,!0)}},{key:"_toggleOpen",value:function(){this.elem.classList.toggle(this.openClass),this.notCopy||this._changeCopyText()}},{key:"_close",value:function(){this.elem.classList.contains(this.openClass)&&(this.elem.classList.remove(this.openClass),this.notCopy||this._changeCopyText())}},{key:"_copyUrl",value:function(){var t=document.createElement("input");t.value=window.location.href,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this._changeCopyText(!0)}},{key:"_changeCopyText",value:function(t){this.copyUrlText.innerHTML=t?"Ссылка скопирована":"Скопировать ссылку"}}])&&Bt(e.prototype,n),i&&Bt(e,i),t}(),zt=$t;function Ft(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Dt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ymaps=window.ymaps}var e,n,i;return e=t,(n=[{key:"init",value:function(t){this.geoObjectCollection=t,this.create()}},{key:"create",value:function(){var t=this.ymaps.templateLayoutFactory.createClass('<div class="yandex-map__cluster">{{ properties.geoObjects.length }}</div>');this.clusterer=new this.ymaps.Clusterer({clusterIconLayout:t,groupByCoordinates:!1,gridSize:128,zoomMargin:50,hasBalloon:!1,minClusterSize:2,clusterIconShape:{type:"Circle",coordinates:[0,0],radius:40}});var e=this.geoObjectCollection.toArray().filter((function(t){return"Placemark"===t.options.get("type")&&!t.options.get("data").not_cluster}));this.clusterer.add(e),this.geoObjectCollection.add(this.clusterer)}},{key:"addGeoObjectToClusterer",value:function(t){this.clusterer.add(t)}},{key:"removeGeoObjectToClusterer",value:function(t){this.clusterer.remove(t)}}])&&Ft(e.prototype,n),i&&Ft(e,i),t}(),Nt=Dt;var Ht=n(692);function Rt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Zt=new b,Wt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"init",value:function(t,e,n){this.overlay=document.querySelector(".j-yandex-map__overlay"),this.map=t,this.settings=e,this.ymaps=n,this.body=document.querySelector("body"),this.header=document.querySelector(".header"),this._initZoom(),this._initScrollZoom(),this._addFullScreenControl(),this._bindEvents(),e.disableMobileDrag&&this._disableMobileDrag()}},{key:"_initZoom",value:function(){this.settings.zoomControl&&(this.settings.customZoomControl?this._initCustomZoomControl():this.map.controls.add("zoomControl"))}},{key:"_initScrollZoom",value:function(){this.settings.zoomScroll?this.map.behaviors.enable("scrollZoom"):this.map.behaviors.disable("scrollZoom")}},{key:"_addFullScreenControl",value:function(){this.settings.fullScreenControl&&(this.settings.customFullScreenControl?this._initCustomFullscreenControl():this.map.controls.add("fullscreenControl"))}},{key:"_bindEvents",value:function(){var t=this;["resize","orientationchange"].forEach((function(e){window.addEventListener(e,t._setZoomControlPosition.bind(t))}))}},{key:"_disableMobileDrag",value:function(){var t={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Opera()||t.Windows()}};t.any()&&this.map.behaviors.disable("drag")}},{key:"_initCustomZoomControl",value:function(){var t=this.ymaps;this.zoomControl=new t.control.ZoomControl({options:{layout:this._createLayoutZoomControl()}}),this.map.controls.add(this.zoomControl,{float:"none"}),this._setZoomControlPosition()}},{key:"_createLayoutZoomControl",value:function(){var t,e=this.ymaps,n=this.map.container._parentElement.id,i=e.templateLayoutFactory.createClass('\n  <div class="yandex-map__zoom-wrapper">\n    <div class="yandex-map__zoom-button yandex-map__zoom-button--zoom-in" id="'.concat((t={mapId:n}).mapId,'-zoom-in">\n        <svg width="13" height="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path d="M7 5h4a1 1 0 0 1 0 2H7v4a1 1 0 0 1-2 0V7H1a1 1 0 0 1 0-2h4V1a1 1 0 0 1 2 0v4z"/></svg>\n    </div>\n    <div class="yandex-map__zoom-button yandex-map__zoom-button--zoom-out" id="').concat(t.mapId,'-zoom-out">\n          <svg width="13" height="2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 2"><path d="M7 0h4a1 1 0 1 1 0 2H1a1 1 0 1 1 0-2h6z"/></svg>\n    </div>\n    </div>'),{build:function(){i.superclass.build.call(this),this.zoomInCallback=e.util.bind(this.zoomIn,this),this.zoomOutCallback=e.util.bind(this.zoomOut,this),Ht("#".concat(n,"-zoom-in")).bind("click",this.zoomInCallback),Ht("#".concat(n,"-zoom-out")).bind("click",this.zoomOutCallback)},clear:function(){Ht("#".concat(n,"-zoom-in")).unbind("click",this.zoomInCallback),Ht("#".concat(n,"-zoom-out")).unbind("click",this.zoomOutCallback),i.superclass.clear.call(this)},zoomIn:function(){var t=this.getData().control.getMap();t.setZoom(t.getZoom()+1,{checkZoomRange:!0})},zoomOut:function(){var t=this.getData().control.getMap();t.setZoom(t.getZoom()-1,{checkZoomRange:!0})}});return i}},{key:"_setZoomControlPosition",value:function(){var t=this.map.container._size[1];this.zoomControl&&this.zoomControl.options.set("position",{top:t/2,right:0})}},{key:"_initCustomFullscreenControl",value:function(){var t,e=this,n=this.ymaps,i=n.templateLayoutFactory.createClass('<div class="yandex-map__fullscreen-button yandex-map__fullscreen-button-open" '.concat(t,'>\n        <svg width="13" height="13" viewBox="0 0 13 13" fill="none">\n            <path d="M1 5.03809L1 11.0381" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n            <path d="M1 11.0381H7" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n            <path d="M11.0078 7C11.0078 7 11.0078 1 11.0078 1" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n            <path d="M11.0078 1C11.0078 1 9.00781 1 5.00781 1" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>\n      </div>')+'<div class="yandex-map__fullscreen-button yandex-map__fullscreen-button-close">\n        <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M6.00005 5.36846L0.631575 0L0 0.631574L5.36847 6.00003L6.74523e-05 11.3684L0.631643 12L6.00005 6.63161L11.3684 11.9999L11.9999 11.3683L6.63162 6.00003L12 0.631668L11.3684 9.42307e-05L6.00005 5.36846Z" fill="white"/>\n        </svg>\n        </div>'),o=new n.control.FullscreenControl({options:{layout:i,position:{top:null,right:0}}});this.map.controls.add(o),this.overlay&&this.overlay.addEventListener("click",(function(t){t.preventDefault(),o.enterFullscreen(),e._setZoomControlPosition(),e.body.classList.add("map-open"),e.header.classList.remove("is-showed"),e.header.classList.add("is-hidden")})),this.map.container.events.add("fullscreenexit",(function(){Zt.publish("fullscreenexit"),e.body.classList.remove("map-open")})),this.map.container.events.add("fullscreenenter",(function(){e.body.classList.add("map-open")}))}}])&&Rt(e.prototype,n),i&&Rt(e,i),t}(),Gt=Wt;function Vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ut=new b,Yt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,(n=[{key:"init",value:function(t,e,n){this.map=e,this.settings=n,this.content=t,this.settings.groups&&this.settings.groups.length&&(this._clearIfHas(),this._createLayout(),this._initElements(),this._subscribes(),this._bindEvent())}},{key:"_subscribes",value:function(){var t=this;Ut.subscribe("map:updateGroups",(function(e){var n=!0,i=!1,o=void 0;try{for(var a,s=function(){var e=a.value;t.items.find((function(t){return t.dataset.id===e.groupId.toString()})).querySelector(".j-yandex-map__group-count").innerHTML=e.count},r=e[Symbol.iterator]();!(n=(a=r.next()).done);n=!0)s()}catch(t){i=!0,o=t}finally{try{n||null==r.return||r.return()}finally{if(i)throw o}}}))}},{key:"_clearIfHas",value:function(){var t=this.content.querySelector(".j-yandex-map__groups");t&&l.removeElement(t)}},{key:"_createLayout",value:function(){this.content.children[0].insertAdjacentHTML("beforeend",(this.settings.groups,'<div class="yandex-map__groups j-yandex-map__groups">\n    <div class="yandex-map__group j-yandex-map__group" data-coords="" data-zoom="">\n        <span class="j-yandex-map__group-count"></span>\n    </div>\n</div>'))}},{key:"_initElements",value:function(){this.items=Array.from(this.content.querySelectorAll(".j-yandex-map__group"))}},{key:"_bindEvent",value:function(){var t=this;this.items.forEach((function(e){e.addEventListener("click",(function(){var n=e.dataset.coords.split(","),i=e.dataset.zoom;t.map.panTo([t.map.getCenter(),n],{delay:0,flying:!1,safe:!1,duration:300}).then((function(){t.map.setZoom(i,{duration:300})}))}))}))}}])&&Vt(e.prototype,n),i&&Vt(e,i),t}(),Kt=Yt;function Xt(t){function e(){if(!t.balloon.tags)return"";var e=t.balloon.tags,n="";return e.forEach((function(t){n+='<div class="yandex-map-balloon__tags-item">'.concat(t,"</div>")})),'<div class="yandex-map-balloon__tags">'.concat(n,"</div>")}function n(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t.icon?e?'<div class="yandex-map-balloon__panel-visual">\n              <img class="yandex-map-balloon__panel-image" src="'.concat(t.icon,'" alt="ЖК"/>\n            </div>'):'<img class="yandex-map-balloon__image" src="'.concat(t.icon,'" alt="ЖК"/>'):""}function i(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t.balloon.title?e?'<div class="yandex-map-balloon__panel-title">'.concat(t.balloon.title,"</div>"):'<div class="yandex-map-balloon__title">'.concat(t.balloon.title,"</div>"):""}function o(){if(!t.balloon.phones)return"";var e=t.balloon.phones,n="";return e.forEach((function(t){n+='<a href="'.concat(t.link,'">').concat(t.text,"</a>")})),'<div class="yandex-map-balloon__phones">'.concat(n,"</div>")}function a(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n="",i="";return t.balloon.delivery||t.balloon.location?(t.balloon.delivery&&(n="<li>".concat(t.balloon.delivery,"</li>")),t.balloon.location&&(i="<li>".concat(t.balloon.location," </li>")),e?'<div class="yandex-map-balloon__panel-list">\n                <ul>'.concat(i," ").concat(n,"</ul>\n              </div>"):'<div class="yandex-map-balloon__list">\n                  <ul>'.concat(i," ").concat(n,"</ul>\n                </div>")):""}return'<div class="yandex-map-balloon j-yandex-map-balloon yandex-map-balloon--'.concat(t.modifyClass,'">\n    <div class="yandex-map-balloon__modal">\n    ').concat(t.href?'<a href="'+t.href+'" class="yandex-map-balloon__content">':'<div class="yandex-map-balloon__content">','            <div class="yandex-map-balloon__head">\n                  ').concat(e(),"\n                  ").concat(n(),'\n\n                </div>\n                <div class="yandex-map-balloon__body">\n                  ').concat(i(),"\n                  ").concat(a(),"\n                  ").concat(o(),"\n                  ").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t.balloon.text?e?'<div class="yandex-map-balloon__panel-text">'.concat(t.balloon.text,"</div>"):'<div class="yandex-map-balloon__text">'.concat(t.balloon.text,"</div>"):""}(),'\n                  <div class="yandex-map-balloon__bottom">\n                  ').concat(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t.balloon.phone)return"";var n='<svg class="yandex-map-balloon__phone-svg" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">\n    <path d="M2.41333 5.19333C3.37333 7.08 4.92 8.62 6.80667 9.58667L8.27333 8.12C8.45333 7.94 8.72 7.88 8.95333 7.96C9.7 8.20667 10.5067 8.34 11.3333 8.34C11.7 8.34 12 8.64 12 9.00667V11.3333C12 11.7 11.7 12 11.3333 12C5.07333 12 0 6.92667 0 0.666667C0 0.3 0.3 0 0.666667 0H3C3.36667 0 3.66667 0.3 3.66667 0.666667C3.66667 1.5 3.8 2.3 4.04667 3.04667C4.12 3.28 4.06667 3.54 3.88 3.72667L2.41333 5.19333Z" />\n    </svg>';return e?'<div class="yandex-map-balloon__phone">'.concat(n," ").concat(t.balloon.phone,"</div>"):'<div class="yandex-map-balloon__phone">'.concat(n).concat(t.balloon.phone,"</div>")}(),"\n\n                </div>\n                </div>\n\n          ").concat(t.href?"</a>":"</div>",'\n    </div>\n      <div class="yandex-map-balloon__panel">\n          <div class="yandex-map-balloon__panel-content">\n            <div class="yandex-map-balloon__panel-head">\n              ').concat(e(),"\n              ").concat(n(!0),'\n            </div>\n              <div class="yandex-map-balloon__panel-info">\n                ').concat(i(!0),"\n                ").concat(a(!0),"\n                ").concat(o(!0),"\n                ").concat(t.href?'<a href="'+t.href+'" class="yandex-map-balloon__panel-link">Подробнее</a>':"",'\n              </div>\n          </div>\n      </div>\n      <button class="yandex-map-balloon__close j-yandex-map-balloon-close">\n        <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M6.00005 5.36846L0.631575 0L0 0.631574L5.36847 6.00003L6.74523e-05 11.3684L0.631643 12L6.00005 6.63161L11.3684 11.9999L11.9999 11.3683L6.63162 6.00003L12 0.631668L11.3684 9.42307e-05L6.00005 5.36846Z" fill="#000000"/>\n        </svg>\n      </button>\n      </div>\n  ')}function Jt(){return'<div class="yandex-map__dot-marker j-yandex-map-marker"></div>'}function Qt(t){return'<div class="yandex-map__text-marker j-yandex-map-marker">'.concat(t.text,"</div>")}function te(t){return'<div class="yandex-map__infrastructure-marker j-yandex-map-marker"  style="background: '.concat(t.color,'">\n    <img src="').concat(t.icon,'" alt=""/>\n</div>')}var ee=function(){return window.innerWidth<1199};function ne(t){return'<div class="yandex-map__marker j-yandex-map-marker">\n    <img src="'.concat(t.icon,'" alt=""/>\n</div>')}function ie(t){return'<div data-href="'.concat(t.href,'"  class="yandex-map__object-marker j-yandex-map-marker"\n            data-marker-id="').concat(t.id,'">\n            ').concat(t.number?'<div class="yandex-map__object-marker-number">'.concat(t.number,"</div>"):"","\n            ").concat(t.priceFrom?'<div class="yandex-map__object-marker-price">'.concat(t.priceFrom,"</div>"):"","\n        </div>")}function oe(t){return'<div class="yandex-map__object-min-marker j-yandex-map-marker" data-marker-id="'.concat(t.id,'">\n    <div class="yandex-map__object-min-marker-icon">\n      <svg viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M9.00024 10.5C10.6547 10.5 12.0002 9.1545 12.0002 7.5C12.0002 5.8455 10.6547 4.5 9.00024 4.5C7.34574 4.5 6.00024 5.8455 6.00024 7.5C6.00024 9.1545 7.34574 10.5 9.00024 10.5ZM9.00024 6C9.82749 6 10.5002 6.67275 10.5002 7.5C10.5002 8.32725 9.82749 9 9.00024 9C8.17299 9 7.50024 8.32725 7.50024 7.5C7.50024 6.67275 8.17299 6 9.00024 6Z" />\n      <path d="M8.56482 16.3607C8.69176 16.4513 8.84384 16.5 8.99982 16.5C9.1558 16.5 9.30789 16.4513 9.43482 16.3607C9.66282 16.1994 15.0216 12.3302 14.9998 7.50017C14.9998 4.19192 12.3081 1.50017 8.99982 1.50017C5.69157 1.50017 2.99982 4.19192 2.99982 7.49642C2.97807 12.3302 8.33682 16.1994 8.56482 16.3607ZM8.99982 3.00017C11.4816 3.00017 13.4998 5.01842 13.4998 7.50392C13.5156 10.8324 10.2088 13.8212 8.99982 14.8014C7.79157 13.8204 4.48407 10.8309 4.49982 7.50017C4.49982 5.01842 6.51807 3.00017 8.99982 3.00017Z" />\n      </svg>\n      </div>\n</div>')}function ae(t){return'<div class="yandex-map__office-marker j-yandex-map-marker" data-marker-id="'.concat(t.id,'">\n    <div class="yandex-map__office-icon">\n    <svg width="128" height="147" viewBox="0 0 128 147" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <g filter="url(#filter0_d_151_75)">\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M21.5651 17.2798C32.8118 6.85598 48.0656 1.00003 63.9707 1.00003C71.8511 0.992942 79.6558 2.42532 86.9385 5.21536C94.2213 8.00564 100.839 12.0987 106.414 17.2605C111.989 22.4226 116.412 28.5525 119.429 35.2996C122.447 42.0467 124 49.2788 124 56.5825C124 86.8933 101.5 106 84.5068 123.126C77.5 131 72 136.5 67.0643 141.4C66.7456 141.889 66.2959 142.293 65.759 142.574C65.2222 142.854 64.6162 143.001 64 143C63.3828 143.001 62.776 142.854 62.2379 142.573C61.7 142.293 61.2489 141.889 60.9283 141.4C56.5 136.5 50.5 130.5 43.4691 123.101C27 106.5 4 86.8828 4 56.5825C4 41.8413 10.3184 27.7036 21.5651 17.2798Z" fill="white"/>\n        <path d="M37.9936 55.2577C39.7984 56.5227 42.7275 56.5227 44.5394 55.2577L60.3237 44.189C61.0685 43.6665 61.4839 42.9583 61.4839 42.2227V24.4646C61.4839 24.0521 60.7749 23.8459 60.3523 24.1346L27.9028 46.8771C27.3872 47.2415 27.3872 47.8258 27.9028 48.1902L37.9936 55.2577Z" fill="#1F4193"/>\n        <path d="M60.3052 76.0941L44.2713 64.9336C42.4307 63.6573 39.4626 63.6573 37.622 64.9336L27.3716 72.0572C26.8478 72.4248 26.8478 73.0213 27.3716 73.382L60.3343 96.3273C60.7563 96.6186 61.4838 96.4174 61.4838 95.9943V78.0779C61.4911 77.3287 61.0618 76.6212 60.3052 76.0941ZM37.622 60.3071L26.1494 52.3165C25.7275 52.0251 25 52.2332 25 52.6494V68.6237C25 69.0399 25.7202 69.248 26.1494 68.9566L37.622 60.966C37.8912 60.7857 37.8912 60.4874 37.622 60.3071Z" fill="#1F4193"/>\n        <path d="M83.9256 59.9053L64.4826 46.9473C64.2112 46.7682 63.774 46.7682 63.495 46.9473L44.0746 59.9053C43.8032 60.0843 43.8032 60.3804 44.0746 60.5594L63.5101 73.5174C63.7815 73.6965 64.2188 73.6965 64.4977 73.5174L83.9256 60.5594C84.197 60.3804 84.197 60.0843 83.9256 59.9053Z" fill="#1F4193"/>\n        <path d="M83.457 55.2577C85.2621 56.5227 88.1919 56.5227 90.0041 55.2577L100.097 48.1833C100.613 47.819 100.613 47.2346 100.097 46.8702L67.6479 24.1346C67.2324 23.8459 66.5161 24.0521 66.5161 24.4646V42.2365C66.5161 42.9721 66.9316 43.6802 67.6765 44.2027L83.457 55.2577Z" fill="#1F4193"/>\n        <path d="M101.858 52.3164L90.3754 60.3058C90.1135 60.4861 90.1135 60.7843 90.3754 60.9647L101.858 68.954C102.28 69.2522 103 69.0442 103 68.6281V52.6493C103 52.2332 102.28 52.0252 101.858 52.3164ZM100.628 72.061L90.3754 64.9316C88.5345 63.6555 85.5585 63.6555 83.7175 64.9316L67.6949 76.0903C66.9381 76.6105 66.5161 77.3248 66.5161 78.0738V95.9944C66.5161 96.4174 67.2365 96.6186 67.6585 96.3273L100.621 73.3925C101.152 73.018 101.152 72.4286 100.628 72.061Z" fill="#1F4193"/>\n        </g>\n        <defs>\n        <filter id="filter0_d_151_75" x="0" y="0" width="128" height="150" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">\n        <feFlood flood-opacity="0" result="BackgroundImageFix"/>\n        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>\n        <feOffset dy="3"/>\n        <feGaussianBlur stdDeviation="2"/>\n        <feComposite in2="hardAlpha" operator="out"/>\n        <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"/>\n        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_151_75"/>\n        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_151_75" result="shape"/>\n        </filter>\n        </defs>\n        </svg>\n\n      </div>\n</div>')}function se(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var re=new b,le=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.state="close",this.id=null,this.defDelay=300,this.aciveClass="is-active",this._subscribes()}var e,n,i;return e=t,n=[{key:"_subscribes",value:function(){var t=this;re.subscribe("fullscreenexit",(function(){"close"!==t.state&&t._close()}))}},{key:"open",value:function(t){this.data=t.options.get("data"),this.template=t.options.get("template"),this.domTarget=t.getOverlaySync().getLayoutSync().getElement(),this.marker=this.domTarget.querySelector(".j-yandex-map-marker"),this.wrapper=document.querySelector(".j-yandex-map-base"),this.id===Number(this.data.id)?this._close():this.id!==Number(this.data.id)&&"close"!==this.state?(this._close(),this._createTemplate("repeat")):this._createTemplate(),this._bindMapClickListener()}},{key:"_bindMapClickListener",value:function(){var t=this;window.addEventListener("bindMapClick",(function(){t._close()}))}},{key:"_createTemplate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.defDelay:0;this._setStateMarker(),setTimeout((function(){l.insetContent(t.wrapper,t.template(t.data)),t.id=Number(t.data.id),t._getElements(),t._bindEvents(),t._showPanel()}),e)}},{key:"_getElements",value:function(){this.panel=this.wrapper.querySelector(".j-yandex-map-balloon"),this.panelHeight=this.panel.offsetHeight}},{key:"_bindEvents",value:function(){}},{key:"_showPanel",value:function(){this.panel.style.transform="translateY(".concat(-this.panelHeight,"px)"),this.state="show",this.wrapper.classList.add(this.aciveClass)}},{key:"_hideAll",value:function(){this.panel.style.transform="translateY(0px)",this.state="close",this.wrapper.classList.remove(this.aciveClass)}},{key:"_close",value:function(){var t=this;this._removeStateMarker(),this._hideAll(),this.id="тест",setTimeout((function(){l.removeElement(t.panel)}),this.defDelay)}},{key:"_setStateMarker",value:function(){this.marker&&this.marker.classList.add(this.aciveClass)}},{key:"_removeStateMarker",value:function(){this.marker&&(this.activeMarker=document.querySelector(".j-yandex-map-marker.is-active"),this.activeMarker&&this.activeMarker.classList.remove(this.aciveClass),this.marker.classList.remove(this.aciveClass))}}],n&&se(e.prototype,n),i&&se(e,i),t}(),ce=le,ue=n(692);function he(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var de=new ce,fe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ymaps=window.ymaps,this.desktopBreakpoint=1199}var e,n,i;return e=t,n=[{key:"createHtmlMarker",value:function(t){this._setTemplateMarker(t),this._setTemplateBalloon(t),this.ballon=t,this.ballon.balloon&&(this.ballon.balloon.title=this.ballon.balloon.title&&l.hyphenate(this.ballon.balloon.title),this.ballon.balloon.text=this.ballon.balloon.text&&l.hyphenate(this.ballon.balloon.text));var e=this._createMarkerFromTemplate(t),n=t.zIndex||!1,i=t.balloon||!1,o=!(ee()||!i)&&this._createBalloonContentLayout(),a=i||t.href?"pointer":"default",s=new this.ymaps.Placemark(t.coords,{},{type:"Placemark",balloonLayout:o,iconLayout:e,interactiveZIndex:!1,hideIconOnBalloonOpen:this.hideIconOnBalloonOpen,template:this.balloonTemplate,data:t,cursor:a,zIndex:n,panel:de,balloonPanelMaxMapArea:0});return this._bindEventsMarker(s),t.isHidden&&s.options.set("visible",!1),s}},{key:"_createMarkerFromTemplate",value:function(t){return this.ymaps.templateLayoutFactory.createClass(this.markerTemplate(t),{build:function(){this.constructor.superclass.build.call(this),this._$element=ue(".yandex-map__".concat(t.modifyClass,"-marker"),this.getParentElement()),this._options=this.getData().options,this._size=[this._$element[0].offsetWidth,this._$element[0].offsetHeight],this._offset=this._calcElementOffset();var e={type:"Rectangle",coordinates:[this._offset,[this._offset[0]+this._size[0],this._offset[1]+this._size[1]]]};this._options.set("shape",e),this._applyElementOffset(this._offset),this._bindEvents()},_bindEvents:function(){var t=this;this.inited||(this.inited=!0,this.innerWidth=window.innerWidth,window.addEventListener("resize",(function(){window.innerWidth!==t.innerWidth&&(t.innerWidth=window.innerWidth,t.rebuild())})))},_calcElementOffset:function(){switch(t.modifyClass){case"infrastructure":return[-this._size[0]/2,-this._size[1]/2];case"object":return[0,0];default:return[-this._size[0]/2,-this._size[1]]}},_applyElementOffset:function(t){this._$element[0].style.marginLeft="".concat(t[0],"px"),this._$element[0].style.marginTop="".concat(t[1],"px")}})}},{key:"_setSettings",value:function(t){var e={lat:59.939014,lon:30.315545,iconWidth:24,iconHeight:24,offsetTop:0,offsetLeft:0};this.type=t.type||"Point",this.coords=t.coords||[e.lat,e.lon],this.iconLayout="default#image",this.iconImageHref=t.icon||"../../icons/map/media/markers/marker.svg",this.iconImageSize=t.size||[e.iconWidth,e.iconHeight],this.iconImageOffset=t.offset||[e.offsetTop,e.offsetLeft],this.ballon=t}},{key:"_setTemplateMarker",value:function(t){switch(t.modifyClass){case"object":this.hideIconOnBalloonOpen=!1,this.markerTemplate=ie;break;case"object-min":this.hideIconOnBalloonOpen=!1,this.markerTemplate=oe;break;case"office":this.hideIconOnBalloonOpen=!1,this.markerTemplate=ae;break;case"infrastructure":this.hideIconOnBalloonOpen=!1,this.markerTemplate=te;break;case"dot":this.hideIconOnBalloonOpen=!1,this.markerTemplate=Jt;break;case"text":this.hideIconOnBalloonOpen=!1,this.markerTemplate=Qt;break;default:this.hideIconOnBalloonOpen=!1,this.markerTemplate=ne}}},{key:"_setTemplateBalloon",value:function(t){t.modifyClass,this.balloonTemplate=Xt}},{key:"_createBalloonContentLayout",value:function(){var t=this.ymaps.templateLayoutFactory.createClass(this.balloonTemplate(this.ballon),{build:function(){var t=this;this.constructor.superclass.build.call(this),this.balloon=document.querySelector(".j-yandex-map-balloon"),this.closeBallooneButtons=Array.from(document.querySelectorAll(".j-yandex-map-balloon-close")),this.closeBallooneButtons.forEach((function(e){e.addEventListener("click",t.onCloseClick.bind(t))}))},clear:function(){this.constructor.superclass.clear.call(this)},onCloseClick:function(t){var e=this;t.preventDefault(),this.balloon.classList.add("is-hide"),setTimeout((function(){e.events.fire("userclose")}),200)},onSublayoutSizeChange:function(){t.superclass.onSublayoutSizeChange.apply(this,arguments),this.balloon&&this.events.fire("shapechange")},getShape:function(){if(!this.balloon)return t.superclass.getShape.call(this);var e=this.balloon.offsetHeight,n=this.balloon.offsetWidth,i=this.balloon.offsetTop,o=this.balloon.offsetLeft,a=[[o,i],[o+n,i+e]];return new window.ymaps.shape.Rectangle(new window.ymaps.geometry.pixel.Rectangle(a))}});return t}},{key:"closeBalloonOnClickMap",value:function(t){t.geoObjects.events.add("click",(function(){t.balloon.isOpen()&&t.balloon.close()})),t.events.add("click",(function(){t.balloon.isOpen()&&t.balloon.close()}))}},{key:"_bindEventsMarker",value:function(t){window.innerWidth>=this.desktopBreakpoint&&!t.options.get("data").onlyPanel?(t.events.add("mouseenter",this.onMouseenterMarker.bind(this)),t.events.add("mousemove",this.onMousemoveMarker.bind(this)),t.events.add("mouseleave",this.onMouseleaveMarker.bind(this))):t.events.add("click",this.onMouseenterMarker.bind(this))}},{key:"_getMarkerElement",value:function(t){return t.get("target").getOverlaySync().getLayoutSync().getElement().querySelector(".j-yandex-map-marker")}},{key:"_onMouseClickMarker",value:function(t){var e=t.get("target"),n=this._getMarkerElement(t);e.options.get("data").href?n.closest(".j-map-project")?n.classList.contains("is-active")&&window.open(e.options.get("data").href):window.open(e.options.get("data").href):ee()&&e.options.get("balloonLayout")&&(t.preventDefault(),de.open(e))}},{key:"onMousemoveMarker",value:function(t){var e=t.get("target").balloon,n=e.isOpen(),i=this._getMarkerElement(t);n||(this.bindEventsBalloon(e),i.classList.add("is-open"),e.open())}},{key:"onMouseenterMarker",value:function(t){var e=t.get("target"),n=e.balloon,i=e.options.get("data").onlyPanel;ee()||i?(de.open(e),console.log("⟶ panel")):(this.bindEventsBalloon(n),console.log("⟶ baloon"))}},{key:"onMouseleaveMarker",value:function(t){var e=t.get("target").balloon,n=this._getMarkerElement(t);this.timerCloseBalloon=this.getSetTimeoutClosingBalloon(e,n)}},{key:"bindEventsBalloon",value:function(t){t.events.add("mouseenter",this.onMouseenterBalloon.bind(this)),t.events.add("mouseleave",this.onMouseleaveBalloon.bind(this))}},{key:"onMouseenterBalloon",value:function(){clearTimeout(this.timerCloseBalloon),this.timerCloseBalloon=null}},{key:"onMouseleaveBalloon",value:function(t){var e=t.get("target").balloon,n=this._getMarkerElement(t);this.getSetTimeoutClosingBalloon(e,n)}},{key:"getSetTimeoutClosingBalloon",value:function(t,e){return setTimeout((function(){t.close(),e.classList.remove("is-open")}),200)}}],n&&he(e.prototype,n),i&&he(e,i),t}(),pe=fe;function me(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ve=new b,ye=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.buttons=null,this.resetButton=null,this.disableClass="is-disabled"}var e,n,i;return e=t,(n=[{key:"init",value:function(t){this.buttons=Array.from(t.target.querySelectorAll(".j-map-filter-item")),this.resetButton=t.resetButton||null,this._bindEvents()}},{key:"_bindEvents",value:function(){var t=this;this.buttons.forEach((function(e){e.addEventListener("change",(function(){t._changeFilter(e)}))})),this.resetButton&&this.resetButton.addEventListener("click",(function(){t._resetFilter()}))}},{key:"_changeFilter",value:function(t){if(this.buttons.every((function(t){return!1===t.checked})))return this.resetButton&&this.resetButton.classList.add(this.disableClass),void ve.publish("showAllMarkers");var e=t.checked?"addFilterItem":"removeFilterItem",n=[];this.buttons.forEach((function(t){!0===t.checked&&n.push(t.dataset.type)})),this.resetButton&&this.resetButton.classList.remove(this.disableClass),ve.publish(e,n),ve.publish("filterUpdated")}},{key:"_resetFilter",value:function(){this.buttons.forEach((function(t){t.checked=!1})),this.resetButton&&this.resetButton.classList.add(this.disableClass),ve.publish("showAllMarkers")}}])&&me(e.prototype,n),i&&me(e,i),t}(),be=ye;function ge(t,e,n,i,o,a,s){try{var r=t[a](s),l=r.value}catch(t){return void n(t)}r.done?e(l):Promise.resolve(l).then(i,o)}function ke(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){ge(a,i,o,s,r,"next",t)}function r(t){ge(a,i,o,s,r,"throw",t)}s(void 0)}))}}function _e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function we(t,e){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=s.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}}var Ce=new b,Se=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ymaps=e,this.geoObjectCollection=new this.ymaps.GeoObjectCollection,this.settings={},this.map=null,this.url="",this.baseClass=".j-yandex-map-base",this.preloaderClass="is-loading",this.desktopBreakpoint=1199}var e,n,i;return e=t,n=[{key:"init",value:function(t){this.outerOptions=t,this.mapWrapper=t.wrapper,this.content=this.mapWrapper.querySelector(this.baseClass),this.id=this.content.id,this.url=this.mapWrapper.dataset.ajax||t.ajax,this.json=this.mapWrapper.dataset.json||t.json,this.mapWrapper.removeAttribute("data-json"),this._runMap(),this._subscribes()}},{key:"update",value:function(){this.geoObjectCollection&&(this.map.geoObjects.remove(this.geoObjectCollection),this.geoObjectCollection=new this.ymaps.GeoObjectCollection),this._initHistoricalPolygon(),this._initMarker(),this._initGroups(),this._initCircles()}},{key:"_subscribes",value:function(){var t=this;this._showGeoObject=this._showGeoObject.bind(this),this._hideGeoObject=this._hideGeoObject.bind(this),Ce.subscribe("addFilterItem",(function(e){t._toggleGeoObjects(e,t._showGeoObject)})),Ce.subscribe("removeFilterItem",(function(e){t._toggleGeoObjects(e,t._hideGeoObject)})),Ce.subscribe("showAllMarkers",(function(){t._visibleAllMarkers()})),Ce.subscribe("mapSetCenter",(function(){t._setCenterMap()}))}},{key:"removeFilterItem",value:function(t){var e=this;t.forEach((function(t){e.geoObjectCollectionArray.forEach((function(n){n.options.get("data").type===t&&e._hideGeoObject(n)}))}))}},{key:"addFilterItem",value:function(t){var e=this;t.forEach((function(t){e.geoObjectCollectionArray.forEach((function(n){n.options.get("data").type===t&&e._showGeoObject(n)}))}))}},{key:"updateGroups",value:function(t){if(this.settings.groups){var e=[],n=!0,i=!1,o=void 0;try{for(var a,s,r=function(){var n=s.value,i=a.geoObjectCollectionArray.filter((function(e){return e.options.get("data").type===t&&e.options.get("data").group===n.id}));e.push({groupId:n.id,count:i.length})},l=this.settings.groups[Symbol.iterator]();!(n=(s=l.next()).done);n=!0)a=this,r()}catch(t){i=!0,o=t}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}Ce.publish("map:updateGroups",e)}}},{key:"_runMap",value:function(){var t=this;return ke((function(){return we(this,(function(e){switch(e.label){case 0:return[4,t._setSettings()];case 1:return e.sent(),[4,t._initYandexMap()];case 2:return e.sent(),t._setDeviceSettings(),t._initMarker(),t._initControls(),t._initCluster(),t._initGroups(),t._initCircles(),t._bindEvents(),t._showMap(),t._initMapFilter(),Ce.publish("map:ready"),[2]}}))}))()}},{key:"_setSettings",value:function(){var t=this;return ke((function(){var e,n,i;return we(this,(function(o){switch(o.label){case 0:if(t._connectSettings(t._setDefaultSettings()),t._connectSettings(t._setScriptSettings()),!t.url)return[3,5];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,l.send.post(t.body,t.url)];case 2:return e=o.sent(),t._connectSettings(e.data.data),[3,4];case 3:return n=o.sent(),console.error("Не удалось получить данные от сервера, карта работает с дефолтными настройками ".concat(n)),[3,4];case 4:return[2];case 5:return t.json&&(i=JSON.parse(t.json),t._connectSettings(i.data)),[2]}}))}))()}},{key:"_initYandexMap",value:function(){var t=this;return ke((function(){var e,n;return we(this,(function(i){switch(i.label){case 0:e=function(){return new Promise((function(e){if(t.map=new t.ymaps.Map(t.id,t.settings,{suppressMapOpenBlock:!0}),!t.map)throw new Error;e()}))},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e()];case 2:return[2,i.sent()];case 3:throw n=i.sent(),console.error("При инициализации Яндекс Карт произошла критическая ошибка ".concat(n)),new Error;case 4:return[2]}}))}))()}},{key:"_connectSettings",value:function(t){var e;"object"==(void 0===t?"undefined":(e=t)&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)&&Object.assign(this.settings,t)}},{key:"_setDefaultSettings",value:function(){return{center:[59.939014,30.315545],mapTypeControl:!1,autoZoom:!1,zoom:12,zoomMargin:250,minZoom:10,maxZoom:18,zoomStep:1,controls:[],zoomControl:!0,customZoomControl:!0,fullScreenControl:!0,customFullScreenControl:!0,height:this.content.offsetHeight,zoomScroll:!1,markers:[]}}},{key:"_setScriptSettings",value:function(){return this.outerOptions}},{key:"_setDeviceSettings",value:function(){this._setDeviceCenter(),this._setDeviceZoom(),this.outerOptions.disableZoom&&this._disableZoom(),this.outerOptions.disableDrag&&this._disableDrag()}},{key:"_setDeviceCenter",value:function(){if(this.settings.centerMobile){var t=this.map.getZoom();l.isMobile()?this.map.setCenter(this.settings.centerMobile,t,{useMapMargin:!0}):this.map.setCenter(this.settings.center,t,{useMapMargin:!0})}}},{key:"_setDeviceZoom",value:function(){this.settings.zoomMobile&&(l.isMobile()?this.map.setZoom(this.settings.zoomMobile):this.map.setZoom(this.settings.zoom))}},{key:"_initMarker",value:function(){var t=this;this.settings.markers.forEach((function(e){var n=new pe;t.geoObjectCollection.add(n.createHtmlMarker(e)),n.closeBalloonOnClickMap(t.map)})),this.geoObjectCollectionArray=this.geoObjectCollection.toArray().map((function(t){return t})),this.map.geoObjects.add(this.geoObjectCollection),this.geoObjectCollectionArray.length>1&&this.settings.autoZoom&&this.map.setBounds(this.geoObjectCollection.getBounds(),{zoomMargin:this.settings.zoomMargin}),this._bindMapClick()}},{key:"_bindMapClick",value:function(){var t=this,e=new CustomEvent("bindMapClick");window.dispatchEvent(e),this.map.events.add("click",(function(){window.innerWidth<t.desktopBreakpoint&&window.dispatchEvent(e)}))}},{key:"_initControls",value:function(){(new Gt).init(this.map,this.settings,this.ymaps)}},{key:"_initCluster",value:function(){this.settings.markers.filter((function(t){return"object-min"===t.modifyClass})),this.outerOptions.cluster&&(this.cluster=new Nt,this.cluster.init(this.geoObjectCollection))}},{key:"_initGroups",value:function(){this.settings.groups&&this.settings.groups.length&&(new Kt).init(this.content,this.map,this.settings)}},{key:"_initCircles",value:function(){var t=this,e=this.settings.circles;e&&e.forEach((function(e){var n=new ymaps.Circle([e.center,e.radius],{},{fillColor:e.fillColor,fillOpacity:e.fillOpacity,strokeColor:e.strokeColor,strokeOpacity:e.strokeOpacity,strokeWidth:e.strokeWidth,strokeStyle:e.strokeStyle});t.map.geoObjects.add(n)}))}},{key:"_bindEvents",value:function(){var t=this;this._setDeviceSettings=this._setDeviceSettings.bind(this),["resize","orientationchange"].forEach((function(e){window.addEventListener(e,l.debounce(t._setDeviceSettings,100))}))}},{key:"_showMap",value:function(){this.content.classList.remove(this.preloaderClass),this.content.style.opacity="1",this.outerOptions.afterShow&&this.outerOptions.afterShow()}},{key:"_initMapFilter",value:function(){var t=document.querySelector(".j-map-filter"),e=document.querySelector(".j-map-filter-reset"),n=document.querySelector(".j-map-filter-apply");t&&((new be).init({target:t,resetButton:e}),n&&Ce.subscribe("filterUpdated",(function(){n.classList.remove("is-hidden")})));var i=document.querySelector(".j-yandex-map-infrastructure"),o=document.querySelector(".j-yandex-map-filter-list-toggle");o&&i&&(o.addEventListener("click",(function(){i.classList.toggle("is-open"),o.classList.toggle("is-open")})),n.addEventListener("click",(function(){n.classList.add("is-hidden"),i.classList.remove("is-open"),o.classList.remove("is-open")})))}},{key:"_showGeoObject",value:function(t){this.cluster.addGeoObjectToClusterer(t)}},{key:"_hideGeoObject",value:function(t){this.cluster.removeGeoObjectToClusterer(t)}},{key:"_toggleGeoObjects",value:function(t,e){var n=this;this.geoObjectCollectionArray.forEach((function(t){"object"!==t.options.get("data").type&&"text"!==t.options.get("data").type&&n._hideGeoObject(t)})),t.forEach((function(t){n.geoObjectCollectionArray.forEach((function(i){i.options.get("data").type===t&&(e(i),n._showGeoObject(i))}))}))}},{key:"_visibleAllMarkers",value:function(){var t=this;this.geoObjectCollectionArray.forEach((function(e){"object"!==e.options.get("data").type&&t._showGeoObject(e)}))}},{key:"hideAllMarkers",value:function(){var t=this;this.geoObjectCollectionArray.forEach((function(e){"object"!==e.options.get("data").type&&t._hideGeoObject(e)}))}},{key:"_openBalloon",value:function(t,e){var n=this,i=Number(t);this.geoObjectCollection.each((function(t){var o=Number(t.options.get(e));if(i===o){var a=t.options.get("panel"),s=t.geometry.getCoordinates();mapUtils.needBalloonPanel()?a.open(t):t.balloon.open(),n._scrollToMap(),n._setCenterMap(s)}}))}},{key:"_scrollToMap",value:function(){mapUtils.isMobile()&&(scrollBy.init(),scrollBy.scrollToElement(this.mapWrapper))}},{key:"_setCenterMap",value:function(t){mapUtils.isMobile()&&this.setCenter(t,this.settings.zoom)}},{key:"_disableZoom",value:function(){var t=this.map.getZoom();this.map.behaviors.disable("dblClickZoom"),this.map.behaviors.disable("scrollZoom"),this.map.options.set("maxZoom",t),this.map.options.set("minZoom",t)}},{key:"_disableDrag",value:function(){this.map.behaviors.disable("drag")}},{key:"getMarkers",value:function(){return this.settings.markers}},{key:"setCenter",value:function(t,e){this.map.setCenter(t,e)}},{key:"setBoundsOnType",value:function(t){var e=this.getMarkers().filter((function(e){return e.type===t})).map((function(t){return t.coords}));this.map.setBounds(ymaps.util.bounds.fromPoints(Array.from(e)),{zoomMargin:l.isDesktop()?[100,100,100,500]:100}),console.log("⟶ ",e.length),e.length<=2&&this.map.setZoom(17,{duration:300})}}],n&&_e(e.prototype,n),i&&_e(e,i),t}(),Ee=Se;function Le(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Oe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=null,this.activeClass="is-active",this.ymaps=window.ymaps}var e,n,i;return e=t,(n=[{key:"init",value:function(t){this.container=t.container,this.container&&this.ymaps&&(this._initElements(),this._initMap())}},{key:"_initElements",value:function(){this.mapEl=this.container.querySelector(".j-yandex-map-base"),this.tabContainer=document.querySelector(".j-map-tab-container"),this.tabContent=document.querySelector(".j-map-tab-content"),this.tabContentItems=this.tabContent.querySelectorAll(".tab__content-item")}},{key:"_initMap",value:function(){var t=this;this.container.dataset.json&&this.ymaps.ready((function(){t.map=new Ee(t.ymaps),t.map.init({wrapper:t.container,cluster:!0,fullScreenControl:!0,customFullScreenControl:!0,customZoomControl:!0,json:t.container.dataset.json||!1,afterShow:t._afterShowMap.bind(t)})}))}},{key:"_afterShowMap",value:function(){var t=this.map.getMarkers(),e=[],n=t.filter((function(t){if(-1===e.indexOf(t.type))return e.push(t.type),t.typeText})),i=Array.from(n).map((function(t,e){return{slug:t.type,text:t.typeText,active:0===e}}));this._insertNavigation(i),this._bindEventNavigation()}},{key:"_insertNavigation",value:function(t){t&&t.length&&l.insetContent(this.tabContainer,function(t){return e="",t.types.forEach((function(t){e+='<span class="contacts2-map__tab j-map-tab-type '.concat(t.active?"is-active":"",'"\n        data-type="').concat(t.slug,'">\n            ').concat(t.text,"\n      </span>")})),e;var e}({types:t}))}},{key:"_bindEventNavigation",value:function(){var t=this,e=Array.from(this.tabContainer.querySelectorAll(".j-map-tab-type")),n=e.find((function(e){return e.classList.contains(t.activeClass)}));n&&(this._selectType(n.dataset.type),this._selectTypeOfficeTabs(n.dataset.type)),e.forEach((function(n){n.addEventListener("click",(function(i){i.preventDefault(),e.forEach((function(e){e.classList.remove(t.activeClass),e===n&&e.classList.add(t.activeClass)})),t._selectType(n.dataset.type),t._selectTypeOfficeTabs(n.dataset.type)}))}))}},{key:"_selectType",value:function(t){this.map.hideAllMarkers(),this.map.addFilterItem([t]),this.map.updateGroups(t),this.map.setBoundsOnType(t)}},{key:"_selectTypeOfficeTabs",value:function(t){var e=this;this.tabContentItems.forEach((function(n){n.dataset.type&&(n.dataset.type===t?n.classList.add(e.activeClass):n.classList.remove(e.activeClass))}))}}])&&Le(e.prototype,n),i&&Le(e,i),t}();function xe(){if(!window.ymapsInited)return new Promise((function(t,e){var n=document.createElement("script");n.src="https://api-maps.yandex.ru/2.1/?apikey=fc8ccd61-8a5d-43e8-ae97-d91256868293&lang=ru_RU",n.async=!0,n.defer=!0,n.type="text/javascript",n.onload=t,n.onerror=function(t){e(t)},document.body.appendChild(n)})).then((function(){return window.ymapsInited=!0,new Promise((function(t){window.ymaps.ready(t)}))}))}var Te=n(692);function je(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ae=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elem=document.querySelector(".j-nav"),this.items=this.elem.querySelectorAll(".nav__item"),this.more=this.elem.querySelector(".nav-more"),this.moreList=this.elem.querySelector(".nav-more .nav__dropdown"),this.more=Te(this.more),this.gap=75}var e,n,i;return e=t,(n=[{key:"init",value:function(){var t=this;setTimeout((function(){t.checkNavWidth(),t.elem.style.opacity="1",t.bindEvents()}),300)}},{key:"bindEvents",value:function(){window.addEventListener("resize",this.checkNavWidth.bind(this))}},{key:"checkNavWidth",value:function(){if(l.isDesktop()){for(var t=parseInt(Te(this.elem).closest("div").width()-150),e=parseInt(Te(this.elem).width()-53),n=!1;e>t;){var i=Te(this.elem).find(".nav__item").last();if(!i.length)break;this.more.show();var o='<li class="'+(i.hasClass("active")?"active ":"")+'" data-hidewidth="'+e+'">'+i.html()+"</li>";i.remove(),Te(this.moreList).prepend(o),e=Te(this.elem).find(".nav__list").width(),n=!0}if(!n)do{var a=Te(this.moreList).find("li").length,s=Te(this.moreList).find("li").first();if(!s.length){this.more.hide();break}if(s.attr("data-hidewidth")>t)break;var r='<li class="nav__item '+(s.hasClass("active")?"active ":"")+'" data-hidewidth="'+t+'">'+s.html()+"</li>";if(s.remove(),Te(r).insertBefore(Te(this.more)),!a){this.more.hide();break}e=Te(this.elem).width()}while(e<=t)}}}])&&je(e.prototype,n),i&&je(e,i),t}(),Pe=n(692);function Me(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ie=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.navbar=e.elem,this.sections=e.sections?this.navbar.querySelectorAll(e.sections):this.navbar.querySelectorAll(".j-navbar-section"),this.list=e.list?this.navbar.querySelector(e.list):this.navbar.querySelector(".nav-navbar__list-list"),this.tabs=e.tabs?this.navbar.querySelectorAll(e.tabs):this.navbar.querySelectorAll(".nav-navbar__btn"),this.listLength=this.tabs.length,this.navbarWrapper=this.navbar,this.navbarBlock=e.innerBlock?this.navbar.querySelector(e.innerBlock):this.navbar.querySelector(".nav-navbar__inner"),this.topIndent=e.indent||0,this.filling=e.filling||!1,this.getState=this.getState.bind(this),this.state={fixed:!1,bottom:!1},this.stateLast={fixed:!1,bottom:!1}}var e,n,i;return e=t,(n=[{key:"init",value:function(){this.events()}},{key:"events",value:function(){var t=this;this.tabs.forEach((function(e){e.addEventListener("click",(function(){return t.scrollToSlider(e)}))})),window.addEventListener("scroll",(0,Mt.s)(10,this.scrollToActive.bind(this))),window.addEventListener("scroll",(0,Mt.s)(10,this.getState)),this.getState()}},{key:"scrollToSlider",value:function(t){var e=l.getElementIndex(t),n=t.getAttribute("data-id"),i=this.navbar.querySelector('[data-scroll-id="'+n+'"]');if(i){this.topIndent=l.isDesktop()?this.topIndent:50,this.filling||(this.removeActive(),this.tabs[e].classList.add("is-active"));var o=l.getElementOffset(i).top-this.topIndent;Pe("html, body").animate({scrollTop:o},500)}}},{key:"scrollToActive",value:function(){for(var t=window.scrollY+this.topIndent+10,e=0,n=this.sections.length-1;n>=0;n--){var i=this.sections[n],o=void 0;l.getElementOffset(i).top<t?(this.filling&&(o=i.getAttribute("data-scroll-id"),this.list.querySelector('[data-id="'+o+'"]').classList.add("is-active")),e++):this.removeActive(i.getAttribute("data-scroll-id"))}this.filling||(0===e&&(e=1),this.removeActive(),e<=this.listLength&&this.list.children[e-1].classList.add("is-active"))}},{key:"removeActive",value:function(t){if(t){var e=this.navbar.querySelector('[data-id="'+t+'"]');e&&e.classList.remove("is-active")}else this.tabs.forEach((function(t){t.classList.remove("is-active")}))}},{key:"getState",value:function(){var t=this.navbarWrapper.getBoundingClientRect();if(t){var e=Math.round(t.top+this.navbarBlock.getBoundingClientRect().height-this.navbarBlock.getBoundingClientRect().top+220),n=window.scrollY,i=Math.round(this.navbarWrapper.clientHeight+l.getElementOffset(this.navbarWrapper).top-this.list.clientHeight-300);n>i?this.state.bottom=!0:n<i&&(this.state.bottom=!1),t.top<0&&t.top<e?this.state.fixed=!0:this.state.fixed=!1,this.checkState()}}},{key:"checkState",value:function(){var t=this;this.state.bottom===!this.stateLast.bottom&&(this.state.bottom?(this.navbarBlock.classList.add("_hide"),setTimeout((function(){t.navbarBlock.classList.add("_bottom"),t.navbarBlock.classList.remove("_hide"),t.stateLast.bottom=!0}),300)):(this.navbarBlock.classList.add("_hide"),setTimeout((function(){t.navbarBlock.classList.remove("_bottom"),t.navbarBlock.classList.remove("_hide"),t.stateLast.bottom=!1}),300))),this.state.fixed!==this.stateLast.fixed&&(this.state.fixed?(this.navbarBlock.classList.add("_fixed"),setTimeout((function(){t.navbarBlock.classList.add("_show"),t.stateLast.fixed=!0}),300)):(this.navbarBlock.classList.add("_hide"),setTimeout((function(){t.navbarBlock.classList.remove("_fixed"),t.navbarBlock.classList.remove("_hide"),t.navbarBlock.classList.remove("_show"),t.stateLast.fixed=!1}),300)))}}])&&Me(e.prototype,n),i&&Me(e,i),t}(),qe=Ie,Be=n(380),$e=n.n(Be),ze=(n(371),n(692));function Fe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function De(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ne=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=e.elem,this.formValidate=e.formValidate||"false"!==this.form.dataset.validate,this.constraints=null,this.inputs=this.form.querySelectorAll("input, textarea"),this.BtnSubmit=this.form.querySelector("button"),this.inputs=Array.from(this.inputs).filter((function(t){return"hidden"!==t.type&&""!==t.getAttribute("notvalidate")}))}var e,n,i;return e=t,n=[{key:"init",value:function(){this._pass(),this.initPhoneMask(),this.inputFocus(),this.formValidate&&(this.setOptions(),this.bindEvents())}},{key:"_pass",value:function(){var t=this.form.querySelector("input[name=password]"),e=this.form.querySelector("input[name=password_confirm]");(t||e)&&(this._validatePass(t,e),this._showPass(t,e))}},{key:"_showPass",value:function(t,e){[t,e].forEach((function(t){t.closest(".form-group__password").querySelector(".form-group__password-icon").addEventListener("click",(function(t){var e=t.target.parentNode.querySelector(".form-input");"password"===e.getAttribute("type")?e.setAttribute("type","text"):e.setAttribute("type","password")}))}))}},{key:"_validatePass",value:function(t,e){var n=this,i=function(){if(t.value!==e.value)n.showErrorsForInput(e,["Пароли не совпадают"]);else{var i=e.closest(".form-group, .form-group--label");n.resetFormGroup(i)}};t.onchange=i,e.onkeyup=i,e.blur=i}},{key:"initPhoneMask",value:function(){ze(this.form).find("input[type=tel]").mask("+7(A00)000-00-00",{translation:{A:{pattern:/[0-69]/}}}),ze(this.form).find("input[name=birthday]").mask("00.00.0000"),ze(this.form).find("input[name=passport-rf]").mask("0000 000000")}},{key:"checkRequiredEmail",value:function(){var t=!1;return this.inputs.forEach((function(e){"email"===e.type&&e.required&&(t=!0)})),t?{message:"^Поле обязятельно для заполнения"}:null}},{key:"checkInputAttributes",value:function(){this.inputs.forEach((function(t){t.required&&t.removeAttribute("required")}))}},{key:"setOptions",value:function(){var t,e={message:"^Поле обязятельно для заполнения"};this.constraints={email:(t={presence:e},De(t,"presence",this.checkRequiredEmail()),De(t,"email",{message:"^Введите корректный e-mail"}),t),phone:{presence:e,length:{minimum:16,message:"^Неправильный формат телефона"}},message:{length:{minimum:5,message:"^Минимум 5 символов"}},name:{presence:e,length:{minimum:2,message:"^Минимум 2 символа"},format:{pattern:/^[a-zA-Zа-яёА-ЯЁs\s]+$/i,message:"^Имя может содержать только буквы"}},agreement:{presence:{message:"^Для продолжения необходимо согласие с условиями"},inclusion:{within:[!0],message:"^Для продолжения необходимо согласие с условиями"}},privacy:{presence:{message:"^Для продолжения необходимо согласие с условиями"},inclusion:{within:[!0],message:"^Для продолжения необходимо согласие с условиями"}},fio:{presence:e},passport_rf:{presence:e},passport_other:{presence:e},issued_by:{presence:e},inn:{presence:e},birthday:{presence:e,length:{minimum:10,message:"^Некорректная дата"}},password:{presence:e,length:{minimum:6,message:"^Не менее 6 символов"}}}}},{key:"inputFocus",value:function(){var t=this.form.querySelectorAll(".form-group--label label");if(!t.length)return!1;function e(t){t.target.parentNode.classList.add("input--filled")}function n(t){""!==t.target.value.trim()||t.target.required||t.target.parentNode.classList.remove("input--filled")}t.forEach((function(t){var i=t.previousElementSibling,o=t.parentNode;""!==i.value.trim()&&o.classList.add(".input--filled"),i.addEventListener("focus",e),i.addEventListener("blur",n),t.addEventListener("click",(function(){i.focus()}))}))}},{key:"bindEvents",value:function(){var t=this;this.inputs.forEach((function(e){e.addEventListener("change",(function(){var n=$e()(t.form,t.constraints)||{};t.showErrorsForInput(e,n[e.name]),t._validate()})),e.addEventListener("keyup",(function(){var n=$e()(t.form,t.constraints)||{};t.showErrorsForInput(e,n[e.name]),t._validate()}))}))}},{key:"_validate",value:function(){var t=this,e=!0;this.inputs.forEach((function(n){var i=t.validateInput(n);void 0===i||i||(e=!1)})),this.BtnSubmit&&(e?this.BtnSubmit.classList.remove("is-disabled"):this.BtnSubmit.classList.add("is-disabled"))}},{key:"formError",value:function(){var t=this;this.inputs.forEach((function(e){e.addEventListener("change",(function(){var n=$e()(t.form,t.constraints)||{};t.showErrorsForInput(e,n[e.name]),t._validate()})),e.addEventListener("keyup",(function(){var n=$e()(t.form,t.constraints)||{};t.showErrorsForInput(e,n[e.name]),t._validate()}))}))}},{key:"validateInput",value:function(t){var e=t.closest(".form-group, .form-group--label");if(e)return!e.classList.contains("has-error")}},{key:"showErrorsForInput",value:function(t,e){var n=this,i=t.closest(".form-group, .form-group--label"),o=i.querySelector(".messages");this.resetFormGroup(i),e?(i.classList.add("has-error"),e.forEach((function(t){n.addError(o,t)}))):i.classList.add("has-success")}},{key:"resetFormGroup",value:function(t){t.classList.remove("has-error"),t.classList.remove("has-success");var e=t.querySelectorAll(".help-block.error");e.length&&e.forEach((function(t){t.parentNode.removeChild(t)}))}},{key:"addError",value:function(t,e){if(t){var n=document.createElement("p");n.classList.add("help-block"),n.classList.add("error"),n.innerText=e,t.appendChild(n)}}}],n&&Fe(e.prototype,n),i&&Fe(e,i),t}(),He=Ne;function Re(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ze=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elem=e.elem}var e,n,i;return e=t,(n=[{key:"init",value:function(){var t=this;setInterval((function(){t.elem.classList.toggle("is-animate")}),3e3)}}])&&Re(e.prototype,n),i&&Re(e,i),t}();function We(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ge=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.openClass="is-open",this.closeClass="is-close",this.isOpen=!1}var e,n,i;return e=t,(n=[{key:"init",value:function(t){var e=this;this.element=t.element||document.querySelector(".j-search-panel"),this.buttons=document.querySelectorAll(".j-search-open"),this.isOpen=this.element.classList.contains(this.openClass),this.input=this.element.querySelector(".form-search__input input"),this.closeBtn=this.element.querySelector(".j-search-close"),this.overlay=this.element.querySelector(".search-panel__overlay"),window.addEventListener("load",(function(){e.element.classList.remove("hide")})),this._bindContext(),this._bindEvents()}},{key:"_bindContext",value:function(){this._open=this._open.bind(this),this._close=this._close.bind(this),this._changeState=this._changeState.bind(this)}},{key:"_bindEvents",value:function(){var t=this;document.addEventListener("keyup",(function(e){t._closeByKeyboard(e)})),this.buttons.forEach((function(e){e.addEventListener("click",t._changeState)})),this.closeBtn.addEventListener("click",this._close),this.overlay.addEventListener("click",this._close)}},{key:"_closeByKeyboard",value:function(t){27===t.keyCode&&this.isOpen&&this._close()}},{key:"_changeState",value:function(){this.isOpen=!this.isOpen,this.isOpen?this._open():this._close()}},{key:"_open",value:function(){this.isOpen=!0,this.element.classList.add("is-open"),this.input.focus(),l.bodyFixed(this.element)}},{key:"_close",value:function(){this.isOpen&&(this.isOpen=!1,this.element.classList.remove("is-open"),l.bodyStatic())}}])&&We(e.prototype,n),i&&We(e,i),t}(),Ve=n(692);function Ue(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Ye=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$accord=Ve(e).find(".j-accordeon-item"),this.active="is-active"}var e,n,i;return e=t,(n=[{key:"init",value:function(){this.bindEvents()}},{key:"bindEvents",value:function(){var t=this;t.$accord.each((function(e,n){Ve(n).unbind("click").on("click",t.stateAcrd.bind(t))}))}},{key:"stateAcrd",value:function(t){var e=Ve(t.target),n="is-active",i=null;t.preventDefault(),t.stopPropagation();var o=(e.hasClass("j-accordeon-item"),i=e.closest(".j-accordeon-item-wrap")).siblings(".j-accordeon-content");i.toggleClass(n),i.hasClass(n)?o.slideDown(500):o.slideUp(500)}}])&&Ue(e.prototype,n),i&&Ue(e,i),t}();function Ke(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Xe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=e,this.getbrake=this.options.brake||1023,this.wrapper=this.options.elem||document.querySelector(".j-break"),this.brake=this.wrapper.dataset.brake||this.getbrake,this.parentOr=this.wrapper.querySelector(".j-break-original"),this.parent=this.wrapper.querySelector(".j-break-target"),this.item=this.wrapper.querySelector(".j-break-elem")}var e,n,i;return e=t,(n=[{key:"init",value:function(){this.events(),this.move()}},{key:"events",value:function(){var t=this;["resize","orientationchange"].forEach((function(e){window.addEventListener(e,t.move.bind(t))}))}},{key:"move",value:function(){var t=Math.max(document.documentElement.clientWidth,window.innerWidth||0);this.parentOr&&this.parent&&this.item&&(t<=this.brake?this.item.classList.contains("done")||(this.parent.insertBefore(this.item,this.parent.children[1]),this.item.classList.add("done")):this.item.classList.contains("done")&&(this.parentOr.insertBefore(this.item,this.parentOr.children[2]),this.item.classList.remove("done")))}}])&&Ke(e.prototype,n),i&&Ke(e,i),t}(),Je=Xe;function Qe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var tn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e.element,this.tabItems=this.element.querySelectorAll(".booking-form__tabs .tab__btn"),this.inputItems=this.element.querySelectorAll("[data-country-other], [data-country-rf")}var e,n,i;return e=t,(n=[{key:"init",value:function(){this._bindEvents()}},{key:"_bindEvents",value:function(){var t=this;this.tabItems.forEach((function(e){e.addEventListener("click",t._toggle.bind(t))}))}},{key:"_toggle",value:function(t){var e=t.target.parentNode.dataset.tab;this.inputItems.forEach((function(t){t.hasAttribute("data-".concat(e))?(t.removeAttribute("disabled"),t.parentNode.classList.remove("is-hidden")):(t.setAttribute("disabled","disabled"),t.parentNode.classList.add("is-hidden"))}))}}])&&Qe(e.prototype,n),i&&Qe(e,i),t}();function en(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var nn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.get=window.location.search,this.cookies=M.A,this.getObject={},this.utm=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],this.utmID=[["ym_uid","_ym_uid"],["ga_uid","_ga"],["roistat_visit","roistat_visit"]],this.utmCookieCount=0}var e,n,i;return e=t,i=[{key:"init",value:function(){(new t).init()}}],(n=[{key:"init",value:function(){this._searchStringToObject(),Object.keys(this.getObject).length&&this._addUtmToCookie(),this._checkCookie(),this.utmCookieCount>0&&this._addUtmValueToInputs(),this._addToInputsFromUtmID()}},{key:"_searchStringToObject",value:function(){if(-1!==this.get.indexOf("&")){var t=this.get.slice(1).split("&");this.getObject=t.reduce((function(t,e){return(e=e.split("="))[0].includes("utm")&&(t[e[0]]=e[1]),t}),{})}}},{key:"_addUtmToCookie",value:function(){for(var t in this.getObject){var e=this.getObject[t];this._setCookie(t,e)}}},{key:"_checkCookie",value:function(){var t=this;this.utm.forEach((function(e){t._getCookie(e)&&t.utmCookieCount++}))}},{key:"_addUtmValueToInputs",value:function(){var t=this;this.formElems=document.querySelectorAll("form"),0!==this.formElems.length&&this.formElems.forEach((function(e){t.utm.forEach((function(n){var i=e.querySelector('input[name="'.concat(n,'"]'));if(i){var o=t._getCookie(n);o&&(i.value=o)}}))}))}},{key:"_addToInputsFromUtmID",value:function(){var t=this;this.formElems=document.querySelectorAll("form"),0!==this.formElems.length&&this.formElems.forEach((function(e){t.utmID.forEach((function(n){var i=e.querySelector('input[name="'.concat(n[0],'"]'));if(i){var o=t._getCookie(n[1]);o&&(i.value=o)}}))}))}},{key:"_setCookie",value:function(t,e){this.cookies.set(t,e,{expires:+this.cookieDuration})}},{key:"_getCookie",value:function(t){return this.cookies.get(t)}}])&&en(e.prototype,n),i&&en(e,i),t}();function on(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var an=function(){return null},sn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.wrapper=e.elem,this.hash=e.hash||this.wrapper.hasAttribute("data-tabs-hash")||!1,this.tabsParent=this.wrapper.querySelector(e.tabsParent||"[data-tab-buttons]")||null,this.tabItem=e.tabItem||"[data-tab-opener]",this.tabs=Array.from(this.tabsParent.querySelectorAll(this.tabItem)),this.isType=e.type||this.wrapper.dataset.type,this.tabsAnim=this.wrapper.dataset.tabs||"bottom",this.contentItem="true"!==this.isType?e.contentItem||"[data-tab]":"[data-tab-type]",this.contentsParent=this.wrapper.querySelector(e.contentsParent||"[data-tab-contents]")||null,this.contents=!!this.contentsParent&&l.siblings(this.contentsParent.querySelector(this.contentItem)),this.dataTab={},this.onChangeCallback=e.onChangeCallback||an,this.activeClass="is-active"}var e,n,i;return e=t,i=[{key:"init",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll("[data-tabs]");e.length&&e.forEach((function(e){new t({elem:e}).init()}))}}],(n=[{key:"init",value:function(){0!==this.tabs.length&&(this._setInitialState(),this._bindEvents())}},{key:"_setInitialState",value:function(){var t=this.tabsParent.querySelector(".".concat(this.activeClass))||this.tabs[0];if(this.hash){var e=this._getHash();t=e&&this.wrapper.querySelector('[data-tab-opener="'.concat(e,'"]'))||t}this.isType&&(this.contents=!!this.contentsParent&&Array.from(this.contentsParent.querySelectorAll(".col"))),this.toggleTab(t)}},{key:"_getHash",value:function(){return window.location.hash.replace(RegExp("^#","u"),"")}},{key:"_bindEvents",value:function(){this.wrapper.addEventListener("click",this._onTabs.bind(this))}},{key:"_onTabs",value:function(t){var e=t.target;e.closest(this.tabItem)&&(t.preventDefault(),t.stopPropagation()),e&&e.closest(this.tabItem)&&this.toggleTab(e.closest(this.tabItem))}},{key:"toggleTab",value:function(t){this._setData(t),this._changeState(),this.onChangeCallback(this.dataTab),this.isType&&this._toggleTabType()}},{key:"_setData",value:function(t){this.dataTab={tab:t,id:t.dataset.tabOpener}}},{key:"_changeState",value:function(){var t=this,e=this.dataTab.id;this.tabs.forEach((function(n){n.classList.toggle(t.activeClass,n.dataset.tabOpener===e)})),this.contentsParent&&this.contents.forEach((function(n){n.dataset.tab===e&&("fade"===t.tabsAnim?S.os.fromTo(n,{autoAlpha:0},{position:"relative",autoAlpha:1,duration:.75,ease:"Power3.easeInOut"}):S.os.fromTo(n,{y:25,autoAlpha:0},{position:"relative",autoAlpha:1,duration:.75,y:0,ease:"Power3.easeInOut",clearProps:"transform"})),n.classList.contains(t.activeClass)&&S.os.to(n,{position:"absolute",duration:.35,autoAlpha:0,ease:"Power3.easeInOut"}),n.classList.toggle(t.activeClass,n.dataset.tab===e)}))}},{key:"_toggleTabType",value:function(){var t=this.dataTab.id;this.contents.forEach((function(e){e.dataset.tab===t||"all"===t?setTimeout((function(){e.style.display="block",e.style.opacity=1}),200):(e.style.opacity=0,setTimeout((function(){e.style.display="none"}),200))}))}}])&&on(e.prototype,n),i&&on(e,i),t}();function rn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ln=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.wrapper=e.element,this.isTextAccordion=this.wrapper.hasAttribute("data-accordion-text"),this.accordion=this.wrapper.querySelector("[data-accordion]"),(this.accordion||this.isTextAccordion)&&(this.accordions=this.isTextAccordion?[this.wrapper]:l.siblings(this.accordion),this.breakpoint=e.breakpoint||this.wrapper.dataset.breakpoint||1e4,this.title=this.wrapper.querySelector("[data-accordion-title]"),this.titleText=!!this.title&&this.title.innerHTML,this.changeTitle=this.wrapper.hasAttribute("data-title"),this.hiddenText=this.wrapper.dataset.title||"Скрыть",this.animating=!1,this.openClass="is-open",this.duration=.35)}var e,n,i;return e=t,i=[{key:"init",value:function(){var e=document.querySelectorAll("[data-accordions], [data-accordion-text]");e.length&&e.forEach((function(e){new t({element:e}).init()}))}}],(n=[{key:"init",value:function(){this._isBreakpoint()&&(this._setInitState(),this._bindEvents())}},{key:"_setInitState",value:function(){var t=this;this.accordions.forEach((function(e){e.classList.contains(t.openClass)&&t.open(e)}))}},{key:"_isBreakpoint",value:function(){return l.isBreakpoint(0,this.breakpoint)}},{key:"_bindEvents",value:function(){var t=this;this.accordions.forEach((function(e){e.querySelector("[data-accordion-opener]").addEventListener("click",t._onToggle.bind(t))}))}},{key:"_onToggle",value:function(t){if(!this.animating){var e=t.currentTarget,n=this.isTextAccordion?e.closest("[data-accordion-text]"):e.closest("[data-accordion]");n.classList.contains(this.openClass)?this.close(n):this.open(n);var i=l.siblings(n,!1);i.length&&this.closeOther(i)}}},{key:"open",value:function(t){var e=this,n=t.querySelector("[data-accordion-content]"),i=n.querySelector("[data-accordion-inner]"),o=n.querySelectorAll("[data-stagger]"),a=i.getBoundingClientRect().height;t.classList.add(this.openClass),S.os.fromTo(n,{height:0},{height:a,duration:this.duration+.5,ease:"power3.inOut",onStart:function(){e.animating=!0},onComplete:function(){n.style.height="auto",n.style.overflow="visible",e.changeTitle&&e.titleText&&(l.clearHtml(e.title),l.insetContent(e.title,e.hiddenText)),e.animating=!1}}),S.os.fromTo(o,{alpha:0,y:"30"},{alpha:1,y:"0",duration:.5,stagger:.075})}},{key:"close",value:function(t){var e=this,n=t.querySelector("[data-accordion-content]"),i=n.querySelector("[data-accordion-inner]").getBoundingClientRect().height;t.classList.remove(this.openClass),S.os.fromTo(n,{height:i},{height:0,duration:this.duration,onStar:function(){e.animating=!0,n.style.height="auto",n.style.overflow="hidden"},onComplete:function(){e.animating=!1,e.changeTitle&&e.titleText&&(l.clearHtml(e.title),l.insetContent(e.title,e.titleText))}})}},{key:"closeOther",value:function(t){var e=this;t.forEach((function(t){var n;t.classList.contains(e.openClass)&&"false"!==(null===(n=t.dataset)||void 0===n?void 0:n.close)&&e.close(t)}))}}])&&rn(e.prototype,n),i&&rn(e,i),t}(),cn=n(692);function un(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var hn=function(){function t(e){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.form=e,this.form&&(this.formValidate="false"!==(null===(n=this.form.dataset)||void 0===n?void 0:n.validate),this.constraints=null,this.inputs=this.form.querySelectorAll("input, textarea"),this.BtnSubmit=this.form.querySelector("button"),this.inputs=Array.from(this.inputs).filter((function(t){return"hidden"!==t.type&&""!==t.getAttribute("notvalidate")})))}var e,n,i;return e=t,n=[{key:"init",value:function(){this.initPhoneMask(),this.inputFocus(),this.formValidate&&(this.setOptions(),this.bindEvents())}},{key:"initPhoneMask",value:function(){cn(this.form).find("input[type=tel]").mask("+7(A00)000-00-00",{translation:{A:{pattern:/[0-69]/}}})}},{key:"checkRequiredEmail",value:function(){var t=!1;return this.inputs.forEach((function(e){"email"===e.type&&e.required&&(t=!0)})),t?{message:"^Поле обязятельно для заполнения"}:null}},{key:"setOptions",value:function(){var t={message:"^Поле обязятельно для заполнения"};this.constraints={email:{presence:this.checkRequiredEmail(),email:{message:"^Введите корректный e-mail"}},phone:{presence:t,length:{minimum:16,message:"^Неправильный формат телефона"}},message:{length:{minimum:5,message:"^Минимум 5 символов"}},name:{presence:t,length:{minimum:2,maximum:20,message:"^Минимум 2 символа"},format:{pattern:/^[a-zA-Zа-яёА-ЯЁs\s]+$/i,message:"^Имя может содержать только буквы"}},agreement:{presence:{message:"^Для продолжения необходимо согласие с условиями"},inclusion:{within:[!0],message:"^Для продолжения необходимо согласие с условиями"}}}}},{key:"inputFocus",value:function(){var t=document.querySelectorAll(".form-input__label, .form-textarea__label");function e(t){var e=t.target.parentNode;e.classList.add("is-focused"),e.classList.add("is-filled")}function n(t){var e=t.target.parentNode,n=t.target;e.classList.remove("is-focused"),""===n.value.trim()&&e.classList.remove("is-filled")}t.length&&t.forEach((function(t){var i=t.previousElementSibling,o=t.parentNode;i.value&&""!==i.value.trim()&&o.classList.add(".is-filled"),i.addEventListener("focus",e),i.addEventListener("blur",n)}))}},{key:"bindEvents",value:function(){var t=this;this.inputs.forEach((function(e){e.addEventListener("change",(function(){var n=$e()(t.form,t.constraints)||{};t.showErrorsForInput(e,n[e.name]),t._validate()})),e.addEventListener("keyup",(function(){var n=$e()(t.form,t.constraints)||{};""!==e.value.trim()&&(t.showErrorsForInput(e,n[e.name]),t._validate())}))}))}},{key:"_validate",value:function(){var t=this,e=!0;this.inputs.forEach((function(n){var i=t.validateInput(n);void 0===i||i.result||(e=!1)})),this.BtnSubmit&&e&&this.BtnSubmit.classList.remove("is-disabled")}},{key:"validateInput",value:function(t){var e=t.closest(".form-input");if(e||(e=t.closest(".form-policy")),e)return e.classList.contains("has-error")?{result:!1}:{result:!0}}},{key:"showErrorsForInput",value:function(t,e){var n=this,i=t.closest(".form-input");if(i||(i=t.closest(".form-policy")),i){var o=i.querySelector(".form-input__messages")||i.querySelector(".messages");this.resetFormGroup(i),e?(i.classList.add("has-error"),e.forEach((function(t){n.addError(o,t)})),this.BtnSubmit.classList.add("is-disabled")):i.classList.add("has-success")}}},{key:"resetFormGroup",value:function(t){t.classList.remove("has-error"),t.classList.remove("has-success");var e=t.querySelectorAll(".help-block.error");e.length&&e.forEach((function(t){t.parentNode.removeChild(t)}))}},{key:"addError",value:function(t,e){var n=document.createElement("p");n.classList.add("help-block"),n.classList.add("error"),n.innerText=e,t.appendChild(n)}}],i=[{key:"init",value:function(){var e=document.querySelectorAll("[data-validate]");e.length&&e.forEach((function(e){new t(e).init()}))}}],n&&un(e.prototype,n),i&&un(e,i),t}();function dn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var fn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"ru",value:function(){return{errorLoading:function(){return"Результат не может быть загружен."},inputTooLong:function(t){var e=t.input.length-t.maximum,n="Пожалуйста, удалите "+e+" символ";return e>=2&&e<=4?n+="а":e>=5&&(n+="ов"),n},inputTooShort:function(t){return"Пожалуйста, введите "+(t.minimum-t.input.length)+" или более символов"},loadingMore:function(){return"Загружаем ещё ресурсы…"},maximumSelected:function(t){var e="Вы можете выбрать "+t.maximum+" элемент";return t.maximum>=2&&t.maximum<=4?e+="а":t.maximum>=5&&(e+="ов"),e},noResults:function(){return"Ничего не найдено"},searching:function(){return"Поиск…"},removeAllItems:function(){return"Удалить все елементы"}}}}],(n=null)&&dn(e.prototype,n),i&&dn(e,i),t}(),pn=(n(458),n(692));function mn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var vn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$element=pn(e.element),this.element=e.element,this.isSingle=this.$element.hasClass("j-select-2-single-2"),this.isMultiple=this.$element.hasClass("j-select-2-multiple-2"),this.right=this.$element.hasClass("select-right"),this.data=this.$element.data("json")}var e,n,i;return e=t,n=[{key:"init",value:function(){this.options={minimumResultsForSearch:1/0,dropdownCssClass:":all:",templateResult:this._formatState,cashe:!0,width:"auto",multiple:this.isMultiple,closeOnSelect:!this.isMultiple,allowClear:!1,dropdownAutoWidth:!0,dropdownParent:this.$element.parent(),language:fn.ru(),data:this.data?this.data:null,escapeMarkup:function(t){return t}},this.$element.select2(this.options),this._bindEvents(),this.getNumberSelection(),this.setPlaceholder()}},{key:"_bindEvents",value:function(){this.$element.on("select2:open",this._onOpen.bind(this)),this.$element.on("select2:selecting",this._onSelecting.bind(this)),this.$element.on("select2:select",this._onSelect.bind(this)),this.$element.on("select2:unselect",this._onUnSelect.bind(this)),this.$element.on("select2:close",this._onClose.bind(this))}},{key:"_formatState",value:function(t){if(!t.id)return t.text;var e=t.status?'<span class="select2-item-state">'.concat(t.status,"</span>"):"";return pn('<div class="select2-item">\n            <span class="select2-item-text"> '.concat(t.text," </span>\n            ").concat(e,"\n            </div>"))}},{key:"_onOpen",value:function(){}},{key:"_onSelecting",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$element.find('option[value="all"]').prop("selected",e)}},{key:"_onSelect",value:function(t){this.getNumberSelection(),this.checkOptions();var e=t.params.data;this.checkOptions(e);var n="";void 0!==e.$element&&(n=e.$element.dataset.link),void 0!==n&&""!==n&&(document.location.href=n)}},{key:"_onUnSelect",value:function(){this.checkOptions(),this.getNumberSelection()}},{key:"_onClose",value:function(){this.getNumberSelection()}},{key:"getNumberSelection",value:function(){var t=this.$element.select2("data").length;0===t&&this.setPlaceholder(),t<3||this.$element.next("span.select2").find("ul").html('<li class="select2-selection__choice__display">Выбрано: '.concat(t,"</li>"))}},{key:"setPlaceholder",value:function(){var t=this.$element.data("placeholder"),e=this.isMultiple?this.$element.next("span.select2").find("ul"):this.$element.next("span.select2").find(".select2-selection__rendered"),n=this.$element.find("option:selected"),i=this.$element.find('option[value="all"]:selected');1!==i.length&&""!==t&&t&&e.html("".concat(t)),i.length||n.length||(this._onSelecting(this,!0),e.html("<li>".concat(t,"</li>")))}},{key:"checkOptions",value:function(t){var e=this.element.querySelectorAll("option"),n=[];if(t&&"all"===t.element.getAttribute("value"))return this.getValue("all"),void this.$element.select2("close");e.forEach((function(t){t.selected&&("all"===t.getAttribute("value")&&(t.selected=!1),n.push(t))})),0===n.length&&(this.getValue("all"),this.$element.select2("close"))}},{key:"destroy",value:function(){this.$element.select2("destroy")}},{key:"disable",value:function(){this.$element.prop("disabled",!0)}},{key:"clearingfilter",value:function(){this.$element.val(null).trigger("change")}},{key:"getValue",value:function(t){this.$element.val(t).trigger("change")}},{key:"checkInit",value:function(){return this.$element.hasClass("select2-hidden-accessible")}}],i=[{key:"init",value:function(){var e=document.querySelectorAll(".j-select-2");e.length&&e.forEach((function(e){new t({element:e}).init()}))}}],n&&mn(e.prototype,n),i&&mn(e,i),t}(),yn=(n(822),n(692));function bn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var gn=new b,kn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rangeSlider={}}var e,n,i;return e=t,n=[{key:"initRange",value:function(t){this.$wrapper=yn(t.element),this.outerOptions=t.outerOptions||this.$wrapper.find(".j-form-range-base").data(),this._setOptions(),this._initRangeSlider(),this._getElements(),this._bindEvents(),this._subscribes(),this._initDigit()}},{key:"_setOptions",value:function(){var t=this;this.options={skin:"round",type:this.outerOptions.type,min:this.outerOptions.min,max:this.outerOptions.max,from:this.outerOptions.from,to:this.outerOptions.to,step:this.outerOptions.step,min_interval:this.outerOptions.step,digit:this.outerOptions.digit||!1,disable:this.outerOptions.disable||!1,validate:this.outerOptions.validate,hide_from_to:!0,hide_min_max:!0,prettify_enabled:!0,onStart:function(e){gn.publish("rangesliderStart",e,t)},onChange:function(e){t._updateInputs(e),gn.publish("rangesliderChange",e)},onFinish:function(t){gn.publish("rangesliderFinish",t)}},this.startOptions=this.options,this.isNumberShort="number_short"===this.options.validate}},{key:"_initRangeSlider",value:function(){this.$rangeSlider=this.$wrapper.find(".j-form-range-base"),this.$rangeSlider.ionRangeSlider(this.options)}},{key:"_getElements",value:function(){this.$inputs=this.$wrapper.find(".form-range__input"),this.$inputFrom=this.$inputs.first(),this.$inputTo="double"===this.options.type?this.$inputs.last():null,this.slider=this.$rangeSlider.data("ionRangeSlider"),this.id=this.slider.input.id,this.rangeSlider[this.id]=this.slider,this.$inputOutMin=this.$wrapper.find(".j-form-range-output-min"),this.$inputOutMax=this.$wrapper.find(".j-form-range-output-max")}},{key:"_subscribes",value:function(){gn.subscribe("resetFilter",this._reset.bind(this))}},{key:"_bindEvents",value:function(){var t=this;this.$inputFrom.on("change",this._onInputFromChange.bind(this)),"double"===this.options.type&&this.$inputTo.on("change",this._onInputToChange.bind(this)),this.$inputs.each((function(e,n){if(t.isNumberShort){var i=yn(n),o=i.val();i.val(t._getNumberDecimal(o))}n.addEventListener("input",(function(e){var n=yn(e.target),i=n.val();t._validate(n),t._setDigit(n,i)}))}))}},{key:"_onInputFromChange",value:function(t){var e=t.target.name.slice(0,-5),n=this._getNumber(yn(t.target).val()),i=this.slider.result.to,o="number_decimal"===this.options.validate?1:0,a="number"===this.options.validate,s="single"===this.options.type?0:this.options.step;a||(n=this._getNumberThousands(n)),n<this.options.min?n=this.options.min:n>i&&(n=i-s),n=n.toFixed(o),yn(t.target).val(a?n:this._getNumberDecimal(n)),this._getOutputInputs("".concat(e,"-from"),n),this._setDigit(yn(t.target),n),this._update({from:n})}},{key:"_onInputToChange",value:function(t){var e=t.target.name.slice(0,-5),n=this._getNumber(yn(t.target).val()),i=this.slider.result.from,o="number_decimal"===this.options.validate?1:0,a="number"===this.options.validate;a||(n=this._getNumberThousands(n)),n<=i?n=i+this.options.step:n>this.options.max&&(n=this.options.max),n=n.toFixed(o),yn(t.target).val(a?n:this._getNumberDecimal(n)),this._getOutputInputs("".concat(e,"-to"),n),this._setDigit(yn(t.target),n),this._update({to:n})}},{key:"_validate",value:function(t){var e=this.options.validate;if(e)switch(e){case"number":this._validateNumber(t);break;case"number_decimal":this._validateNumberDecimal(t)}}},{key:"_validateNumber",value:function(t){var e=t.val();e=e.replace(/\s/g,""),t.val(/\d*/.exec(e))}},{key:"_validateNumberDecimal",value:function(t){var e=t.val();t.val(/\d*\.?\d?/g.exec(e))}},{key:"_getNumberDecimal",value:function(t){return(t/1e6).toFixed(1)}},{key:"_getNumberThousands",value:function(t){return 1e6*t}},{key:"_update",value:function(t){this.slider.update(t)}},{key:"_updateInputs",value:function(t){var e=this.$rangeSlider[0].id;this.$inputFrom.val(this.isNumberShort?this._getNumberDecimal(t.from):t.from),"price"===e&&this._getOutputInputs("".concat(e,"-from"),this._getNumber(t.from_pretty)),this._setDigit(this.$inputFrom,t.from),"double"===this.options.type&&(this.$inputTo.val(this.isNumberShort?this._getNumberDecimal(t.to):t.to),"price"===e&&this._getOutputInputs("".concat(e,"-to"),this._getNumber(t.to_pretty)),this._setDigit(this.$inputTo,t.to))}},{key:"_reset",value:function(){this.slider.input.classList.contains("is-not-search")||("double"===this.options.type?(this.startOptions.from=this.startOptions.min,this.startOptions.to=this.startOptions.max,this.$inputFrom[0].setAttribute("value",this.startOptions.from),this.$inputTo[0].setAttribute("value",this.startOptions.to),this.$inputFrom.val(this.startOptions.from),this.$inputTo.val(this.startOptions.to)):(this.startOptions.from=this.startOptions.max,this.$inputFrom[0].setAttribute("value",this.startOptions.max),this.$inputFrom.val(this.startOptions.max)),this.slider.update(this.startOptions),this._updateInputs(this.startOptions))}},{key:"_initDigit",value:function(){var t=this;this.$inputs.each((function(e,n){t.options.digit&&t._setDigit(yn(n))}))}},{key:"_setDigit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.options.digit){var n=e||t.val(),i=this._getNumber(n);t.val(l.convertToDigit(i))}}},{key:"_getNumber",value:function(t){return t?l.convertToNumber(t):0}},{key:"_getOutputInputs",value:function(t,e){"price-from"===t&&this.$inputOutMin.val(e),"price-to"===t&&this.$inputOutMax.val(e)}}],i=[{key:"init",value:function(){var e=document.querySelectorAll(".form-range:not(.form-range--mortgage)");e&&e.forEach((function(e){(new t).initRange({element:e})}))}}],n&&bn(e.prototype,n),i&&bn(e,i),t}();function _n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var wn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.wrapper=e.element,this.trigger=this.wrapper.querySelectorAll("[data-gallery-zoom-trigger]"),this.items=Array.from(this.wrapper.querySelectorAll("[data-gallery-zoom-item]")),this.isMultyple=this.items.length>1,this.inlineGallery=null}var e,n,i;return e=t,i=[{key:"init",value:function(){window.GalleryZoom={},window.GalleryZoom.update=function(){var e=document.querySelectorAll("[data-gallery-zoom]");e.length&&e.forEach((function(e){e.classList.contains("_inited")||new t({element:e}).init()}))},window.GalleryZoom.update()}}],(n=[{key:"init",value:function(){this.trigger&&this.items&&(this._initGallery(),this._bindEvents())}},{key:"_bindEvents",value:function(){var t=this;this.trigger.forEach((function(e){e.addEventListener("click",(function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),t._open()}))}))}},{key:"_open",value:function(){var t=this._getIndex();this.inlineGallery.openGallery(t)}},{key:"_initGallery",value:function(){var t={plugins:[Ct.A,St.A],selector:"[data-gallery-zoom-item]",licenseKey:"1111-1111-1111-1111",getCaptionFromTitleOrAlt:!1,zoomFromOrigin:!1,download:!1,hideScrollbar:!0,mobileSettings:{controls:!0,showCloseIcon:!0,download:!1},youTubePlayerParams:{modestbranding:1,showinfo:0,rel:0}};this.inlineGallery=(0,wt.A)(this.wrapper,t),this.wrapper.classList.add("_inited")}},{key:"_getIndex",value:function(){var t=0;if(this.isMultyple){var e=this.wrapper.querySelector(".tab-content__item.is-active");e&&(t=l.getElementIndex(e))}return t}}])&&_n(e.prototype,n),i&&_n(e,i),t}();function Cn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Sn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var En=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,n=[{key:"init",value:function(t){this.options={},this.options.targets=t.targets,this.options.autoload=!1!==t.autoload,this.options.quality=t.quality||1.5,this.options.orientation=t.orientation||"portrait",this.options.pageBreak=t.pageBreak||".pdf__page-break",this.scriptInit=!1,this._bindEvents()}},{key:"_bindEvents",value:function(){var t=this;this.options.targets.forEach((function(e){e.addEventListener("click",t._start.bind(t))}))}},{key:"_start",value:function(t){this._collectData(t),this._startPreloader(),this._getScript()}},{key:"_getScript",value:function(){var t=this;this.scriptInit?t._getHtml():l.addScript("https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js",{onload:function(){this.scriptInit=!0,t._getHtml()}})}},{key:"_collectData",value:function(t){this.currentTarget=t.currentTarget;var e=["ajax","element","file"];for(var n in this.dataset=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){Sn(t,e,n[e])}))}return t}({},this.currentTarget.dataset),this.currentTarget.hasAttribute("data-autoload")&&(this.options.autoload=!0),this.formData=new FormData,this.dataset)e.indexOf(n)<0&&this.formData.set(n,this.dataset[n])}},{key:"_getHtml",value:function(){if(this.dataset.element)return this.html=document.querySelector("".concat(this.dataset.element)).innerHTML,this._createContainer(),this._openPdf(),void this._stopPreloader();if(this.dataset.ajax){var t=this;l.send(this.formData,this.dataset.ajax,{success:function(e){t.html=e.html,t._createContainer(),t._openPdf(),t._stopPreloader()},error:function(t){console.error("Ошибка при получении данных для pdf - ".concat(t))},complete:function(){}})}}},{key:"_createContainer",value:function(){this.pdfContainer=document.createElement("div"),this.pdfContainer.innerHTML=this.html}},{key:"_openPdf",value:function(){var t=this,e={filename:this.dataset.file||"flat-pdf.pdf",html2canvas:{dpi:192,scale:this.options.quality,letterRendering:!0},jsPDF:{unit:"mm",format:"a4",orientation:this.options.orientation,compress:!0},pagebreak:{after:this.options.pageBreak}};return new Promise((function(n){t.options.autoload?html2pdf().set(e).from(t.pdfContainer).save().then((function(){n()})):html2pdf().set(e).from(t.pdfContainer).toPdf().get("pdf").then((function(t){window.open(t.output("bloburl"),"_blank"),n()}))}))}},{key:"_startPreloader",value:function(){this.currentTarget.classList.add("is-loading")}},{key:"_stopPreloader",value:function(){this.currentTarget.classList.remove("is-loading")}}],i=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,n=Array.from(e.querySelectorAll(".j-html2pdf"));n.length&&(new t).init({targets:n,autoload:!1})}}],n&&Cn(e.prototype,n),i&&Cn(e,i),t}();function Ln(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var On=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elem=e,this.openClass="is-open"}var e,n,i;return e=t,i=[{key:"init",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:document).querySelectorAll(".j-share");e.length&&e.forEach((function(e){new t(e)._init()}))}}],(n=[{key:"_init",value:function(){this.elem&&(this._initElements(),this._bindEvents())}},{key:"_initElements",value:function(){this.button=this.elem.querySelector(".j-share-button"),this.tooltipClose=this.elem.querySelector(".j-share-close"),this.copyUrl=this.elem.querySelector(".j-share-url"),this.copyUrlText=this.copyUrl.querySelector(".j-share-url-text")}},{key:"_bindEvents",value:function(){var t=this;this.button.addEventListener("click",this._toggleOpen.bind(this)),this.tooltipClose.addEventListener("click",this._toggleOpen.bind(this)),this.copyUrl.addEventListener("click",(function(e){e.preventDefault(),t._copyUrl()})),l.clickOutside([".j-share"],this._close.bind(this),null,!0)}},{key:"_toggleOpen",value:function(){this.elem.classList.toggle(this.openClass),this._changeCopyText()}},{key:"_close",value:function(){this.elem.classList.contains(this.openClass)&&(this.elem.classList.remove(this.openClass),this._changeCopyText())}},{key:"_copyUrl",value:function(){var t=document.createElement("input");t.value=window.location.href,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this._changeCopyText(!0)}},{key:"_changeCopyText",value:function(t){this.copyUrlText.innerHTML=t?"Ссылка скопирована":"Скопировать ссылку"}}])&&Ln(e.prototype,n),i&&Ln(e,i),t}();function xn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}S.os.registerPlugin(E.u);var Tn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.filtresWrapper=e,this.filtresResults=document.querySelector(".realty-catalog"),this.filtresMobile=document.querySelector(".realty-catalog__mobile"),this.toggleButtons=document.querySelectorAll(".realty-filtres__mobile-button-toggle, .realty-catalog__mobile-button-toggle"),this.filtresMobileCloseButton=this.filtresWrapper.querySelector(".realty-filtres__mobile-close"),this.html=document.querySelector("html"),this.desktopBreakpoint=768}var e,n,i;return e=t,(n=[{key:"init",value:function(){this.filtresMobile&&window.innerWidth<this.desktopBreakpoint&&(this._buttonFixed(),this._bindEvents())}},{key:"_bindEvents",value:function(){var t=this;this.toggleButtons.forEach((function(e){e.addEventListener("click",t._openFilter.bind(t))})),this.filtresMobileCloseButton&&this.filtresMobileCloseButton.addEventListener("click",this._closeFilter.bind(this))}},{key:"_buttonFixed",value:function(){var t=this;this.filtresResults&&E.u.create({trigger:this.filtresResults,start:"300px 50%",end:"bottom 50%",onEnter:function(){return t._showButton()},onEnterBack:function(){return t._showButton()},onLeave:function(){return t._hideButton()},onLeaveBack:function(){return t._hideButton()}})}},{key:"_openFilter",value:function(){this.html.classList.add("_realty-filtres-open")}},{key:"_closeFilter",value:function(){this.html.classList.remove("_realty-filtres-open")}},{key:"_hideButton",value:function(){this.filtresMobile.classList.remove("is-active")}},{key:"_showButton",value:function(){this.filtresMobile.classList.add("is-active")}}])&&xn(e.prototype,n),i&&xn(e,i),t}(),jn=n(692);function An(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Pn=new b,Mn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e.element}var e,n,i;return e=t,(n=[{key:"init",value:function(){this.trigger=this.element.querySelector(".realty-filtres__controls-button-reset"),this.trigger&&(this.selectAll=this.element.querySelectorAll(".j-select"),this.checkboxAll=this.element.querySelectorAll('input[type="checkbox"]'),this._bindEvents())}},{key:"_bindEvents",value:function(){this.trigger.addEventListener("click",this._resetElems.bind(this))}},{key:"_resetElems",value:function(){Pn.publish("resetFilter",this.element),this.checkboxAll&&this.checkboxAll.forEach((function(t){t.checked=!1})),this.selectAll&&this.selectAll.forEach((function(t){var e=t.querySelector("option").value;jn(t).val(e).trigger("change.select2")}))}}])&&An(e.prototype,n),i&&An(e,i),t}();function In(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var qn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.elem=document.querySelector(".realty-space-interactive__inner")}var e,n,i;return e=t,(n=[{key:"init",value:function(){this.elem&&(this._setElems(),this._bindEvents())}},{key:"_setElems",value:function(){this.zoomBtn=this.elem.querySelector(".realty-space-interactive__zoom-btn"),this.overlay=this.elem.querySelector(".realty-space-interactive__overlay")}},{key:"_bindEvents",value:function(){var t=this;this.zoomBtn&&this.overlay&&[this.zoomBtn,this.overlay].forEach((function(e){e.addEventListener("click",(function(){t.elem.classList.toggle("_fullscreen")}))}))}}])&&In(e.prototype,n),i&&In(e,i),t}();function Bn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var $n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,i;return e=t,i=[{key:"init",value:function(){(new t).init()}}],(n=[{key:"init",value:function(){this._resetFilter(),this._intRealtySpaceInteractive()}},{key:"_initFiltresMobile",value:function(){var t=document.querySelector(".realty-filtres__wrapper");t&&new Tn(t).init()}},{key:"_resetFilter",value:function(){var t=document.querySelectorAll(".realty-filtres__form");t.length&&t.forEach((function(t){new Mn({element:t}).init()}))}},{key:"_initSliders",value:function(){(new SliderCompare).init(),(new RealtySpaceFinishSlider).init()}},{key:"_intRealtySpaceInteractive",value:function(){(new qn).init()}}])&&Bn(e.prototype,n),i&&Bn(e,i),t}(),zn=n(692);function Fn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var Dn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storage={}}var e,n,i;return e=t,(n=[{key:"isExist",value:function(t){return null!==t&&!isNaN(+t)&&void 0!==t}},{key:"accessStorage",value:function(t,e){return this.isExist(e)?this.storage[t]=e:parseInt(this.storage[t])||this.storage[t]}},{key:"getObjectData",value:function(t){return{key:zn(t.$input).attr("name"),data:t.from}}},{key:"calc",value:function(t,e,n){switch(t){case"creditAmount":return e-n;case"creditAmountPretty":return(e-n).toLocaleString("ru-Ru")+" ₽";case"creditPercent":return parseInt((n/e*100).toFixed());case"creditPercentPretty":return(n/e*100).toFixed()+"%";case"monthlyPaymentPretty":return parseInt(e.toFixed()).toLocaleString("ru-Ru")+" ₽ <span> /мес.</span>";case"monthlyPaymentPretty2":return parseInt(e.toFixed()).toLocaleString("ru-Ru")+" ₽";case"monthlyPaymentPrettyTranche":return"".concat(parseInt(e.toFixed()).toLocaleString("ru-Ru")," ₽ ").concat(this.createDelimiter()," ").concat(parseInt(n.toFixed()).toLocaleString("ru-Ru")," ₽ <span> /мес.</span>")}}},{key:"calcCredit",value:function(){var t=this.accessStorage("price[min]",null),e=this.accessStorage("first-pay[min]",null),n=this.calc("creditPercentPretty",t,e),i=this.accessStorage("limitation[min]",null),o=this.calc("creditAmount",t,e)>=0?this.calc("creditAmountPretty",t,e):"—";return this.accessStorage("creditAmount",this.calc("creditAmount",t,e)),this.accessStorage("creditPercent",this.calc("creditPercent",t,e)),{amount:o,percent:n,period:i}}},{key:"decodePostfix",value:function(t){return[1,21,31].includes(t)?"годa":"лет"}},{key:"use$Value",value:function(t,e){return void 0===e?zn(t).val():zn(t).val(e)}},{key:"checkInputedData",value:function(t,e,n){var i=+zn(t).val().replace(n,"");e.from=i<e.min?e.min:i>e.max?e.max:i}},{key:"preventNaNSymbolsEnter",value:function(t){![8,9,13,17,18,35,36,37,39,46].includes(t.which)&&(t.which>57||t.which<48)&&(t.which>105||t.which<96)&&(t.which>123||t.which<112)&&t.preventDefault()}},{key:"onKeyDownEvent",value:function(t,e,n,i,o){switch(t.which){case 13:this.checkInputedData(i,e,o),zn(i).trigger("blur");break;case 27:zn(i).trigger("blur")}}},{key:"getReplaceDotToNumber",value:function(t){return Number(t.replace(/,/g,"."))}},{key:"createDelimiter",value:function(){return'<span class="mortgage-bank__delimiter">/</span>'}},{key:"createRate",value:function(t){return"\n        ".concat(1===t.length?"".concat(t,"%"):"\n            ".concat(t[0],"%\n            ").concat(this.createDelimiter(),"\n            ").concat(t[1],"%\n        "),"\n        ")}}])&&Fn(e.prototype,n),i&&Fn(e,i),t}(),Nn=n(692);function Hn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Rn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zn(t){return function(t){if(Array.isArray(t))return Hn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Hn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}S.os.registerPlugin(E.u);var Wn=new b,Gn=new Dn,Vn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ranges={},this.minPercent=0,this.maxPercent=90}var e,n,i;return e=t,n=[{key:"init",value:function(t){this._getElements(t),this._createRateValues(),this._getMinFirstPercent(),this._subscribes(),this._initCalcSliders(),this._bindEvents()}},{key:"_getElements",value:function(t){this.wrap=t,this.$wrap=Nn(t),this.$sliders=this.$wrap.find(".form-range--mortgage"),this.$banksItems=this.$wrap.find(".mortgage-result__item"),this.banksArray=this.$banksItems.toArray(),this.$creditPercent=this.$wrap.find(".mortgage-filter__percent"),this.$orderCount=this.$wrap.find(".j-mortgage-orders-count"),this.$emptyResult=this.$wrap.find(".mortgage__no-result"),this.classes={active:"is-active",disabled:"is-disabled",hidden:"is-hidden",loadmore:"is-loadmore"},this.flatPriceWrap=Nn(document).find(".flat__prices-mortgage"),this.flatPrice=this.flatPriceWrap.find(".j-flat__price"),this.$select=this.$wrap.find(".j-mortgage-programs"),this.$selectProject=this.$wrap.find(".j-mortgage-project"),this.$resultList=this.$wrap.find(".mortgage-result__list"),this.trancheCheckbox=this.wrap.querySelector(".mortgage-filtres__checks-tranche input"),this.isTrancheEnabled=!1,this.durationAnim=400}},{key:"_initCalcSliders",value:function(){var e=Array.from(this.$sliders);this._getRangeSliders(),e.forEach((function(e,n){t.initSlider(e,n)}))}},{key:"_getRangeSliders",value:function(){var t=this;Array.from(this.wrap.querySelectorAll(".j-form-range-base")).forEach((function(e){t.ranges[e.id]=e}))}},{key:"_bindEvents",value:function(){this._onSelectChange(),this._selectProject(),this._backToFilter(),this.trancheCheckbox&&this.trancheCheckbox.addEventListener("change",this._onChangeTranche.bind(this)),this.banksArray.forEach((function(t){var e=t.querySelector(".mortgage-bank__payment__icon");e&&e.addEventListener("click",(function(t){t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()}))}))}},{key:"_selectProject",value:function(){this.$selectProject&&(this._onSelectProjectChange(),this._onChangeSelect(),this.update())}},{key:"_getProjectName",value:function(){return this.$selectProject.length?this.$selectProject.select2("data")[0].id:"all"}},{key:"_getProgramName",value:function(){return this.$select?this.$select.select2("data")[0].id:"all"}},{key:"_onSelectProjectChange",value:function(){var t=this;this.$selectProject&&this.$selectProject.on("change",(function(){t._onChangeSelect(),t.update()}))}},{key:"_onChangeTranche",value:function(){this.trancheCheckbox.checked?this.isTrancheEnabled=!0:this.isTrancheEnabled=!1,this.update()}},{key:"_onSelectChange",value:function(){var t=this;this.$select.length&&this.$select.on("change",(function(){t._onChangeSelect(),t._recalculateFirstPayment(),t.update()}))}},{key:"_subscribes",value:function(){var t=this;Wn.subscribe("rangesliderStart",(function(e,n){t._isMineSlider(n)&&(e.$input=e.input.closest(".form-range").find(".form-range__input"),e.$postfix=e.input.closest(".form-range").find(".range-slider__input-right"),e.$rangeSlider=n,t.updateSlidersValues(e,null),t.manualInput(e,t),t.update())})),Wn.subscribe("rangesliderChange",(function(e){if(t._isMineSlider(e.$rangeSlider)){var n=e.input[0].id,i="price"===n;"price"===n&&t._recalculateFirstPayment(),t.updateSlidersValues(e,"set",i)}})),Wn.subscribe("rangesliderFinish",(function(e){t._isMineSlider(e.$rangeSlider)&&(t.setCredit(),t.update())}))}},{key:"_isMineSlider",value:function(t){var e=t.$rangeSlider[0].id;return this.ranges[e]===t.$rangeSlider[0]}},{key:"_getMinFirstPercent",value:function(){var t,e=this,n=[];this.banksArray.filter((function(t){return!t.classList.contains(e.classes.hidden)})).forEach((function(t){var e=Gn.getReplaceDotToNumber(t.dataset.firstpayment);n.push(e)})),this.minPercent=(t=Math).min.apply(t,Zn(n))}},{key:"updateSlidersValues",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.updateData(e,n),t.setInput(e.from,e),i||this.setCredit()}},{key:"updateData",value:function(t,e){var n=Gn.getObjectData(t).key;Gn.isExist(Gn.accessStorage(n,null))&&"set"!==e?t.from=Gn.accessStorage(n,null):(t.from=parseInt(t.from),Gn.accessStorage(n,t.from))}},{key:"setCredit",value:function(){this.$creditPercent.text(Gn.calcCredit().percent)}},{key:"manualInput",value:function(t,e){this.chooseInputInteraction(t,e,"focus"),this.chooseInputInteraction(t,e,"blur"),this.chooseInputInteraction(t,e,"keyup"),this.chooseInputInteraction(t,e,"keydown")}},{key:"chooseInputInteraction",value:function(e,n,i){var o=/[^0-9.]/g,a=this;e.$input.on(i,(function(s){switch(i){case"focus":Gn.use$Value(this,"");break;case"blur":""===Gn.use$Value(this)?t.setInput(e.from,e):(Gn.checkInputedData(this,e,o),"price"===e.$rangeSlider.slider.input.id?(a.updateSlidersValues(e,"set",!0),a._recalculateFirstPayment()):a.updateSlidersValues(e,"set"),e.$rangeSlider.slider.update(),a.setCredit(),a.update());break;case"keyup":Gn.use$Value(this)&&t.setInput(+Gn.use$Value(this).replace(o,""),e);break;case"keydown":Gn.preventNaNSymbolsEnter(s),Gn.onKeyDownEvent(s,e,n,this,o);break;default:console.error("Wrong type of interaction")}}))}},{key:"setPaymentOnTable",value:function(){this.banksArray.forEach((function(e){t.calcPaymentForBank(Nn(e))}))}},{key:"_recalculateFirstPayment",value:function(){var t=+this.$creditPercent[0].innerText.replace("%","");this.minPercent>t&&(t=this.minPercent);var e=Gn.accessStorage("price[min]",null),n=Math.trunc(e*t/100),i=e/100*this.minPercent,o=e/100*this.maxPercent,a=(o-i)/(this.maxPercent-this.minPercent),s=this.$wrap.find('input[name="first-pay[min]"]'),r=Nn(this.ranges["first-pay"]).data("ionRangeSlider");s.val(n.toLocaleString("ru-Ru")),r.update({from:n,min:i,max:o,step:a}),Gn.accessStorage("first-pay[min]",n),this.setCredit()}},{key:"_disableItems",value:function(){var t=this;this.banksArray.forEach((function(e){t._setDisabled(Nn(e))}))}},{key:"_setDisabled",value:function(t){var e=t.find(".mortgage-bank__payment-value"),n=Gn.getReplaceDotToNumber(t.attr("data-firstPayment")),i=+t.attr("data-limit"),o=+t.attr("data-limitMin");Gn.accessStorage("creditPercent")<n||Gn.accessStorage("creditPercent")>100||Gn.accessStorage("limitation[min]")>i||Gn.accessStorage("limitation[min]")<o?(e.text("—"),t.addClass(this.classes.disabled)):t.removeClass(this.classes.disabled),this.isTrancheEnabled&&!t.hasClass("_tranche")&&t.addClass(this.classes.disabled)}},{key:"_setOrdersCount",value:function(){var t=this.$banksItems.not(".".concat(this.classes.disabled,", .").concat(this.classes.hidden)).length;this.$orderCount.text("".concat(t))}},{key:"_checkEmptyResult",value:function(){var t=this.$banksItems.not(".".concat(this.classes.disabled,", .").concat(this.classes.hidden)).length?"removeClass":"addClass";this.$resultList[t](this.classes.disabled),this.$emptyResult[t](this.classes.active)}},{key:"_setTableOrder",value:function(){for(var t=0;t<this.$banksItems.length;t++)this._setItemOrder(Nn(this.$banksItems[t]))}},{key:"_setItemOrder",value:function(t){var e=+t.attr("data-payment");e=0===e?1e7:e,t.css("order",e)}},{key:"update",value:function(){var t=this;this.hide(),setTimeout((function(){t.setPaymentOnTable(),t._disableItems(),t._setOrdersCount(),t._checkEmptyResult(),t._setTableOrder(),t.loadMoreProgramm(),t.flatPrice.text(t.$banksItems.find(".mortgage-bank__payment-value").first().text())}),this.durationAnim),this.show()}},{key:"show",value:function(){var t=this;setTimeout((function(){t.$wrap.addClass("is-ready")}),this.durationAnim)}},{key:"hide",value:function(){this.$wrap.removeClass("is-ready")}},{key:"_onChangeSelect",value:function(){this._changeBanks(),this._setOrdersCount(),this._checkEmptyResult()}},{key:"_changeBanks",value:function(t){var e=this;this.hide(),setTimeout((function(){Array.from(e.$banksItems).forEach((function(t){var n=Nn(t),i=n.attr("data-type"),o=n.attr("data-project")||"all";"all"===e._getProgramName()&&e._getProjectName()===o||e._getProgramName()===i&&e._getProjectName()===o?n.removeClass(e.classes.hidden,e.classes.loadmore):n.addClass(e.classes.hidden)}))}),this.durationAnim),this.show()}},{key:"_onLeave",value:function(t){t.classList.remove("_show")}},{key:"_onEnter",value:function(t){t.classList.add("_show")}},{key:"_backToFilter",value:function(){var t=this;if(l.isMobile()){var e=this.wrap.querySelector(".mortgage-row__main");E.u.create({trigger:e,start:"top 80px",end:"bottom 80px",onEnter:function(){return t._onEnter(e)},onEnterBack:function(){return t._onEnter(e)},onLeave:function(){return t._onLeave(e)},onLeaveBack:function(){return t._onLeave(e)}})}}},{key:"loadMoreProgramm",value:function(){var t=this,e=this,n=this.$wrap.find(".mortgage-loadmore__button"),i=n.closest(".mortgage-loadmore__wrap"),o=n.find(".mortgage-loadmore__counter"),a=this.$banksItems.not(".".concat(e.classes.hidden,", .").concat(this.classes.disabled));n.removeClass(e.classes.active);var s=a.sort((function(t,e){return+t.style.order-+e.style.order})),r=function(){s.not(".".concat(t.classes.disabled)).addClass(e.classes.loadmore),s.slice(0,4).removeClass(e.classes.loadmore);var n=l.pluralWord(s.length-4,["ипотечную программы","ипотечные программы","ипотечных программ"]);o.text("Показать еще ".concat(s.length-4," ").concat(n)),s.length>4?i.show():i.hide()};r(),n.off(),n.on("click",(function(t){t.preventDefault(),Nn(this).toggleClass(e.classes.active),Nn(this).hasClass(e.classes.active)?(s.not(".".concat(e.classes.disabled)).removeClass(e.classes.loadmore),o.text("Свернуть список")):r()}))}},{key:"_createRateValues",value:function(){this.banksArray.forEach((function(t){var e=t.dataset.rate.split(",");t.querySelector(".mortgage-bank__rate").innerHTML=Gn.createRate(e)}))}}],i=[{key:"init",value:function(){var e=document.querySelectorAll("[data-mortgage]");e.length&&e.forEach((function(e){(new t).init(e)}))}},{key:"initSlider",value:function(t){(new kn).initRange({element:t})}},{key:"setInput",value:function(t,e){e.$input.val(t.toLocaleString("ru-Ru")),"limitation[min]"===e.$input.attr("name")&&e.$postfix.text(Gn.decodePostfix(t))}},{key:"calcMonthlyPay",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=t/12/100,o=12*Gn.accessStorage("limitation[min]")-n,a=i*Math.pow(1+i,o)/(Math.pow(1+i,o)-1)*(Gn.accessStorage("creditAmount")-e);return a<0?"—":a}},{key:"calcMonthlyPayTranch",value:function(t,e,n){var i=t/12/100,o=n,a=i*Math.pow(1+i,o)/(Math.pow(1+i,o)-1)*e;return a<0?"—":a}},{key:"calcPaymentForBank",value:function(e){var n=e.attr("data-rate").split(","),i=2===n.length,o=i&&+e.attr("data-tranch-cost"),a=i&&+e.attr("data-tranch-limit")||24,s="";s=i&&o?Gn.isExist(t.calcMonthlyPay(n[0]))?Gn.calc("monthlyPaymentPrettyTranche",t.calcMonthlyPayTranch(n[0],o,a),t.calcMonthlyPay(n[1],o,a)):"—":Gn.isExist(t.calcMonthlyPay(n[0]))?Gn.calc("monthlyPaymentPretty",t.calcMonthlyPay(n[0]),null):"—",e.find(".mortgage-bank__payment-value").html(s);var r="—"!==s?t.calcMonthlyPay(n[0]).toFixed():0;e.attr("data-payment",r)}}],n&&Rn(e.prototype,n),i&&Rn(e,i),t}(),Un=(n.p,n.p,n(692)),Yn=new b,Kn=new p;Kn.register([sn,ln,hn,vn,kn,wn,En,On,$n,Vn,nn]),l.handlerDocumentReady((function(){Kn.init()})),document.addEventListener("DOMContentLoaded",(function(){(new C).init(),new C({trigger:".j-lazy-function",threshold:10,islazyFunction:!0}).init(),new C({trigger:".j-lazy-function-entered",threshold:10,isEntered:!0,islazyFunction:!0}).init(),document.querySelector(".header")&&(new qt).init(),document.querySelector(".j-modal")&&(new rt).init(),document.querySelector(".j-menu")&&(new P).init(),document.querySelector(".j-cookie")&&(new B).init(),document.querySelector(".j-nav")&&(new Ae).init(),window.initFormValidate=function(){var t=document.querySelectorAll(".j-validate");t.length&&t.forEach((function(t){new He({elem:t}).init()}))},window.initFormValidate();var t=document.querySelector(".booking-form");t&&new tn({element:t}).init();var e=document.querySelector(".j-search-panel");e&&(new Ge).init({element:e});var n=Array.from(document.querySelectorAll(".j-html2pdf"));n.length&&(new En).init({targets:n});window.Slider={},window.Slider.update=function(){var t=document.querySelectorAll(".j-sl");t.length&&t.forEach((function(t){if(!t.classList.contains("_slider-inited"))if(t.classList.add("_slider-inited"),t.classList.contains("j-sl-centered"))new At({elem:t,settings:{centerMode:!0,slidesToShow:3,dots:!0}}).init();else if(t.classList.contains("j-sl-thumb")){var e=t.querySelector(".slider-for"),n=t.querySelector(".slider-nav");e&&n&&(new At({elem:t,inner:e,gallery:!0,settings:{slidesToShow:1,slidesToScroll:1,arrows:!0,fade:!0,asNavFor:n}}).init(),new At({elem:t,inner:n,settings:{slidesToShow:3,slidesToScroll:1,vertical:!0,asNavFor:e,centerMode:!0,dots:!1,arrows:!1,focusOnSelect:!0,verticalSwiping:!0}}).init())}else new At({elem:t,settings:{dots:!1,speed:300,useTransform:!0,cssEase:"ease-out"}}).init()}))},window.Slider.update(),window.Gallery={},window.Gallery.update=function(){var t=document.querySelectorAll(".j-gallery");t.length&&t.forEach((function(t){t.classList.contains("_inited")||new Pt({elem:t}).init()}))},window.Gallery.update(),setTimeout((function(){(new T).init()}),100);var i=document.querySelectorAll(".text-content");i&&i.forEach((function(t){new pt({elem:t}).init()}));var o=document.querySelectorAll(".j-brake");o&&o.forEach((function(t){new Je({elem:t}).init()}));var a=document.querySelector(".social-widget");a&&new Ze({elem:a}).init();var s=Array.from(document.querySelectorAll(".j-acc"));s&&s.forEach((function(t){t.classList.contains("j-acc-mobile")&&(new X).init({elem:t,breakpoint:1023}),t.classList.contains("j-acc-desktop")&&(new U).init({elem:t})}));var r=document.querySelectorAll(".j-acc-project");r.length&&r.forEach((function(t){(new X).init({elem:t,breakpoint:1023,toggler:".nav-sidebar__head",content:".acc__content",contentOuter:".acc__content-wrap",title:".nav-sidebar__head-title"})})),window.initFilterResultAcc=function(){var t=document.querySelectorAll(".j-acc-layout");t.length&&t.forEach((function(t){(new Y).init({elem:t,toggler:".result-project__btn",content:".acc__content",contentOuter:".acc__content-wrap",closed:!1})}));var e=document.querySelectorAll(".j-acc-flat");e.length&&e.forEach((function(t){(new K).init({elem:t,toggler:".result-layout__btn",content:".acc__content",contentOuter:".acc__content-wrap"})}))},window.initFilterResultAcc(),Array.from(document.querySelectorAll(".j-tab")).forEach((function(t){t.querySelector(".tab__buttons")&&new ht({elem:t}).init()})),Array.from(document.querySelectorAll(".j-tab-inner")).forEach((function(t){new ht({elem:t,tabsParent:".tab-inner__buttons",tabItem:".tab-inner__btn",contentItem:".tab-inner__content-item",contentsParent:".tab-inner__content"}).init()}));var c=document.querySelectorAll(".j-drop");c.length&&c.forEach((function(t){new zt(t).init()}));var u=document.querySelector(".j-navbar-container");u&&new qe({elem:u,sections:".j-navbar-section",list:".nav-navbar__list-list",tabs:".nav-navbar__btn",innerBlock:".nav-navbar__inner",indent:40,filling:!1}).init();var h=document.querySelector(".j-sidebar-container");h&&l.isBreakpoint(1023,1e4)&&new qe({elem:h,sections:".nav-sidebar-section",list:".nav-sidebar__list",tabs:".nav-sidebar__btn",innerBlock:".nav-sidebar",indent:50,filling:!0}).init(),window.ymapsInited=!1,Yn.subscribe("map:init",(function(t){!function(t){if(t){if(window.ymapsInited)new Ee(window.ymaps).init({wrapper:t,cluster:!0,fullScreenControl:!0,customFullScreenControl:!0,customZoomControl:!0});else xe().then((function(e){new Ee(e).init({wrapper:t,cluster:!0,fullScreenControl:!0,customFullScreenControl:!0,customZoomControl:!0}),window.ymapsInited=!0})).catch((function(t){console.error("При загрузке яндекс карт произошла ошибка: ".concat(t))}))}}(t)})),Yn.subscribe("mapContacts:init",(function(t){!function(t){if(window.ymapsInited){new Oe(ymaps).init({container:t})}else xe().then((function(e){new Oe(e).init({container:t}),window.ymapsInited=!0})).catch((function(t){console.error("При загрузке яндекс карт произошла ошибка: ".concat(t))}))}(t)}));var d=document.querySelectorAll(".j-click");d.length&&d.forEach((function(t){var e=t.querySelector(".j-click-btn"),n=t.querySelector(".j-click-target");e&&n?e.addEventListener("click",(function(){if(!n.classList.contains("is-loaded")){var t=n.dataset.lazyFunction;t||console.warn('Отложенная загрузка: Не найден атрибут data-lazy-function="name:event"'),Yn.publish(t,n),n.classList.add("is-loaded")}})):console.warn("index.js: Для функции j-click не определены елементы j-click-btn или j-click-target")})),Un(document).on("click",".b24-form input[type=tel]",(function(){Un(this).parent().hasClass("is-macked")||(Un(this).mask("+7(A00)000-00-00",{translation:{A:{pattern:/[0-69]/}}}),Un(this).parent().addClass("is-macked"))}));var f=document.querySelectorAll(".j-accordeon");f.length&&f.forEach((function(t){new Ye(t).init()}))}))}},n={};function i(t){var o=n[t];if(void 0!==o)return o.exports;var a=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=e,i.amdD=function(){throw new Error("define cannot be used indirect")},i.amdO={},t=[],i.O=function(e,n,o,a){if(!n){var s=1/0;for(u=0;u<t.length;u++){n=t[u][0],o=t[u][1],a=t[u][2];for(var r=!0,l=0;l<n.length;l++)(!1&a||s>=a)&&Object.keys(i.O).every((function(t){return i.O[t](n[l])}))?n.splice(l--,1):(r=!1,a<s&&(s=a));if(r){t.splice(u--,1);var c=o();void 0!==c&&(e=c)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[n,o,a]},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,{a:e}),e},i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},i.p="",function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,a,s=n[0],r=n[1],l=n[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(o in r)i.o(r,o)&&(i.m[o]=r[o]);if(l)var u=l(i)}for(e&&e(n);c<s.length;c++)a=s[c],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(u)},n=self.webpackChunkstarttemplate=self.webpackChunkstarttemplate||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var o=i.O(void 0,[96],(function(){return i(61)}));o=i.O(o)}();
!function(){"use strict";var e,t,n,i,o={315:function(e,t,n){var i=n(138),o=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"handlerDocumentReady",value:function(e){return"function"==typeof e&&("interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e))}},{key:"removeElement",value:function(e){e.parentNode.removeChild(e)}},{key:"siblings",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return Array.from(e.parentNode.children).filter(function(n){return t?n:n!==e})}},{key:"show",value:function(e){e.style.display="block"}},{key:"hide",value:function(e){e.style.display="none"}},{key:"clearHtml",value:function(e){e.innerHTML=""}},{key:"insetContent",value:function(e,t){"string"==typeof t?e.insertAdjacentHTML("beforeend",t):"object"==typeof t&&e.appendChild(t)}},{key:"keyExist",value:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},{key:"isEmptyObject",value:function(e){return 0===Object.keys(e).length}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"getWindowHeight",value:function(){return window.innerHeight||document.documentElement.clientHeight}},{key:"getWindowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth}},{key:"getScrollTop",value:function(){return window.scrollY||document.documentElement.scrollTop}},{key:"isTouchDevice",value:function(){var e,t;return!!("undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&"undefined"!=typeof document&&(e=document,null!=(t=window.DocumentTouch)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t)))||!!("undefined"!=typeof navigator&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints))}},{key:"isBreakpoint",value:function(e,t){return window.innerWidth>=e&&window.innerWidth<t}},{key:"isDesktop",value:function(){return window.innerWidth>1199}},{key:"isTablet",value:function(){return window.innerWidth<1023}},{key:"isMobile",value:function(){return window.innerWidth<768}},{key:"youTubeGetId",value:function(e){return e.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be[.]?\/|youtube\.com[.]?\/(?:embed\/|v\/|watch\/?\?(?:\S+=\S*&)*v=))([\w-]{11})\S*$/)?RegExp.$1:void 0}},{key:"numberFormatted",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}},{key:"getElementIndex",value:function(e){for(var t=0;e=e.previousElementSibling;)t++;return t}},{key:"getElementOffset",value:function(e){var t=document.documentElement,n=e.getBoundingClientRect();return{top:n.top+window.pageYOffset-t.clientTop,left:n.left+window.pageXOffset-t.clientLeft}}},{key:"loadScript",value:function(e,t){var n=document.createElement("script");n.onload=function(){if(t)return t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}},{key:"send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"POST";fetch(t,{method:i,body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(e){return e.json()}).then(function(e){n.success(e),n.complete&&n.complete()}).catch(function(e){n.error&&n.error(e)})}},{key:"throttle",value:function(e,t){var n=null;return function(i){var o=n;n=Date.now(),(void 0===o||n-o>t)&&e(i)}}},{key:"debounce",value:function(e,t){var n=this,i=null;return function(o){var a=i;i=Date.now(),a&&i-a<=t&&clearTimeout(n.lastCallTimer),n.lastCallTimer=setTimeout(function(){e(o)},t)}}},{key:"wrapContent",value:function(e,t,n){var i=document.createElement(t);return n&&i.classList.add(n),e.parentNode.insertBefore(i,e),i.appendChild(e)}},{key:"bodyFixed",value:function(e){var t="".concat(window.innerWidth-document.documentElement.clientWidth,"px");(0,i.Qp)(e,{reserveScrollBarGap:!0}),setTimeout(function(){var e=document.documentElement;e&&e.style.setProperty("--lock-offset",t)})}},{key:"bodyStatic",value:function(){(0,i.tP)(),setTimeout(function(){var e=document.documentElement;e&&e.style.setProperty("--lock-offset","")})}},{key:"convertToNumber",value:function(e){return parseFloat(e.toString().replace(/\s/g,""))}},{key:"replaceSpace",value:function(e){return e.replace(/\s/g,"")}},{key:"convertToDigit",value:function(e){return Number(e)?Number(e).toLocaleString("ru-Ru"):e}},{key:"convertToRank",value:function(e,t){return Number(e)/t}},{key:"pluralWord",value:function(e,t){return t[e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2]}},{key:"getUrlParams",value:function(e){var t=window.location.search;return new URLSearchParams(t).get(e)}},{key:"isElement",value:function(e){return!!e.tagName}},{key:"closest",value:function(e,t){return!!e&&!!t&&e.closest(t)}},{key:"isInViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.getBoundingClientRect(),i=n.top+t,o=n.left+t,a=window.innerHeight||document.documentElement.clientHeight,s=window.innerWidth||document.documentElement.clientWidth,r=i<=a&&i+n.height>=0,l=o<=s&&o+n.width>=0;return r&&l}},{key:"hyphenate",value:function(e){var t=e,n="[а-яА-Я]",i="[аеёиоуыэюяАЕЁИОУЫЭЮЯ]",o="[бвгджзклмнпрстфхцчшщБВГДЖЗКЛМНПРСТФХЦШЩ]",a=[];a[1]=RegExp("(".concat("[йъьЙЪЬ]",")(").concat(n).concat(n,")"),"ig"),a[2]=RegExp("(".concat(i,")(").concat(i).concat(n,")"),"ig"),a[4]=RegExp("(".concat(i).concat(o,")(").concat(o).concat(i,")"),"ig"),a[3]=RegExp("(".concat(o).concat(i,")(").concat(o).concat(i,")"),"ig"),a[5]=RegExp("(".concat(i).concat(o,")(").concat(o).concat(o).concat(i,")"),"ig"),a[6]=RegExp("(".concat(i).concat(o).concat(o,")(").concat(o).concat(o).concat(i,")"),"ig");for(var s=0;s<2;++s)for(var r=0;r<=6;++r)t=t.replace(a[r],"$1".concat("\xad","$2"));return t}},{key:"checkInternetConnection",value:function(){return navigator.onLine}},{key:"isWindows",value:function(){var e,t;return -1!==["Win32","Win64","Windows","WinCE"].indexOf((null===(t=window.navigator)||void 0===t?void 0:null===(e=t.userAgentData)||void 0===e?void 0:e.platform)||window.navigator.platform)}},{key:"cubicProgress",value:function(e){return(e=((e=e<0?0:e)>1?1:e)/.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},{key:"now",value:function(){return window.performance&&window.performance.now?window.performance.now():+new Date}},{key:"toBase64",value:function(e){return window.btoa(unescape(encodeURIComponent(e)))}},{key:"fromBase64",value:function(e){return decodeURIComponent(escape(window.atob(e)))}},{key:"clickOutside",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){var o=[];e.nodeType===Node.ELEMENT_NODE?o=[[e]]:"string"==typeof e?o.push(Array.from(document.querySelectorAll(e))):Array.from(e).forEach(function(e){o.push(Array.from(document.querySelectorAll(e)))}),document.addEventListener("click",function(a){var s=a.target;i&&(o=[],e.nodeType===Node.ELEMENT_NODE?o=[[e]]:"string"==typeof e?o.push(Array.from(document.querySelectorAll(e))):Array.from(e).forEach(function(e){o.push(Array.from(document.querySelectorAll(e)))}));do{try{o.forEach(function(e){if(-1!==e.indexOf(s))throw n(),!1})}catch(e){return}s=s.parentNode}while(s);t()})}}},{key:"addScript",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=document.createElement("script");i.type="application/javascript",i.src=e,i.onload=n.onload,i.onerror=function(e){console.warn("Ошибка загрузки "+t.src),n.onerror(e)},document.head.appendChild(i)}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t,e),t}(),a=n(755);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}o.handlerDocumentReady(function(){window.jQuery=window.$=a;var e=document.querySelector("html"),t=function(){o.isTouchDevice()?e.classList.remove("no-touch"):e.classList.add("no-touch")};["resize","orientationchange"].forEach(function(e){window.addEventListener(e,t)}),t();var n=document.querySelectorAll("[data-scroll-to]"),i=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return!1;var t=a(e).offset().top;a("html").animate({scrollTop:t},500)};n.length&&n.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault();var n=e.dataset.scrollBy||e.getAttribute("href");i(document.querySelector(n))})})});var c=null,u=function(){var e,t;function n(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.components=[],c||(c=this),c}return e=[{key:"register",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.components=l(this.components).concat(l(e)),!0}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return this.components.length&&Array.from(this.components).forEach(function(t){t.init(e),document.dispatchEvent(new CustomEvent("afterInitComponent",{detail:{component:t,context:e}}))}),!0}}],r(n.prototype,e),t&&r(n,t),n}(),h=n(732),d=n.n(h);function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var f=null,m=function(){var e,t;function n(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),f||(f=this),this.channels={},f}return e=[{key:"subscribe",value:function(e,t){this.channels[e]||(this.channels[e]=[]),this.channels[e].push({context:this,callback:t})}},{key:"unsubscribe",value:function(e){return!!this.channels[e]&&(delete this.channels[e],this)}},{key:"publish",value:function(e){if(!this.channels[e])return!1;var t=Array.prototype.slice.call(arguments,1);return this.channels[e].forEach(function(e){e.callback.apply(e.context,t)}),this}},{key:"installTo",value:function(e){e.channels={},e.publish=this.publish,e.subscribe=this.subscribe}}],p(n.prototype,e),t&&p(n,t),n}();function v(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function g(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),e}var b=new m,_=function(){function e(){v(this,e)}return g(e,null,[{key:"init",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],new w().init(),new k().init()}}]),e}(),k=function(){function e(){v(this,e),this.lazyloadEnter=null}return g(e,[{key:"init",value:function(){this.subscibe()}},{key:"subscibe",value:function(){var e=this;b.subscribe("preloader:end",function(){setTimeout(function(){e.start()},300)})}},{key:"start",value:function(){this.lazyloadEnter=new(d())({elements_selector:"[data-lazy-enter]",threshold:400,callback_exit:this._onEnter.bind(this,"exit",1),callback_enter:this._onEnter.bind(this,"enter",0)})}},{key:"_onEnter",value:function(e,t,n){var i=n.getAttribute("data-lazy-enter").split(",")[t];n.classList.contains("_".concat(e))||(b.publish(i,n),n.classList.add("_".concat(e)))}}]),e}(),w=function(){function e(){v(this,e),this.lazyloadImage=null}return g(e,[{key:"init",value:function(){this.lazyloadImage=new(d())({elements_selector:".lazy",threshold:300,unobserve_entered:!0,callback_error:function(e){}})}}]),e}();function S(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var E=new m,x=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.preloader=document.querySelector(".preloader"),this.html=document.documentElement,this.timeOnView=600}return e=[{key:"init",value:function(){this.preloader&&this._subscribe()}},{key:"_subscribe",value:function(){var e=this;E.subscribe("animation:inited",function(){e._bindEvents()})}},{key:"_bindEvents",value:function(){var e=this;o.handlerDocumentReady(function(){setTimeout(function(){e._hide()},e.timeOnView)})}},{key:"_hide",value:function(){var e=this;this.preloader.classList.add("_ready"),this.html.classList.add("_loaded"),E.publish("preloader:end"),setTimeout(function(){o.removeElement(e.preloader)},1e3)}}],t=[{key:"init",value:function(){new n().init()}}],e&&S(n.prototype,e),t&&S(n,t),n}(),C=n(856),O=n(191),P=n(92);function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function T(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function j(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}O.p8.registerPlugin(P.i);var A=function(){var e,t;function n(){var e=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.parallaxElems=j(document.querySelectorAll("[data-plx-elem]")).map(function(t){return e._getParams(t,"data-plx-elem")}),this.parallaxImages=j(document.querySelectorAll("[data-plx-image]")).map(function(t){return e._getParams(t,"data-plx-image")}),this.parallaxSections=j(document.querySelectorAll("[data-plx-section]")).map(function(t){return e._getParams(t,"data-plx-section")}),this.parallaxSpeeds=j(document.querySelectorAll("[data-plx-speed]")).map(function(t){return e._getParams(t,"data-plx-speed")}),this.parallaxTitleds=j(document.querySelectorAll("[data-plx-titled]")),this.parallaxPinchElem=document.querySelector("[data-plx-pinch]"),this.viewHeight=window.innerHeight,this.scrollPosition=o.getScrollTop()}return e=[{key:"init",value:function(){this._start()}},{key:"_start",value:function(){var e=this;this.parallaxElems.forEach(function(t){e._parallaxElem(t)}),this.parallaxImages.forEach(function(t){e._parallaxImage(t)}),this.parallaxSections.forEach(function(t){e._parallaxSection(t)}),this.parallaxSpeeds.forEach(function(t){e._parallaxSpeed(t)}),this.parallaxTitleds.forEach(function(t){e._parallaxTitled(t)}),this.parallaxPinchElem&&this._parallaxPinch()}},{key:"_parallaxSpeed",value:function(e){var t=e.target,n=t.closest("[data-plx-wrap]"),i=n.offsetWidth,o=n.offsetHeight,a=t.firstChild;if(a&&"IMG"===a.tagName){var s=.5*i,r=.5*o;s=- -(s*e.x*.004),r=- -(r*e.y*.004),t.style.setProperty("left","-".concat(s,"px")),t.style.setProperty("width","calc(100% + ".concat(2*s,"px)")),t.style.setProperty("top","-".concat(r,"px")),t.style.setProperty("height","calc(100% + ".concat(2*r,"px)"))}n.addEventListener("mousemove",function(n){var a=n.pageX-.5*i,s=n.pageY-.5*o;O.p8.to(t,{x:-((t.offsetLeft+a*e.x)*.004),y:-((t.offsetTop+s*e.y)*.004),duration:1})})}},{key:"_parallaxElem",value:function(e){var t=e.target;O.p8.set(t,{force3D:!0});var n={trigger:t,start:"top bottom",end:"bottom 90%",scrub:!0},i=10*e.x,o=10*e.y;O.p8.fromTo(t,{opacity:e.fade?0:1,duration:1},{opacity:1,scrollTrigger:n}),O.p8.fromTo(t,{y:0,x:0,duration:9},{y:o,x:i,scrollTrigger:n})}},{key:"_parallaxSection",value:function(e){var t=this,n=e.target,i=n.hasAttribute("data-plx-top");O.p8.fromTo(n,{y:i?"".concat(-window.innerHeight*this._getRatio(n),"px"):"0px"},{y:function(){return"".concat(window.innerHeight*(1-t._getRatio(n)),"px")},ease:"none",scrollTrigger:{trigger:n,start:function(){return i?"top bottom":"top top"},end:"bottom top",scrub:!0,invalidateOnRefresh:!0}})}},{key:"_parallaxImage",value:function(e){var t=e.target,n=t.closest("[data-plx-wrap]")||t.parentNode,i=n?n.querySelector("[data-plx-label]"):null;t.onload=function(){O.p8.to(t,{scrollTrigger:{trigger:n,scrub:.5,invalidateOnRefresh:!0},y:n.offsetHeight-t.offsetHeight,ease:"none"}),i&&(O.p8.set(i,{autoAlpha:0}),O.p8.to(i,{autoAlpha:1,scrollTrigger:{trigger:t,start:"top bottom",end:"bottom center",scrub:1}}))}}},{key:"_parallaxTitled",value:function(e){var t=e.closest("[data-plx-wrap]"),n=t?t.querySelector("[data-plx-titled-title]"):null,i=Math.round(window.innerHeight/100*15);if(O.p8.fromTo(e,{y:"-".concat(i)},{y:"".concat(i),ease:"none",scrollTrigger:{trigger:e,start:"top bottom",end:"bottom top",scrub:!0}}),n){var o=O.p8.timeline({scrollTrigger:{trigger:e,start:"".concat(i," center"),end:"bottom center",scrub:!0,pin:n,pinSpacer:!1}});o.from(n,{autoAlpha:0,scaleY:1.2},"start"),o.to(n,{autoAlpha:1,scaleY:1},"start+=0.025"),o.to(n,{autoAlpha:0,scaleY:1.2},"start+=0.9")}}},{key:"_parallaxPinch",value:function(){var e=this,t=this.parallaxPinchElem.querySelector("[data-plx-pinch-video]");t?t.addEventListener("loadeddata",function(){O.p8.to(e.parallaxPinchElem,{scale:.8,y:"20%",scrollTrigger:{trigger:e.parallaxPinchElem,start:"top top",end:"bottom top",scrub:!0,markers:!0,onEnter:function(){return t.play()},onEnterBack:function(){return t.play()},onLeave:function(){return t.pause()}}})}):O.p8.to(this.parallaxPinchElem,{scale:.8,y:"20%",scrollTrigger:{trigger:this.parallaxPinchElem,start:"top top",end:"bottom top",scrub:!0}})}},{key:"_getRatio",value:function(e){return window.innerHeight/(window.innerHeight+e.offsetHeight)}},{key:"_getParams",value:function(e,t){var n,i,a,s,r=e.getAttribute(t),l=e.getAttribute("data-plx-fade");"data-plx-speed"===t?(n=r.split(",")[0],i=r.split(",")[1]||0,a=r.split(",")[2]||0,s=r.split(",")[3]||0):(i=r.split(",")[0],s=r.split(",")[1]||0,n=r.split(",")[2]||0,a=r.split(",")[3]||0);var c=parseInt(o.isDesktop()?i:s);c=Number.isNaN(c)?10:c;var u=parseInt(o.isDesktop()?n:a);return{target:e,y:c,x:u=Number.isNaN(u)?10:u,fade:null!==l}}}],T(n.prototype,e),t&&T(n,t),n}();function I(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}O.p8.registerPlugin(P.i);var M=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.elements=document.querySelectorAll("[data-anim-fadetop]")}return e=[{key:"init",value:function(){var e=this;this.elements.length&&this.elements.forEach(function(t){e._animate(t)})}},{key:"_animate",value:function(e){O.p8.set(e,{y:"100%"}),O.p8.timeline({scrollTrigger:{trigger:e,start:"top bottom",end:"top 60%",invalidateOnRefresh:!0,scrub:1}}).to(e,{y:"0"})}}],I(n.prototype,e),t&&I(n,t),n}();function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function D(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}O.p8.registerPlugin(P.i);var R=new m,$=function(){var e,t;function n(){var e=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.wrapper=document.querySelector("body"),this.blockSelector="[data-anim]",this.animationObjects=O.p8.utils.toArray(this.blockSelector),this.animationSettings={delayAfterPreloader:600,breakpoint:1},this.gsapSettings={ease:"power2.out",duration:.9,delay:0,scrub:!o.isDesktop()&&2},this.animationObjects=D(this.wrapper.querySelectorAll(this.blockSelector)).map(function(t){var n,i,o,a;return{animationBlock:t,items:D(t.querySelectorAll("\n                  [data-anim-item]")),delay:(null===(n=t.dataset)||void 0===n?void 0:n.animDelay)||0,duration:(null===(i=t.dataset)||void 0===i?void 0:i.animDuration)||e.gsapSettings.duration,isOnly:t.hasAttribute("data-anim-only")||!1,type:(null===(o=t.dataset)||void 0===o?void 0:o.anim)||"fadeIn",ease:(null===(a=t.dataset)||void 0===a?void 0:a.animEase)||e.gsapSettings.ease}}),O.p8.config({nullTargetWarn:!1})}return e=[{key:"init",value:function(){if(this._initOtherAnimations(),!o.isDesktop()){R.publish("animation:inited");return}this._animationInit(),this._subscribes()}},{key:"_subscribes",value:function(){var e=this;R.subscribe("preloader:end",function(){setTimeout(function(){e.animationObjects.forEach(function(t){e._show(t.animationBlock),e._animateMove(t)}),e._updateAnimation()},e.animationSettings.delayAfterPreloader)})}},{key:"_getScrollSettings",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={trigger:e,start:o.isDesktop()?"top 80%":"top 95%",end:"top 60%",scrub:this.gsapSettings.scrub,once:!0,toggleActions:"play none none reverse"};return n.onEnter&&(i.onEnter=n.onEnter),i}},{key:"_counterRowItems",value:function(e){var t=e.animationBlock,n=t.querySelector("[data-anim-item], .col");return Math.trunc(t.getBoundingClientRect().width/n.getBoundingClientRect().width)}},{key:"_animationInit",value:function(){var e=this;new A().init(),new M().init(),this.animationObjects.forEach(function(t){e._hide(t.animationBlock)}),R.publish("animation:inited")}},{key:"_initOtherAnimations",value:function(){}},{key:"_animateMove",value:function(e){var t=this,n=e.animationBlock,i=e.items.length?e.items:n,o=[];if(i.length){for(var a=this._counterRowItems(e),s=0;s<i.length;s+=a){var r=i.slice(s,s+a);o.push(r)}o.forEach(function(n){var i=O.p8.timeline({scrollTrigger:t._getScrollSettings(n,e)}),o=t._animatePosition(e.type);i.fromTo(n,{opacity:0,x:o.x,y:o.y},{opacity:1,y:0,x:0,duration:e.duration,delay:e.delay||0,ease:e.ease||t.gsapSettings.ease,stagger:.15})})}else{var l=O.p8.timeline({scrollTrigger:this._getScrollSettings(n,e,{onEnter:function(){}})});if("clipPath"===e.type){this._setClipPathAnimation(e);return}var c=this._animatePosition(e.type);l.fromTo(n,{opacity:0,y:c.y,x:c.x,scale:c.scale},{opacity:1,y:0,x:0,scale:1,duration:e.duration,delay:e.delay||0,ease:e.ease||this.gsapSettings.ease})}}},{key:"_animatePosition",value:function(e){var t=0,n=0,i=1;switch(e){case"fadeIn":break;case"fadeInTop":n="30";break;case"fadeInDown":n="-30";break;case"fadeInLeft":t=o.isDesktop()?"-30":0;break;case"fadeInRight":t=o.isDesktop()?"30":0;break;case"zoomIn":i=.5}return{x:t,y:n,scale:i}}},{key:"_setClipPathAnimation",value:function(e){var t=this,n=e.animationBlock,i=e.animationBlock.querySelector("img");n.style.overflow="hidden",O.p8.timeline({scrollTrigger:this._getScrollSettings(n,e,{onEnter:function(){t._show(n)}})}).from(i,{scale:1.2}).fromTo(n,{css:{opacity:0,clipPath:"polygon(0 0, 0 0, 0 100%, 0% 100%)",webkitClipPath:"polygon(0 0, 0 0, 0 100%, 0% 100%)"}},{css:{opacity:1,clipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%)",webkitClipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%)"},duration:e.duration,ease:e.ease||this.gsapSettings.ease},0)}},{key:"_updateAnimation",value:function(){var e=document.body.scrollHeight;window.addEventListener("scroll",(0,C.D)(10,function(){var t=document.body.scrollHeight;t!==e&&(P.i.refresh(!0),e=t)}))}},{key:"_hide",value:function(e){O.p8.set(e,{opacity:0})}},{key:"_show",value:function(e){O.p8.set(e,{opacity:1})}}],t=[{key:"init",value:function(){new n().init()}}],e&&B(n.prototype,e),t&&B(n,t),n}();function z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var H=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n)}return e=[{key:"init",value:function(){var e=window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"));var t=(0,C.D)(10,function(){if(window.matchMedia("(max-width: 1024px)").matches){var e=window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}},100),n=(0,C.D)(10,function(){if(window.matchMedia("(max-width: 1024px)").matches){var e=window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}},50);return window.addEventListener("resize",t),window.addEventListener("orientationchange",n),function(){window.removeEventListener("resize",t),window.removeEventListener("orientationchange",n)}}}],t=[{key:"init",value:function(){new n().init()}}],e&&z(n.prototype,e),t&&z(n,t),n}();function N(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var W=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.openClass="_menu-opened",this.opened=!1,this.animating=!1,this.menu=e,this.closeBtn=this.menu.querySelector(".menu-head__close"),this.menuItems=this.menu.querySelectorAll(".menu-top__link, .nav-menu .nav-item, .menu-content__logo"),this.menuHead=this.menu.querySelector(".menu-head"),this.menuBottom=this.menu.querySelector(".menu-content__bottom"),this.menuRight=this.menu.querySelector(".menu-content__right"),this.menuMobileElements=this.menu.querySelector(".menu-content"),this.openers=document.querySelectorAll("[data-menu-trigger]"),this.htmlElem=document.documentElement}return e=[{key:"init",value:function(){this._bindContext(),this._bindEvents()}},{key:"_bindContext",value:function(){this.open=this.open.bind(this),this.close=this.close.bind(this),this._changeState=this._changeState.bind(this)}},{key:"_bindEvents",value:function(){var e=this;document.addEventListener("keyup",function(t){e._closeByKeyboard(t)}),this.openers.length&&this.openers.forEach(function(t){t.addEventListener("click",e._changeState)}),this.closeBtn&&this.closeBtn.addEventListener("click",this._changeState),["resize","orientationchange"].forEach(function(t){window.addEventListener(t,e._onResize.bind(e))})}},{key:"_onResize",value:function(){this.opened&&o.isDesktop()&&this._changeState()}},{key:"_closeByKeyboard",value:function(e){27===e.keyCode&&this.opened&&this._changeState()}},{key:"_changeState",value:function(){this.opened?this.close():this.open()}},{key:"open",value:function(){var e=this;(this.opened||!this.animating)&&(this.opened=!0,this.animating=!0,this.menu.style.pointerEvents="all",this.menu.style.display="block",this.htmlElem.classList.add(this.openClass),O.p8.set(this.menuMobileElements,{alpha:1,y:0}),O.p8.fromTo(this.menuHead,{alpha:0},{alpha:1,duration:.35,delay:.6}),o.isTablet()?O.p8.fromTo(this.menuMobileElements,{y:"20px",alpha:0},{y:"0",alpha:1,duration:.75,ease:"strong.out",delay:.6,stagger:.075,onComplete:function(){e.animating=!1,o.bodyFixed(e.menu.querySelector(".menu-content__scroll"))}}):(O.p8.fromTo(this.menuRight,{x:"20px",alpha:0},{x:"0",alpha:1,duration:.35,delay:.6}),O.p8.fromTo(this.menuItems,{x:"-26px",alpha:0},{x:"0%",alpha:1,duration:.75,ease:"strong.out",delay:.6,stagger:.075}),O.p8.fromTo(this.menuBottom,{alpha:0},{alpha:1,duration:.75,delay:.9,onComplete:function(){e.animating=!1,o.bodyFixed(e.menu.querySelector(".menu-content__scroll"))}})))}},{key:"close",value:function(){var e=this;this.opened&&this.animating||(this.opened=!1,this.animating=!0,this.htmlElem.classList.remove(this.openClass),this.menu.style.pointerEvents="none",O.p8.fromTo(this.menuHead,{alpha:1},{alpha:0,duration:.35,delay:.3}),O.p8.fromTo(this.menuMobileElements,{y:0,alpha:1},{y:"40px",alpha:0,duration:.9,ease:"strong.out",onComplete:function(){e.animating=!1,e.menu.style.display="none",o.bodyStatic()}}))}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelector(".menu");t&&new n(t).init()}}],e&&N(n.prototype,e),t&&N(n,t),n}(),F=n(955);function V(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Z=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.cookie=e,this.cookies=F.Z,this.messageShowDelay=5e3,this.cookieDuration=this.cookie.dataset.cookieTime||365,this.activeClass="is-active",this.hideClass="is-hide"}return e=[{key:"_init",value:function(){if(0==+this.cookieDuration&&this._removeCookie("cookie-accepted"),void 0!==this._getCookie("cookie-accepted")){this._hideMessage();return}this._showMessage(),this._bindEvents()}},{key:"_bindEvents",value:function(){var e=this;document.querySelector(".cookie__close").addEventListener("click",function(){e.cookie.classList.add(e.hideClass),setTimeout(function(){e._hideMessage(),e._setCookie("cookie-accepted","yes")},300)})}},{key:"_setCookie",value:function(e,t){this.cookies.set(e,t,{expires:+this.cookieDuration})}},{key:"_getCookie",value:function(e){return this.cookies.get(e)}},{key:"_removeCookie",value:function(e){this.cookies.remove(e)}},{key:"_showMessage",value:function(){var e=this;setTimeout(function(){e.cookie.classList.add(e.activeClass)},this.messageShowDelay)}},{key:"_hideMessage",value:function(){o.removeElement(this.cookie)}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelector(".j-cookie");t&&new n(t)._init()}}],e&&V(n.prototype,e),t&&V(n,t),n}();function G(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Y(e,t,n){return t&&U(e.prototype,t),n&&U(e,n),e}function K(e,t,n){return(K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n||e):o.value}})(e,t,n||e)}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i,o=J(e);if(t){var a=J(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return(n=i)&&("object"==(n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof n)?n:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)}}var et=new m,en=function(){function e(){G(this,e),this.openClass="is-open",this.isOpen=!1,this.closedHeight=0,this.height=null,this.elem=null,this.toggler=null,this.content=null,this.contentOuter=null,this.title=null,this.closed=null,this.changeTitle="",this.subAccordion=!1,this.close=this.close.bind(this),this.open=this.open.bind(this)}return Y(e,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setElements(e),this._setInitState(),this._subscribe(),this._bindEvents()}},{key:"reinit",value:function(){this._setInitState()}},{key:"_setElements",value:function(e){this.elem=e.elem,this.elemParent=this.elem.parentNode||!1,this.closed=this.elem.dataset.close||!0,this.toggler=this.elem.querySelector(e.toggler)||this.elem.querySelector(".acc__head"),this.content=this.elem.querySelector(e.content)||this.elem.querySelector(".acc__content-inner"),this.contentOuter=this.elem.querySelector(e.contentOuter)||this.elem.querySelector(".acc__content"),this.title=this.elem.querySelector(e.title)||this.elem.querySelector(".acc__title"),this.contentOuter.querySelector("[data-acc]")&&(this.subAccordion=!0)}},{key:"_setInitState",value:function(){this.height=this._getHeight(),this.isOpen=this.elem.classList.contains(this.openClass),this.titleText=!!this.title&&this.title.innerHTML,this.changeTitle=this.elem.hasAttribute("data-title"),this.hiddenText=this.elem.dataset.title||"Скрыть"}},{key:"_getHeight",value:function(){return this.content.offsetHeight}},{key:"_subscribe",value:function(){throw Error("Метод _subscribe должен быть переопределен")}},{key:"_bindEvents",value:function(){var e=this;this.toggler.addEventListener("click",this._onTogglerClick.bind(this)),["resize","orientationchange"].forEach(function(t){window.addEventListener(t,e._onResize.bind(e))})}},{key:"_onTogglerClick",value:function(){var e=this.isOpen?this.close:this.open;this.height=this._getHeight(),e()}},{key:"_onResize",value:function(){this.isOpen&&this.update()}},{key:"_setContentHeight",value:function(e){this.contentOuter.style.height=e?"".concat(e,"px"):e}},{key:"open",value:function(){var e=this;this.changeTitle&&this.titleText&&(o.clearHtml(this.title),o.insetContent(this.title,this.hiddenText)),this.elem.classList.add(this.openClass),this.isOpen=!0,this._setContentHeight(this.height),setTimeout(function(){e.contentOuter.style.overflow="visible"},600),this.subAccordion&&setTimeout(function(){e.contentOuter.style.height="auto",e.elem.classList.add("_is-sub-accordion")},1e3)}},{key:"close",value:function(e){e&&this.elemParent!==e||(this.subAccordion&&(this._setContentHeight(this.height),this.elem.classList.remove("_innerAcc")),this.changeTitle&&this.titleText&&(o.clearHtml(this.title),o.insetContent(this.title,this.titleText)),this.elem.classList.remove(this.openClass),this.isOpen=!1,this.contentOuter.style.overflow="hidden",this._setContentHeight(this.closedHeight))}},{key:"update",value:function(){this.height=this._getHeight(),this._setContentHeight(this.isOpen?this.height:this.closedHeight)}}]),e}(),ei=function(e){X(n,e);var t=ee(n);function n(){return G(this,n),t.apply(this,arguments)}return Y(n,[{key:"_setInitState",value:function(){K(J(n.prototype),"_setInitState",this).call(this),this._setContentHeight(this.isOpen?this.height:this.closedHeight)}},{key:"open",value:function(){et.publish("openAccordion",this.elemParent),setTimeout(function(){et.publish("scrollResize")},600),K(J(n.prototype),"open",this).call(this)}},{key:"_subscribe",value:function(){"false"!==this.closed&&et.subscribe("openAccordion",this.close)}}],[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll("[data-accordion]");t.length&&t.forEach(function(e){new n().init({elem:e})});var i=e.querySelectorAll("[data-accordion-filter]");i.length&&i.forEach(function(e){new n().init({elem:e,toggler:".realty-filtres__controls-button-more"})})}}]),n}(en),eo=function(e){X(n,e);var t=ee(n);function n(){return G(this,n),t.apply(this,arguments)}return Y(n,[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.breakpoint=e.breakpoint||e.elem.dataset.accMobile||1199,K(J(n.prototype),"init",this).call(this,e)}},{key:"_isDesktop",value:function(){return o.isBreakpoint(this.breakpoint,1e4)}},{key:"_setInitState",value:function(){K(J(n.prototype),"_setInitState",this).call(this),this._isDesktop()||this._setContentHeight(this.isOpen?this.height:this.closedHeight)}},{key:"_subscribe",value:function(){"false"!==this.closed&&et.subscribe("openMobileAccordion",this.close)}},{key:"_onResize",value:function(){this.update()}},{key:"open",value:function(){this._isDesktop()||(et.publish("openMobileAccordion"),K(J(n.prototype),"open",this).call(this))}},{key:"close",value:function(){this._isDesktop()||K(J(n.prototype),"close",this).call(this)}},{key:"update",value:function(){if(this._isDesktop()){this.height=this._getHeight(),this._setContentHeight(null);return}K(J(n.prototype),"update",this).call(this)}}],[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll("[data-accordion-mobile]");t.length&&t.forEach(function(e){new n().init({elem:e})})}}]),n}(en);n(729);var ea=n(755);function es(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function el(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ec(e,t,n){return t&&el(e.prototype,t),n&&el(e,n),e}function eu(e,t,n){return(eu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eh(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n||e):o.value}})(e,t,n||e)}function eh(e){return(eh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ed(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ep(e,t)}function ep(e,t){return(ep=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ef(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i,o=eh(e);if(t){var a=eh(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return(n=i)&&("object"==(n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof n)?n:es(this)}}var em=new m,ev=function(){function e(t){er(this,e),this.settingsCommon={},this.settingsData=(null==t?void 0:t.settings)||!1}return ec(e,[{key:"init",value:function(){this._setSettingsDefault(),this._connectSettings(this._setSettingsDefault()),this._connectSettings(this.settingsData)}},{key:"_setSettingsDefault",value:function(){return{type:"inline",fixedContentPos:!1,fixedBgPos:!1,overflowY:"auto",removalDelay:700,closeBtnInside:!1,mainClass:"popup-theme-inline-white",closeMarkup:'<button title="%title%" type="button" class="mfp-close popup-close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" class="mfp-close__svg"><path d="M.393 2.331C-.131 1.807-.131.935.393.393a1.392 1.392 0 0 1 1.94 0l11.636 11.652L25.625.393a1.366 1.366 0 0 1 1.919 0 1.356 1.356 0 0 1 0 1.938L15.908 13.966l11.636 11.652a1.358 1.358 0 0 1 0 1.939 1.368 1.368 0 0 1-1.919 0L13.969 15.904 2.333 27.557a1.394 1.394 0 0 1-1.94 0c-.524-.542-.524-1.416 0-1.939L12.03 13.966.393 2.331z"/></svg></button>',tClose:"",midClick:!0}}},{key:"_initPopup",value:function(){ea(this.link).magnificPopup(this.settingsCommon)}},{key:"_fixScrollGap",value:function(){setTimeout(function(){var e=getComputedStyle(document.body).paddingRight,t=document.querySelector(".header__inner"),n=document.querySelector("[menu]");t&&(t.style.right=e),n&&(n.style.right=e)})}},{key:"isOpenPopup",value:function(){return!!document.querySelector(".mfp-ready")}},{key:"_connectSettings",value:function(e){"object"==typeof e&&Object.assign(this.settingsCommon,e)}}]),e}(),ey=function(e){ed(n,e);var t=ef(n);function n(e){var i,o;return er(this,n),(i=t.call(this,e)).link=(null==e?void 0:e.item)||!1,i.view=(null===(o=i.link.dataset)||void 0===o?void 0:o.popup)||!1,i.showPopup=i.showPopup.bind(es(i)),i.hidePopup=i.hidePopup.bind(es(i)),i}return ec(n,[{key:"init",value:function(){eu(eh(n.prototype),"init",this).call(this),this._viewPopup(),this._initPopup()}},{key:"showPopup",value:function(e,t){eu(eh(n.prototype),"init",this).call(this);var i=0,o=this;this.view=t||"inline",this._connectSettings(e),this.isOpenPopup()&&(this.hidePopup(),i=800),setTimeout(function(){o._viewPopup(),ea.magnificPopup.open(o.settingsCommon)},i)}},{key:"openPopup",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0;eu(eh(n.prototype),"init",this).call(this);var s=0,r=this;this._isPopupContent(e)&&(this.isOpenPopup()&&(this.hidePopup(),s=800),setTimeout(function(){t.view=a||"inline",t.openededPopup=!1,t._connectSettings({items:{src:e}}),t._viewPopup(),setTimeout(function(){t.isOpenPopup()?em.subscribe("popupClosed",function(){!r.openededPopup&&(setTimeout(function(){ea.magnificPopup.open(r.settingsCommon),r.openededPopup=!0},1e3),i&&r.hidePopup(i))}):(ea.magnificPopup.open(t.settingsCommon),i&&t.hidePopup(i))},o)},s))}},{key:"hidePopup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;setTimeout(function(){ea.magnificPopup.close()},e)}},{key:"_isPopupContent",value:function(e){return!!document.querySelector(e)||(console.warn("[PopupStatic]: ","Упс... Не найден попан - ".concat(e)),!1)}},{key:"_viewPopup",value:function(){switch(this.view){case"gallery":this._viewGallery();break;case"side":this._viewSide();break;case"subscribe":this._viewSubscribe();break;case"full":this._viewFull();break;default:this._viewStatic()}}},{key:"_viewSide",value:function(){this._connectSettings({mainClass:"popup-theme-side",closeBtnInside:!0})}},{key:"_viewFull",value:function(){this._connectSettings({mainClass:"popup-theme-inline-white full-popup"})}},{key:"_viewGallery",value:function(){this._connectSettings({mainClass:"popup-theme-gallery",callbacks:{open:function(){var e=this.contentContainer.find(".popup-gallery")[0];em.publish("openGalleryPopup",e)},close:function(){em.publish("closeGalleryPopup",this)}}})}},{key:"_viewStatic",value:function(){var e=this,t=null;this._connectSettings({closeOnBgClick:!1,callbacks:{open:function(){var n=this.contentContainer.find(".popup")[0],i=null==n?void 0:n.classList.contains("popup-message"),a=null==n?void 0:n.querySelector("[data-popup-dismiss]");i&&(t=setTimeout(function(){e.hidePopup()},6e3)),a&&a.addEventListener("click",function(){e.hidePopup()}),window.Site.Modules.PageScrolling&&window.Site.Modules.PageScrolling.lock(!0),console.log("⟶ ",document.querySelector(".mfp-wrap")),o.bodyFixed(document.querySelector(".mfp-wrap"))},beforeClose:function(){t&&clearTimeout(t)},close:function(){em.publish("popupClosed"),window.Site.Modules.PageScrolling&&window.Site.Modules.PageScrolling.unlock(),o.bodyStatic()}}})}},{key:"_viewSubscribe",value:function(){this._connectSettings({mainClass:"popup-theme-side",callbacks:{open:function(){var e=this.contentContainer.find(".popup-side")[0],t=this.ev.closest("form").find("input[type=email]")[0].value;e&&(e.querySelector("input[type=email]").value=t)}}})}}],[{key:"init",value:function(){window.Site.Modules.Popup=new n;var e=document.querySelectorAll("[data-popup]");0!==e.length&&e.forEach(function(e){new n({item:e}).init()})}}]),n}(ev),eg=function(e){ed(n,e);var t=ef(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return er(this,n),t.call(this,e)}return ec(n,[{key:"init",value:function(){this.popupHashName=this._getPopupHashName(),this.popupHashName&&this._displayPopup()}},{key:"_displayPopup",value:function(){var e=this;this._checkPopup(this.popupHashName)&&em.subscribe("preloader:end",function(){setTimeout(function(){window.Site.Modules.Popup.showPopup({items:{src:"#".concat(e.popupHashName)}},"inline")},600)})}},{key:"_getPopupHashName",value:function(){var e=window.location.hash.replace(RegExp("^#","u"),"");if(e.includes("popup"))return e}},{key:"_checkPopup",value:function(e){return!!document.querySelector("#".concat(e))||(console.warn("[PopupOpenByHash]: ","Упс... Не найден попан - ".concat(e)),!1)}}],[{key:"init",value:function(){new n().init()}}]),n}(ev),eb=function(e){ed(n,e);var t=ef(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return er(this,n),(e=t.call(this,i)).popup=i.item,e.popupDelay=e.popup.dataset.popupOpen||600,e.popupId=e.popup.getAttribute("id"),e}return ec(n,[{key:"init",value:function(){this.popup&&new ey().openPopup("#".concat(this.popupId),0,this.popupDelay,"inline")}}],[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelector("[data-popup-open]");t&&new n({item:t}).init()}}]),n}(ev);function e_(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ek=function(){return null},ew=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.wrapper=e.elem,this.hash=e.hash||this.wrapper.hasAttribute("data-tab-hash")||!1,this.tabsParent=this.wrapper.querySelector(e.tabsParent||"[data-tab-buttons]")||null,this.tabItem=e.tabItem||"[data-tab-opener]",this.tabs=Array.from(this.tabsParent.querySelectorAll(this.tabItem)),this.isType=e.type||this.wrapper.dataset.type,this.contentItem="true"!==this.isType?e.contentItem||"[data-tab]":"[data-tab-type]",this.contentsParent=this.wrapper.querySelector(e.contentsParent||"[data-tab-contents]")||null,this.contents=!!this.contentsParent&&o.siblings(this.contentsParent.querySelector(this.contentItem)),this.dataTab={},this.onChangeCallback=e.onChangeCallback||ek,this.activeClass="is-active"}return e=[{key:"init",value:function(){0!==this.tabs.length&&(this._setInitialState(),this._bindEvents())}},{key:"_setInitialState",value:function(){var e=this.tabsParent.querySelector(".".concat(this.activeClass))||this.tabs[0];if(this.hash){var t=this._getHash();e=t&&this.wrapper.querySelector('[data-tab-opener="'.concat(t,'"]'))||e}this.isType&&(this.contents=!!this.contentsParent&&Array.from(this.contentsParent.querySelectorAll(".col"))),this.toggleTab(e)}},{key:"_getHash",value:function(){return window.location.hash.replace(RegExp("^#","u"),"")}},{key:"_bindEvents",value:function(){this.wrapper.addEventListener("click",this._onTabs.bind(this))}},{key:"_onTabs",value:function(e){var t=e.target;t.closest(this.tabItem)&&(e.preventDefault(),e.stopPropagation()),t&&t.closest(this.tabItem)&&this.toggleTab(t.closest(this.tabItem))}},{key:"toggleTab",value:function(e){this._setData(e),this._changeState(),this.onChangeCallback(this.dataTab),this.isType&&this._toggleTabType()}},{key:"_setData",value:function(e){this.dataTab={tab:e,id:e.dataset.tabOpener}}},{key:"_changeState",value:function(){var e=this,t=this.dataTab.id;this.tabs.forEach(function(n){n.classList.toggle(e.activeClass,n.dataset.tabOpener===t)}),this.contentsParent&&this.contents.forEach(function(n){n.classList.toggle(e.activeClass,n.dataset.tab===t)})}},{key:"_toggleTabType",value:function(){var e=this.dataTab.id;this.contents.forEach(function(t){t.dataset.tab===e||"all"===e?setTimeout(function(){t.style.display="block",t.style.opacity=1},200):(t.style.opacity=0,setTimeout(function(){t.style.display="none"},200))})}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll("[data-tabs]");t.length&&t.forEach(function(e){new n({elem:e}).init()})}}],e&&e_(n.prototype,e),t&&e_(n,t),n}();function eS(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var eE=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.textContent=e,this.textContent&&(this.iframes=this.textContent.querySelectorAll(":scope > iframe"),this.images=this.textContent.querySelectorAll(":scope > img"))}return e=[{key:"_init",value:function(){var e=this;this.iframes.forEach(function(t){e.iframeContent(t)}),this.images.forEach(function(t){e.imageContent(t)})}},{key:"iframeContent",value:function(e){o.wrapContent(e,"div","ui-iframe")}},{key:"imageContent",value:function(e){var t=e.getAttribute("alt");if(""!==t&&!e.classList.length){o.wrapContent(e,"figure");var n=e.parentNode;o.insetContent(n,"<figcaption>"+t+"</figcaption>")}}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll(".text-content");t.length&&t.forEach(function(e){new n(e)._init()})}}],e&&eS(n.prototype,e),t&&eS(n,t),n}(),ex=function(){function e(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e)}return function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e,[{key:"getTemplateArrows",value:function(){return'<div class="swiper-navigation">\n        <div class="swiper-button swiper-button-prev"></div>\n        <div class="swiper-button swiper-button-next"></div>\n    </div>'}},{key:"getTemplateArrowsAndPagination",value:function(){return'<div class="swiper-navigation">\n              <div class="swiper-navigation__container container">\n              <div class="swiper-pagination swiper-pagination-counter"></div>\n              <div class="swiper-navigation__buttons">\n                <div class="swiper-button swiper-button-prev"></div>\n                <div class="swiper-button swiper-button-next"></div>\n              </div>\n        </div>\n    </div>'}},{key:"getTemplatePrev",value:function(){return'\n      <div class="swiper-button__inner">\n        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none" class="swiper-button__svg">\n          <path d="M15 18.4248L9 12.4248L15 6.4248" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>\n      </div>'}},{key:"getTemplateNext",value:function(){return'\n    <div class="swiper-button__inner">\n      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none" class="swiper-button__svg">\n        <path d="M9 18.425L15 12.425L9 6.42505" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>\n    </div>'}}]),e}(),eC=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"setSettingSlidesViews",value:function(e,t){switch(e){case"1":t.slidesPerView="auto",t.spaceBetween=10;break;case"2":t.slidesPerView=1,t.breakpoints={480:{slidesPerView:2,spaceBetween:20}};break;case"3":t.slidesPerView=1,t.breakpoints={480:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:3,spaceBetween:20}};break;case"4":t.slidesPerView=1,t.spaceBetween=10,t.breakpoints={480:{slidesPerView:3,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:20}}}}},{key:"getTemplateGalleryButton",value:function(){return'<span class="slider-gallery-button">\n              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n              <path d="M2 9V6.5C2 4.01 4.01 2 6.5 2H9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n              <path d="M15 2H17.5C19.99 2 22 4.01 22 6.5V9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n              <path d="M22 16V17.5C22 19.99 19.99 22 17.5 22H16" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n              <path d="M9 22H6.5C4.01 22 2 19.99 2 17.5V15" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n              </svg>\n            </span>'}},{key:"getDirection",value:function(e){return 0===e?"NONE":e>0?"NEXT":"BACK"}},{key:"zeroBeforeNumber",value:function(e){return e<9?"0".concat(e):e}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t,e),t}(),eO=n(652),eP=n(80);function eL(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function eT(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ej(e,t,n){return t&&eT(e.prototype,t),n&&eT(e,n),e}function eA(e,t,n){return(eA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eI(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n||e):o.value}})(e,t,n||e)}function eI(e){return(eI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eM(e,t){return(eM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var eq=new m,eB=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eM(e,t)}(i,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n,o=eI(i);if(t){var a=eI(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return(e=n)&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)});function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return eL(this,i),(e=n.call(this,t)).arrayAllElements=[],e}return ej(i,[{key:"init",value:function(){var e=this;eA(eI(i.prototype),"init",this).call(this),this.slider.params.parallax&&(this.slideElements=Array.from(this.sliderElement.querySelectorAll(".swiper-slide__picture")),this.slideElements.forEach(function(t){t.setAttribute("data-swiper-parallax","".concat(.75*e.sliderElement.offsetWidth))}))}},{key:"_bindEvents",value:function(){eA(eI(i.prototype),"_bindEvents",this).call(this),this.slider.on("init",this._onInit.bind(this)),this.slider.on("lazyImageReady",this._lazyImageReady.bind(this))}},{key:"_lazyImageReady",value:function(){var e,t;(null===(t=this.slider.params)||void 0===t?void 0:null===(e=t.autoplay)||void 0===e?void 0:e.enabled)&&!this.slider.autoplay.running&&this.slider.autoplay.start()}},{key:"_onInit",value:function(){var e=this;this.arrayAllElements=this.arrayAllElements.concat(this.sliderElement.querySelectorAll("[data-title]")),this.arrayAllElements=this.arrayAllElements.concat(this.sliderElement.querySelectorAll("[data-subtitle]")),this.arrayAllElements=this.arrayAllElements.concat(this.sliderElement.querySelectorAll(".swiper-slide-caption")),this.slider.on("slideNextTransitionStart",this._slideNextTransitionStart.bind(this)),this.slider.on("slidePrevTransitionStart",this._slidePrevTransitionStart.bind(this)),this._hideElements(),eq.subscribe("slider:enter",function(t){if(t===e.sliderWrapper){var n,i;e._animate("next",!0),(null===(i=e.slider.params)||void 0===i?void 0:null===(n=i.autoplay)||void 0===n?void 0:n.enabled)&&e.slider.autoplay.start()}})}},{key:"_slideNextTransitionStart",value:function(){this._animate("next")}},{key:"_slidePrevTransitionStart",value:function(){this._animate("prev")}},{key:"_hideElements",value:function(){this.arrayAllElements.forEach(function(e){O.p8.to(e,{duration:"0.3",x:0,opacity:0})})}},{key:"_animate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next",t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.sliderElement.querySelector(".swiper-slide-active")),n=t.querySelector("[data-title]"),i=t.querySelector("[data-subtitle]"),o=t.querySelector(".swiper-slide-caption");this._hideElements(),O.p8.fromTo(n,{x:"next"===e?10:-10},{ease:"power2.out",delay:"0.6",duration:"0.7",x:0,opacity:1}),O.p8.fromTo(i,{x:"next"===e?10:-10},{ease:"power2.out",delay:"0.7",duration:"0.5",x:0,opacity:1}),O.p8.to(o,{ease:"power2.in",delay:"0.9",duration:"0.7",opacity:1})}}]),i}(function(){function e(t){var n;eL(this,e),this.sliderWrapper=t.item,this.sliderElement=this.sliderWrapper.querySelector(".swiper"),this.slider=null,this.sliderNum=null,this.interleaveOffset=.5,this.settingsCommon={},this.settingsOption=(null==t?void 0:t.settings)||{},this.settingsCustom=(null==t?void 0:t.custom)||{},this.settingsData=this.sliderWrapper.dataset.swiper||(null===(n=this.sliderElement)||void 0===n?void 0:n.dataset.swiper)||{},this.btnPrev=null,this.btnNext=null,this.slides=Array.from(this.sliderElement.querySelectorAll(".swiper-slide"))}return ej(e,[{key:"_setSettingsDefault",value:function(){var e="";if(null===(t=this.settingsOption.autoplay)||void 0===t?void 0:t.delay){var t,n,i,o=null===(i=this.settingsOption.autoplay)||void 0===i?void 0:i.delay;e="animation-duration: ".concat(o,"ms")}var a={},s=this.sliderWrapper.classList.contains("_pagination-counter");return a=(null===(n=this.settingsOption.custom)||void 0===n?void 0:n.paginationFraction)||s?{el:this.sliderWrapper.querySelector(".swiper-pagination"),clickable:!1,type:"fraction",renderFraction:function(){return'\n                      <div class="slider-counter__inner">\n                        <span class="slider-counter__current">\n                            '.concat(this.realIndex+1,'\n                          </span>\n                          <span class="slider-counter__spacer">/</span>\n                          <span class="slider-counter__total">\n                            ').concat(this.slides.length,"\n                          </span>\n                        </div>")}}:{el:this.sliderWrapper.querySelector(".swiper-pagination"),clickable:!0,type:"bullets",renderBullet:function(){return'\n              <span class="swiper-pagination-bullet">\n                <span style="'.concat(e,'"></span>\n              </span>\n              ')}},{modules:[eP.W_,eP.tl,eP.pt,eP.xW,eP.Gk,eP.LG,eP.N1,eP.VS],init:!1,watchSlidesProgress:!0,simulateTouch:this.slides.length>1,speed:700,lazy:{loadPrevNext:!0,loadPrevNextAmount:2},fadeEffect:{crossFade:!0},loop:!0,loopedSlides:2,navigation:{nextEl:this.btnNext,prevEl:this.btnPrev,disabledClass:"is-disabled"},custom:{animation:!1},on:{resize:function(){this.update()}},pagination:a}}},{key:"init",value:function(){var e,t,n,i=null;o.isEmptyObject(this.settingsData)||(i=JSON.parse(this.settingsData));var a=!0;if((null===(e=this.settingsOption)||void 0===e?void 0:e.navigation)===!1&&(a=!1),this.slides.length>1&&a&&this._addTemplateArrowsAndIcons(),(null===(t=this.settingsOption)||void 0===t?void 0:t.custom)&&(this.settingsCustom=null===(n=this.settingsOption)||void 0===n?void 0:n.custom),(null==i?void 0:i.custom)&&this._connectSettingsCustom(null==i?void 0:i.custom),this.settingsCustom.paginationOut){var s=this.sliderWrapper.closest(".slider-wrapper");this.settingsCommon.pagination.el=s.querySelector(".swiper-pagination")}this.settingsCustom.gallery&&(o.insetContent(this.sliderWrapper,eC.getTemplateGalleryButton()),this.sliderWrapper.querySelector(".slider-gallery-button").addEventListener("click",function(e){console.log("⟶ click",e)})),this.slideOnWindow=String(this.sliderWrapper.dataset.slide)||"1",eC.setSettingSlidesViews(this.slideOnWindow,this.settingsCommon),this._connectSettings(this._setSettingsDefault()),this._connectSettings(this.settingsOption),i&&this._connectSettings(i),"scrolling"===this.settingsCommon.effect&&this.sliderElement.classList.add("slider-scrolling"),this.slider=new eO.Z(this.sliderElement,this.settingsCommon),this._bindEvents(),this.slider.init(),this.sliderNum=this.sliderWrapper.querySelector(".slider-counter__current")}},{key:"_addTemplateArrowsAndIcons",value:function(){o.insetContent(this.sliderWrapper,this.settingsCustom.paginationOut?ex.getTemplateArrows():ex.getTemplateArrowsAndPagination()),this.btnPrev=this.sliderWrapper.querySelector(".swiper-button-prev"),this.btnNext=this.sliderWrapper.querySelector(".swiper-button-next"),o.insetContent(this.btnNext,ex.getTemplateNext()),o.insetContent(this.btnPrev,ex.getTemplatePrev())}},{key:"_bindEvents",value:function(){this.slider.on("slideChange",this._onChange.bind(this))}},{key:"_onChange",value:function(){this._setSlideNumber()}},{key:"_setSlideNumber",value:function(){if(this.sliderNum){var e=Number(this.slider.slides[this.slider.activeIndex].dataset.swiperSlideIndex)+1||this.slider.activeIndex+1;this.sliderNum.innerHTML="".concat(e)}}},{key:"sliderDisable",value:function(){this.slider.disable()}},{key:"slideTo",value:function(e,t,n){this.slider.slideTo(e,t,n)}},{key:"_connectSettings",value:function(e){"object"==typeof e&&Object.assign(this.settingsCommon,e)}},{key:"_connectSettingsCustom",value:function(e){"object"==typeof e&&Object.assign(this.settingsCustom,e)}}]),e}());function eD(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var eR=new m,e$=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n)}return e=[{key:"init",value:function(){var e=document.querySelectorAll("[data-slider]");e.length&&e.forEach(function(e){new eB({item:e,settings:{loop:!1,effect:"fade",pagination:!1}}).init()});var t=document.querySelectorAll(".layouts-examles__slider");if(t.length&&t.forEach(function(e){new eB({item:e,settings:{loop:!1,speed:700,spaceBetween:32,pagination:!1,breakpoints:{768:{width:560},1023:{width:840},1400:{width:1140,spaceBetween:30}}}}).init()}),!o.isDesktop()){var n=document.querySelectorAll(".concept-gallery__slider");n.length&&n.forEach(function(e){new eB({item:e,settings:{loop:!1,speed:700,spaceBetween:16,slidesPerView:1,pagination:!1,breakpoints:{768:{slidesPerView:2,spaceBetween:24},1024:{slidesPerView:3,spaceBetween:32}}}}).init()})}var i=document.querySelectorAll(".progress-slider");i.length&&(i.forEach(function(e){new eB({item:e,settings:{slidesPerView:1,slidesPerGroup:1,spaceBetween:0,speed:750,centered:!0,preloadImages:!1,lazy:!0,loop:!1,pagination:!1,breakpoints:{768:{slidesPerView:2,slidesPerGroup:2},1024:{slidesPerView:3,slidesPerGroup:3}}}}).init()}),eR.publish("initProgressSlider"));var a=document.querySelectorAll(".near-slider");a.length&&a.forEach(function(e){new eB({item:e,settings:{slidesPerView:1,spaceBetween:16,speed:750,preloadImages:!1,lazy:!0,loop:!1,pagination:!1,breakpoints:{490:{slidesPerView:2,spaceBetween:24},768:{slidesPerView:3,spaceBetween:32},1540:{slidesPerView:5,spaceBetween:32}}}}).init()});var s=document.querySelectorAll(".news-slider");s.length&&s.forEach(function(e){new eB({item:e,settings:{slidesPerView:1,spaceBetween:16,speed:750,preloadImages:!1,lazy:!0,loop:!1,pagination:!1,breakpoints:{490:{slidesPerView:2,spaceBetween:24},768:{slidesPerView:2,spaceBetween:24},1540:{slidesPerView:4,spaceBetween:32}}}}).init()});var r=document.querySelectorAll(".main-slider");r.length&&(r.forEach(function(e){new eB({item:e,settings:{loop:!0,speed:1e3,watchSlidesProgress:!0,effect:"fade",dots:!0,autoplay:{delay:6e3,enabled:!0,disableOnInteraction:!1}}}).init()}),eR.subscribe("preloader:end",function(){setTimeout(function(){document.querySelectorAll(".main-slider .swiper-slide").forEach(function(e){e.classList.remove("is-hidden")})},300),setTimeout(function(){var e=document.querySelector(".main-slider__wrap .main-slider__logo"),t=document.querySelector(".main-slider__wrap .main-slider__tags"),n=document.querySelector(".main-slider__wrap .swiper-navigation");e&&(e.style.opacity=1),n&&(n.style.opacity=1),t&&(t.style.opacity=1)},900)}));var l=document.querySelector(".advantages-slider");l&&new eB({item:l,settings:{loop:!0,slidesPerView:1,spaceBetween:16,pagination:!1,breakpoints:{768:{slidesPerView:3,slidesPerGroup:1,spaceBetween:48}}}}).init()}}],t=[{key:"init",value:function(){new n().init()}}],e&&eD(n.prototype,e),t&&eD(n,t),n}(),ez=function(e,t){var n=function(t){var n="";return t.caption&&(n='<div class="slide-caption"><span class="slide-caption__name">'.concat(t.caption,'</span> <span class="slide-caption__count">').concat(t.count," / ").concat(e.length,"</span></div>")),'\n      <div class="swiper-slide">\n        <div class="slide-inner">\n          <div class="swiper-zoom-container">\n            <img class="slide-image" loading="lazy" src="'.concat(t.src,'" alt="#"/>\n            ').concat(n,'<div class="swiper-lazy-preloader"></div>\n          </div>\n        </div>\n      </div>')},i="";return e.forEach(function(e){i+=n(e)}),'<div class="popup-gallery mfp-hide" id="'.concat(t,'">\n  <div class="popup-content">\n    <div class="slider-gallery-wrapper is-hide">\n      <div class="slider-gallery _pagination-counter">\n        <div class="swiper">\n          <div class="swiper-wrapper">\n            ').concat(i,"\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>")};function eH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function eN(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function eW(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function eF(e,t,n){return t&&eW(e.prototype,t),n&&eW(e,n),e}function eV(e,t,n){return(eV="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eZ(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n||e):o.value}})(e,t,n||e)}function eZ(e){return(eZ=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eG(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eU(e,t)}function eU(e,t){return(eU=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eY(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i,o=eZ(e);if(t){var a=eZ(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return(n=i)&&("object"==(n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof n)?n:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)}}var eK=new m,eJ=function(){function e(t){eN(this,e),this.wrapper=t.item,this.selector=t.selector||"[data-gallery-item]",this.template=t.template,this.id=t.galleryId||"gallery-base",this.data=t.data||[],this.needRemovePopup=t.remove||!0}return eF(e,[{key:"init",value:function(){this._subscribe(),this._setData(),this._bindEvents()}},{key:"_subscribe",value:function(){eK.subscribe("closeGalleryPopup",this._remove)}},{key:"_setData",value:function(){var e,t=this;this.data=((function(e){if(Array.isArray(e))return eH(e)})(e=this.wrapper.querySelectorAll(this.selector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return eH(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eH(e,t)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(e){var n,i,o,a,s,r,l,c,u,h;return{image:e,id:e.dataset.popupId||t.id,src:(null===(n=e.dataset)||void 0===n?void 0:n.src)||e.src,caption:(null===(i=e.dataset)||void 0===i?void 0:i.title)||!1,width:(null===(a=e.dataset)||void 0===a?void 0:null===(o=a.size)||void 0===o?void 0:o.split(",")[0])?(null===(r=e.dataset)||void 0===r?void 0:null===(s=r.size)||void 0===s?void 0:s.split(",")[0])+"px":"100%",height:(null===(c=e.dataset)||void 0===c?void 0:null===(l=c.size)||void 0===l?void 0:l.split(",")[1])?(null===(h=e.dataset)||void 0===h?void 0:null===(u=h.size)||void 0===u?void 0:u.split(",")[1])+"px":"100vh"}})}},{key:"_bindEvents",value:function(){var e=this;this.data.forEach(function(t){t.image.addEventListener("click",e._makeOpen.bind(e))})}},{key:"_makeOpen",value:function(e){var t=this;e.preventDefault();var n=e.target,i=this.data.length?this.data[0].id:this.id;this.openPopup=document.querySelector("#".concat(i)),this.openPopup?this._show(i):(this._create(i),this._show(i),setTimeout(function(){t._setElements(),t._initSlider(),t._toSlide(t._setIndex(n))},200)),eK.publish("openGalleryPopup")}},{key:"_create",value:function(e){this.template&&document.body.insertAdjacentHTML("beforeend",this.template(this.data,e))}},{key:"_show",value:function(e){window.Site.Modules.Popup.showPopup({items:{src:"#".concat(e)},type:"inline"},"gallery")}},{key:"_setElements",value:function(){var e=document.querySelector(".mfp-content");this.gallerySlider=e.querySelector(".slider-gallery"),this.gallerySliderWrap=e.querySelector(".slider-gallery-wrapper")}},{key:"_initSlider",value:function(){var e=this.data.length;this.sliderBase=new eB({item:this.gallerySlider,settings:{effect:"linear",mousewheel:!0,speed:500,zoom:!1,loop:e>1,keyboard:!0}}),this.sliderBase.init()}},{key:"_toSlide",value:function(e){this._preloaderShow();var t,n=this.gallerySlider.querySelector(".swiper").swiper;null===(t=this.sliderBase)||void 0===t||t.settingsCommon.loop,n.slideTo(e,0,!1),this._preloaderHide()}},{key:"_preloaderShow",value:function(){this.gallerySliderWrap.classList.remove("is-show")}},{key:"_preloaderHide",value:function(){var e=this;setTimeout(function(){e.gallerySliderWrap.classList.add("is-show")},300)}},{key:"_remove",value:function(e){if(this.needRemovePopup){var t=e.items[0].data.src,n=document.querySelector(t);n&&o.removeElement(n)}}},{key:"_setIndex",value:function(e){var t=0;return this.data.forEach(function(n,i){n.image===e&&(t=i)}),t}}]),e}(),eX=function(e){eG(n,e);var t=eY(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return eN(this,n),t.call(this,e)}return eF(n,[{key:"init",value:function(){this._subscribe(),this._bindEvents()}},{key:"_subscribe",value:function(){eV(eZ(n.prototype),"_subscribe",this).call(this)}},{key:"_bindEvents",value:function(){this.wrapper.addEventListener("click",this._makeOpen.bind(this))}}],[{key:"init",value:function(){var e=document.querySelectorAll("[data-gallery-base]");e.length&&e.forEach(function(e){var t=e.dataset.json||[];new n({item:e,template:ez,data:JSON.parse(t)}).init()})}}]),n}(eJ),eQ=function(e){eG(n,e);var t=eY(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return eN(this,n),t.call(this,e)}return eF(n,[{key:"init",value:function(){this._subscribe(),this._bindEvents()}},{key:"_subscribe",value:function(){eV(eZ(n.prototype),"_subscribe",this).call(this)}},{key:"_bindEvents",value:function(){this.wrapper.addEventListener("click",this._makeOpen.bind(this))}}],[{key:"init",value:function(){eK.subscribe("initProgressSlider",function(){var e=document.querySelectorAll("[data-gallery-progress]");e.length&&e.forEach(function(e){var t=e.dataset.json;new n({item:e,template:ez,data:JSON.parse(t)}).init()})})}}]),n}(eJ),e0=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"ru",value:function(){return{errorLoading:function(){return"Результат не может быть загружен."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Пожалуйста, удалите "+t+" символ";return t>=2&&t<=4?n+="а":t>=5&&(n+="ов"),n},inputTooShort:function(e){return"Пожалуйста, введите "+(e.minimum-e.input.length)+" или более символов"},loadingMore:function(){return"Загружаем ещё ресурсы…"},maximumSelected:function(e){var t="Вы можете выбрать "+e.maximum+" элемент";return e.maximum>=2&&e.maximum<=4?t+="а":e.maximum>=5&&(t+="ов"),t},noResults:function(){return"Ничего не найдено"},searching:function(){return"Поиск…"},removeAllItems:function(){return"Удалить все елементы"}}}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t,e),t}();n(686);var e1=n(755);function e2(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var e3=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.$element=e1(e.element),this.element=e.element,this.isSingle=this.$element.hasClass("j-select-single"),this.isMultiple=this.$element.hasClass("j-select-multiple"),this.right=this.$element.hasClass("select-right"),this.data=this.$element.data("json")}return e=[{key:"init",value:function(){this.options={minimumResultsForSearch:1/0,dropdownCssClass:":all:",templateResult:this._formatState,cashe:!0,width:"100%",multiple:this.isMultiple,closeOnSelect:!this.isMultiple,allowClear:!1,dropdownAutoWidth:!0,dropdownParent:this.$element.parent(),language:e0.ru(),data:this.data?this.data:null,escapeMarkup:function(e){return e}},this.$element.select2(this.options),this._bindEvents(),this.getNumberSelection(),this.setPlaceholder()}},{key:"_bindEvents",value:function(){this.$element.on("select2:open",this._onOpen.bind(this)),this.$element.on("select2:selecting",this._onSelecting.bind(this)),this.$element.on("select2:select",this._onSelect.bind(this)),this.$element.on("select2:unselect",this._onUnSelect.bind(this)),this.$element.on("select2:close",this._onClose.bind(this))}},{key:"_formatState",value:function(e){if(!e.id)return e.text;var t=e.status?'<span class="select2-item-state">'.concat(e.status,"</span>"):"";return e1('<div class="select2-item">\n            <span class="select2-item-text"> '.concat(e.text," </span>\n            ").concat(t,"\n            </div>"))}},{key:"_onOpen",value:function(){}},{key:"_onSelecting",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$element.find('option[value="all"]').prop("selected",t)}},{key:"_onSelect",value:function(e){this.getNumberSelection(),this.checkOptions();var t=e.params.data;this.checkOptions(t);var n="";void 0!==t.$element&&(n=t.$element.dataset.link),void 0!==n&&""!==n&&(document.location.href=n)}},{key:"_onUnSelect",value:function(){this.checkOptions(),this.getNumberSelection()}},{key:"_onClose",value:function(){this.getNumberSelection()}},{key:"getNumberSelection",value:function(){var e=this.$element.select2("data").length;0===e&&this.setPlaceholder(),e<3||this.$element.next("span.select2").find("ul").html('<li class="select2-selection__choice__display">Выбрано: '.concat(e,"</li>"))}},{key:"setPlaceholder",value:function(){var e=this.$element.data("placeholder"),t=this.isMultiple?this.$element.next("span.select2").find("ul"):this.$element.next("span.select2").find(".select2-selection__rendered"),n=this.$element.find("option:selected"),i=this.$element.find('option[value="all"]:selected');1!==i.length&&""!==e&&e&&t.html("".concat(e)),i.length||n.length||(this._onSelecting(this,!0),t.html("<li>".concat(e,"</li>")))}},{key:"checkOptions",value:function(e){var t=this.element.querySelectorAll("option"),n=[];if(e&&"all"===e.element.getAttribute("value")){this.getValue("all"),this.$element.select2("close");return}t.forEach(function(e){e.selected&&("all"===e.getAttribute("value")&&(e.selected=!1),n.push(e))}),0===n.length&&(this.getValue("all"),this.$element.select2("close"))}},{key:"destroy",value:function(){this.$element.select2("destroy")}},{key:"disable",value:function(){this.$element.prop("disabled",!0)}},{key:"clearingfilter",value:function(){this.$element.val(null).trigger("change")}},{key:"getValue",value:function(e){this.$element.val(e).trigger("change")}},{key:"checkInit",value:function(){return this.$element.hasClass("select2-hidden-accessible")}}],t=[{key:"init",value:function(){var e=document.querySelectorAll(".j-select");e.length&&e.forEach(function(e){new n({element:e}).init()})}}],e&&e2(n.prototype,e),t&&e2(n,t),n}();n(334);var e6=n(755);function e5(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var e9=new m,e8=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.rangeSlider={}}return e=[{key:"initRange",value:function(e){this.$wrapper=e6(e.element),this.outerOptions=e.outerOptions||this.$wrapper.find(".j-form-range-base").data(),this._setOptions(),this._initRangeSlider(),this._getElements(),this._bindEvents(),this._subscribes(),this._initDigit()}},{key:"_setOptions",value:function(){var e=this;this.options={skin:"round",type:this.outerOptions.type,min:this.outerOptions.min,max:this.outerOptions.max,from:this.outerOptions.from,to:this.outerOptions.to,step:this.outerOptions.step,min_interval:this.outerOptions.step,digit:this.outerOptions.digit||!1,disable:this.outerOptions.disable||!1,validate:this.outerOptions.validate,hide_from_to:!0,hide_min_max:!0,prettify_enabled:!0,onStart:function(t){e9.publish("rangesliderStart",t,e)},onChange:function(t){e._updateInputs(t),e9.publish("rangesliderChange",t)},onFinish:function(e){e9.publish("rangesliderFinish",e)}},this.startOptions=this.options,this.isNumberShort="number_short"===this.options.validate}},{key:"_initRangeSlider",value:function(){this.$rangeSlider=this.$wrapper.find(".j-form-range-base"),this.$rangeSlider.ionRangeSlider(this.options)}},{key:"_getElements",value:function(){this.$inputs=this.$wrapper.find(".form-range__input"),this.$inputFrom=this.$inputs.first(),this.$inputTo="double"===this.options.type?this.$inputs.last():null,this.slider=this.$rangeSlider.data("ionRangeSlider"),this.id=this.slider.input.id,this.rangeSlider[this.id]=this.slider,this.$inputOutMin=this.$wrapper.find(".j-form-range-output-min"),this.$inputOutMax=this.$wrapper.find(".j-form-range-output-max")}},{key:"_subscribes",value:function(){e9.subscribe("resetFilter",this._reset.bind(this))}},{key:"_bindEvents",value:function(){var e=this;this.$inputFrom.on("change",this._onInputFromChange.bind(this)),"double"===this.options.type&&this.$inputTo.on("change",this._onInputToChange.bind(this)),this.$inputs.each(function(t,n){if(e.isNumberShort){var i=e6(n),o=i.val();i.val(e._getNumberDecimal(o))}n.addEventListener("input",function(t){var n=e6(t.target),i=n.val();e._validate(n),e._setDigit(n,i)})})}},{key:"_onInputFromChange",value:function(e){var t=e.target.name.slice(0,-5),n=this._getNumber(e6(e.target).val()),i=this.slider.result.to,o="number_decimal"===this.options.validate?1:0,a="number"===this.options.validate,s="single"===this.options.type?0:this.options.step;a||(n=this._getNumberThousands(n)),n<this.options.min?n=this.options.min:n>i&&(n=i-s),n=n.toFixed(o),e6(e.target).val(a?n:this._getNumberDecimal(n)),this._getOutputInputs("".concat(t,"-from"),n),this._setDigit(e6(e.target),n),this._update({from:n})}},{key:"_onInputToChange",value:function(e){var t=e.target.name.slice(0,-5),n=this._getNumber(e6(e.target).val()),i=this.slider.result.from,o="number_decimal"===this.options.validate?1:0,a="number"===this.options.validate;a||(n=this._getNumberThousands(n)),n<=i?n=i+this.options.step:n>this.options.max&&(n=this.options.max),n=n.toFixed(o),e6(e.target).val(a?n:this._getNumberDecimal(n)),this._getOutputInputs("".concat(t,"-to"),n),this._setDigit(e6(e.target),n),this._update({to:n})}},{key:"_validate",value:function(e){var t=this.options.validate;if(t)switch(t){case"number":this._validateNumber(e);break;case"number_decimal":this._validateNumberDecimal(e)}}},{key:"_validateNumber",value:function(e){var t=e.val();t=t.replace(/\s/g,""),e.val(/\d*/.exec(t))}},{key:"_validateNumberDecimal",value:function(e){var t=e.val();e.val(/\d*\.?\d?/g.exec(t))}},{key:"_getNumberDecimal",value:function(e){return(e/1e6).toFixed(1)}},{key:"_getNumberThousands",value:function(e){return 1e6*e}},{key:"_update",value:function(e){this.slider.update(e)}},{key:"_updateInputs",value:function(e){var t=this.$rangeSlider[0].id;this.$inputFrom.val(this.isNumberShort?this._getNumberDecimal(e.from):e.from),"price"===t&&this._getOutputInputs("".concat(t,"-from"),this._getNumber(e.from_pretty)),this._setDigit(this.$inputFrom,e.from),"double"===this.options.type&&(this.$inputTo.val(this.isNumberShort?this._getNumberDecimal(e.to):e.to),"price"===t&&this._getOutputInputs("".concat(t,"-to"),this._getNumber(e.to_pretty)),this._setDigit(this.$inputTo,e.to))}},{key:"_reset",value:function(){this.slider.input.classList.contains("is-not-search")||("double"===this.options.type?(this.startOptions.from=this.startOptions.min,this.startOptions.to=this.startOptions.max,this.$inputFrom[0].setAttribute("value",this.startOptions.from),this.$inputTo[0].setAttribute("value",this.startOptions.to),this.$inputFrom.val(this.startOptions.from),this.$inputTo.val(this.startOptions.to)):(this.startOptions.from=this.startOptions.max,this.$inputFrom[0].setAttribute("value",this.startOptions.max),this.$inputFrom.val(this.startOptions.max)),this.slider.update(this.startOptions),this._updateInputs(this.startOptions))}},{key:"_initDigit",value:function(){var e=this;this.$inputs.each(function(t,n){e.options.digit&&e._setDigit(e6(n))})}},{key:"_setDigit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.options.digit){var n=t||e.val(),i=this._getNumber(n);e.val(o.convertToDigit(i))}}},{key:"_getNumber",value:function(e){return e?o.convertToNumber(e):0}},{key:"_getOutputInputs",value:function(e,t){"price-from"===e&&this.$inputOutMin.val(t),"price-to"===e&&this.$inputOutMax.val(t)}}],t=[{key:"init",value:function(){var e=document.querySelectorAll(".form-range:not(.form-range--mortgage)");e&&e.forEach(function(e){new n().initRange({element:e})})}}],e&&e5(n.prototype,e),t&&e5(n,t),n}();function e4(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var e7=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.header=e,this.headerMain=document.querySelector(".header"),this.innerElement=this.header.querySelector(".header__inner"),this.height=this.header.offsetHeight,this.heightBase=this.innerElement.offsetHeight,this.scrollPosition=0,this.classes={show:"is-showed",hide:"is-hidden",animate:"is-animate",fix:"is-fixed",themeTransparent:"is-theme--transparent"},this.wrapperSite=document.querySelector(".wrapper"),this._changeState=this._changeState.bind(this),this.transitionTime=300,this.isFixedDefault=document.querySelector(".main-slider")||!1}return e=[{key:"init",value:function(){this._checkTop(),this._initState(),this._bindEvents()}},{key:"_checkTop",value:function(){if(this.isFixedDefault)return document.querySelector("html").classList.add("_main-page"),this.headerMain.classList.add(this.classes.themeTransparent),!1;o.isDesktop()&&(this.wrapperSite.style.paddingTop=this.height+"px")}},{key:"_initState",value:function(){!this.header.dataset.static&&(this.scrollPosition=o.getScrollTop(),this._isScrollInTarget()||this.header.classList.add(this.classes.fix,this.classes.hide))}},{key:"_bindEvents",value:function(){var e=this;window.addEventListener("scroll",(0,C.D)(6,this._changeState)),["resize","orientationchange"].forEach(function(t){window.addEventListener(t,function(){e.height=e.header.offsetHeight,e.heightBase=e.innerElement.offsetHeight,e._changeState()})})}},{key:"_changeState",value:function(){if(!this.header.dataset.static){this.scrollPosition=o.getScrollTop();var e=this.classes,t=e.animate,n=e.fix,i=e.hide,a=e.show;this._isScrollUp()&&(window.scrollY>10&&(this.header.classList.add(a,n,t),this.header.classList.remove(i)),this._isScrollInTarget(-1*this.height)&&this.header.classList.remove(n,t,i,a)),this._isScrollDown()&&window.scrollY>10&&(this.header.classList.add(i,t),this.header.classList.add(a,n)),this.prevScrollPosition=this.scrollPosition}}},{key:"_isScrollUp",value:function(){return this.scrollPosition-this.prevScrollPosition<-1}},{key:"_isScrollDown",value:function(){return this.scrollPosition>this.height&&this.scrollPosition-this.prevScrollPosition>1}},{key:"_isScrollInTarget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.scrollPosition<100)return!0;if(!this.targetElement)return!1;var t=this.targetElement.offsetHeight-e;return t<0&&(t=0),t>this.scrollPosition&&this.scrollPosition}}],t=[{key:"init",value:function(){var e=document.querySelector(".header");e&&new n(e).init()}}],e&&e4(n.prototype,e),t&&e4(n,t),n}(),te=n(765),tt=n.n(te);n(688);var tn=n(755);function ti(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var to=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.form=e,this.form&&(this.formValidate="false"!==this.form.dataset.validate,this.constraints=null,this.inputs=this.form.querySelectorAll(".form-input__input, .form-textarea__textarea"),this.BtnSubmit=this.form.querySelector("button"),this.inputs=Array.from(this.inputs).filter(function(e){return"hidden"!==e.type&&""!==e.getAttribute("notvalidate")}))}return e=[{key:"init",value:function(){this.initPhoneMask(),this.inputFocus(),this.formValidate&&(this.setOptions(),this.checkInputAttributes(),this.bindEvents())}},{key:"initPhoneMask",value:function(){tn(this.form).find("input[type=tel]").mask("+7(A00)000-00-00",{translation:{A:{pattern:/[0-69]/}}})}},{key:"checkRequiredEmail",value:function(){var e=!1;return(this.inputs.forEach(function(t){"email"===t.type&&t.required&&(e=!0)}),e)?{message:"^Поле обязятельно для заполнения"}:null}},{key:"checkInputAttributes",value:function(){this.inputs.forEach(function(e){e.required&&e.removeAttribute("required")})}},{key:"setOptions",value:function(){this.constraints={email:{presence:this.checkRequiredEmail(),email:{message:"^Введите корректный e-mail"}},phone:{presence:{message:"^Поле обязятельно для заполнения"},length:{minimum:16,tooShort:function(e){return"^Минимум 10 цифр, сейчас ".concat(e.replace(/[^\d]/g,"").length-1)}}},message:{length:{minimum:5,message:"^Минимум 5 символов"}},name:{presence:{message:"^Поле обязятельно для заполнения"},length:{minimum:2,maximum:20,message:"^Минимум 2 символа"},format:{pattern:/^[a-zA-Zа-яёА-ЯЁs\s]+$/i,message:"^Имя может содержать только буквы"}},agreement:{presence:{message:"^Для продолжения необходимо согласие с условиями"},inclusion:{within:[!0],message:"^Для продолжения необходимо согласие с условиями"}}}}},{key:"inputFocus",value:function(){var e=document.querySelectorAll(".form-input__label, .form-textarea__label");function t(e){var t=e.target.parentNode;t.classList.add("is-focused"),t.classList.add("is-filled")}function n(e){var t=e.target.parentNode,n=e.target;t.classList.remove("is-focused"),""===n.value.trim()&&t.classList.remove("is-filled")}e.length&&e.forEach(function(e){var i=e.previousElementSibling,o=e.parentNode;i.value&&""!==i.value.trim()&&o.classList.add(".is-filled"),i.addEventListener("focus",t),i.addEventListener("blur",n)})}},{key:"bindEvents",value:function(){var e=this;this.inputs.forEach(function(t){t.addEventListener("change",function(){var n=tt()(e.form,e.constraints)||{};e.showErrorsForInput(t,n[t.name]),e._validate()}),t.addEventListener("keyup",function(){var n=tt()(e.form,e.constraints)||{};""!==t.value.trim()&&(e.showErrorsForInput(t,n[t.name]),e._validate())})})}},{key:"_validate",value:function(){var e=this,t=!0;this.inputs.forEach(function(n){var i=e.validateInput(n);void 0===i||i.result||(t=!1)}),this.BtnSubmit&&t&&this.BtnSubmit.classList.remove("is-disabled")}},{key:"validateInput",value:function(e){var t=e.closest(".form-input");if(t||(t=e.closest(".form__consent")),t)return t.classList.contains("has-error")?{result:!1}:{result:!0}}},{key:"showErrorsForInput",value:function(e,t){var n=this,i=e.closest(".form-input");if(i||(i=e.closest(".form__consent")),i){var o=i.querySelector(".form-input__messages")||i.querySelector(".messages");this.resetFormGroup(i),t?(i.classList.add("has-error"),t.forEach(function(e){n.addError(o,e)}),this.BtnSubmit.classList.add("is-disabled")):i.classList.add("has-success")}}},{key:"resetFormGroup",value:function(e){e.classList.remove("has-error"),e.classList.remove("has-success");var t=e.querySelectorAll(".help-block.error");t.length&&t.forEach(function(e){e.parentNode.removeChild(e)})}},{key:"addError",value:function(e,t){var n=document.createElement("p");n.classList.add("help-block"),n.classList.add("error"),n.innerText=t,e.appendChild(n)}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll("[data-validate]");t.length&&t.forEach(function(e){new n(e).init()})}}],e&&ti(n.prototype,e),t&&ti(n,t),n}();function ta(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ts=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.container=e,this.labelElement=this.container.querySelector("[data-photo-label]"),this.inputElem=this.container.querySelector("[data-photo-input]"),this.buttonElement=this.container.querySelector("[data-photo-button]"),this.buttonTextElement=this.container.querySelector("[data-photo-text]"),this.reader=new FileReader,this.fileName=null,this.fileSrc=null,this.isUploaded=!1,this.onInputChange=this.onInputChange.bind(this),this.onUploadSuccess=this.onUploadSuccess.bind(this),this.onUploadError=this.onUploadError.bind(this),this.onButtonClick=this.onButtonClick.bind(this),this.onLabelClick=this.onLabelClick.bind(this),this.fileExtension=["jpg","jpeg","png"]}return e=[{key:"init",value:function(){this.inputElem.addEventListener("change",this.onInputChange),this.buttonElement.addEventListener("click",this.onButtonClick),this.labelElement&&this.labelElement.addEventListener("click",this.onLabelClick),this.reader.addEventListener("load",this.onUploadSuccess)}},{key:"onInputChange",value:function(){var e=this;if(!this.isUploaded){var t=this.inputElem.files[0];this.fileName=t.name.toLowerCase(),this.fileExtension.some(function(t){return e.fileName.endsWith(t)})?this.reader.readAsDataURL(t):this.onUploadError()}}},{key:"onUploadSuccess",value:function(){this.buttonElement.classList.add("_cross"),this.buttonElement.classList.remove("_invalid"),this.inputElem.classList.remove("_invalid"),this.buttonTextElement.textContent=this.fileName,this.fileSrc=this.reader.result,this.isUploaded=!0}},{key:"onUploadError",value:function(){this.reset(),this.inputElem.classList.add("_invalid"),this.buttonElement.classList.add("_invalid"),console.warn("Неверный формат файла")}},{key:"onButtonClick",value:function(e){this.isUploaded&&(e.preventDefault(),this.reset())}},{key:"onLabelClick",value:function(e){this.isUploaded&&e.preventDefault()}},{key:"reset",value:function(){this.buttonElement.classList.remove("_cross"),this.inputElem.value="",this.buttonTextElement.textContent="Выбрать фото",this.fileName=null,this.fileSrc=null,this.isUploaded=!1}},{key:"resetHard",value:function(){this.reset(),this.inputElem.classList.remove("_invalid"),this.buttonElement.classList.remove("_invalid")}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll("[data-photo]");t.length&&t.forEach(function(e){new n(e).init()})}}],e&&ta(n.prototype,e),t&&ta(n,t),n}();function tr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tl=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.kitWrap=e,this.bodyNode=document.body,this.themeSwitcherElem=this.kitWrap.querySelector(".switch-appearance"),this.themeMode="light",this.navItems=this.kitWrap.querySelectorAll(".kit-nav__item"),this.rightItems=this.kitWrap.querySelectorAll(".kit-content__item"),this.dropdownElems=this.kitWrap.querySelectorAll("[data-dropdown-toggle]")}return e=[{key:"init",value:function(){this._themeDetect(),this._bindEvents(),this.bodyNode.classList.add("page-kit"),this._initPrism(),this._initClipboard(),this._initCloseSidebar(),this._checkDropdownOnActiveElement()}},{key:"_bindEvents",value:function(){var e=this;this.themeSwitcherElem&&this.themeSwitcherElem.addEventListener("click",this._themeToggle.bind(this)),this.navItems.forEach(function(t){t.addEventListener("click",e._setHash.bind(e))}),this.dropdownElems.length&&this.dropdownElems.forEach(function(t){t.addEventListener("click",e._toggleDropdown.bind(e))})}},{key:"_initPrism",value:function(){Prism.plugins.NormalizeWhitespace.setDefaults({"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0})}},{key:"_initCloseSidebar",value:function(){var e=this,t=document.querySelector(".kit-sidebar__head-toggle"),n="default";"collapsed"===localStorage.getItem("layout-style")&&(n="collapsed",this.kitWrap.setAttribute("data-layout-style",n)),t&&t.addEventListener("click",function(){n="default"===n?"collapsed":"default",e.kitWrap.setAttribute("data-layout-style",n),localStorage.setItem("layout-style",n)})}},{key:"_initClipboard",value:function(){var e=document.querySelectorAll("[data-clipboard]");e.length<1||e.forEach(function(e){var t=e.querySelector("[data-clipboard-tooltip]"),n=new ClipboardJS(e,{target:function(e){return e.nextElementSibling}});n.on("success",function(){t.innerHTML="Скопировано!"}),n.on("error",function(){t.innerHTML="Ошибка!"})})}},{key:"_checkDropdownOnActiveElement",value:function(){this.dropdownElems.forEach(function(e){var t=e.nextElementSibling;t.querySelectorAll(".kit-nav__dropdown-link").forEach(function(e){e.firstChild.classList.contains("is-active")&&t.previousElementSibling.classList.add("is-open")})})}},{key:"_toggleDropdown",value:function(e){var t=e.target,n=t.classList.contains("is-open");this.dropdownElems.forEach(function(e){e.classList.remove("is-open")}),n?t.classList.remove("is-open"):t.classList.add("is-open")}},{key:"_setHash",value:function(e){var t=(e.target.dataset.tabOpener?e.target:e.target.parentNode).dataset.tabOpener;t&&this.setHash(t),o.isDesktop()||this._menuToggle()}},{key:"_themeDetect",value:function(){var e=localStorage.getItem("theme-appearance");e?"light"===e?this._setThemeLight():this._setThemeDark():(localStorage.setItem("theme-appearance","light"),this._setThemeLight())}},{key:"_themeToggle",value:function(){"light"===this.themeMode?this._setThemeDark():this._setThemeLight()}},{key:"_setThemeLight",value:function(){this.themeMode="light",localStorage.setItem("theme-appearance",this.themeMode),this.kitWrap.setAttribute("data-theme",this.themeMode)}},{key:"_setThemeDark",value:function(){this.themeMode="dark",localStorage.setItem("theme-appearance",this.themeMode),this.kitWrap.setAttribute("data-theme",this.themeMode)}},{key:"getHash",value:function(){return window.location.hash.replace(RegExp("^#","u"),"")}},{key:"setHash",value:function(e){return window.location.hash="#"+e}},{key:"isBreakpoint",value:function(e,t){return window.innerWidth>=e&&window.innerWidth<t}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelector(".kit-wrapper");t&&new n(t).init()}}],e&&tr(n.prototype,e),t&&tr(n,t),n}();function tc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tu=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.ymaps=window.ymaps}return tc(t.prototype,[{key:"init",value:function(e){this.geoObjectCollection=e,this.create()}},{key:"create",value:function(){var e=this.ymaps.templateLayoutFactory.createClass('<div class="yandex-map__cluster">{{ properties.geoObjects.length }}</div>');this.clusterer=new this.ymaps.Clusterer({clusterIconLayout:e,groupByCoordinates:!1,gridSize:128,zoomMargin:50,hasBalloon:!1,minClusterSize:5,clusterIconShape:{type:"Circle",coordinates:[0,0],radius:40}});var t=this.geoObjectCollection.toArray().filter(function(e){return"Placemark"===e.options.get("type")&&!e.options.get("data").not_cluster});this.clusterer.add(t),this.geoObjectCollection.add(this.clusterer)}},{key:"addGeoObjectToClusterer",value:function(e){this.clusterer.add(e)}},{key:"removeGeoObjectToClusterer",value:function(e){this.clusterer.remove(e)}}]),e&&tc(t,e),t}(),th=n(755);function td(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tp=new m,tf=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n)}return e=[{key:"init",value:function(e,t,n){this.overlay=document.querySelector(".j-yandex-map-overlay"),this.map=e,this.settings=t,this.ymaps=n,this.body=document.querySelector("body"),this.header=document.querySelector(".header"),this._initZoom(),this._initScrollZoom(),this._addFullScreenControl(),this._bindEvents(),t.disableMobileDrag&&this._disableMobileDrag()}},{key:"_initZoom",value:function(){this.settings.zoomControl&&(this.settings.customZoomControl?this._initCustomZoomControl():this.map.controls.add("zoomControl"))}},{key:"_initScrollZoom",value:function(){this.settings.zoomScroll?this.map.behaviors.enable("scrollZoom"):this.map.behaviors.disable("scrollZoom")}},{key:"_addFullScreenControl",value:function(){this.settings.fullScreenControl&&(this.settings.customFullScreenControl?this._initCustomFullscreenControl():this.map.controls.add("fullscreenControl"))}},{key:"_bindEvents",value:function(){var e=this;["resize","orientationchange"].forEach(function(t){window.addEventListener(t,e._setZoomControlPosition.bind(e))})}},{key:"_disableMobileDrag",value:function(){var e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};(e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows())&&this.map.behaviors.disable("drag")}},{key:"_initCustomZoomControl",value:function(){var e=this.ymaps;this.zoomControl=new e.control.ZoomControl({options:{layout:this._createLayoutZoomControl()}}),this.map.controls.add(this.zoomControl,{float:"none"}),this._setZoomControlPosition()}},{key:"_createLayoutZoomControl",value:function(){var e,t=this.ymaps,n=this.map.container._parentElement.id,i=t.templateLayoutFactory.createClass((e={mapId:n},'\n  <div class="yandex-map__zoom-wrapper">\n    <div class="yandex-map__zoom-button yandex-map__zoom-button--zoom-in" id="'.concat(e.mapId,'-zoom-in">\n        <svg width="13" height="13" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 12"><path d="M7 5h4a1 1 0 0 1 0 2H7v4a1 1 0 0 1-2 0V7H1a1 1 0 0 1 0-2h4V1a1 1 0 0 1 2 0v4z"/></svg>\n    </div>\n    <div class="yandex-map__zoom-button yandex-map__zoom-button--zoom-out" id="').concat(e.mapId,'-zoom-out">\n          <svg width="13" height="2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 2"><path d="M7 0h4a1 1 0 1 1 0 2H1a1 1 0 1 1 0-2h6z"/></svg>\n    </div>\n    </div>')),{build:function(){i.superclass.build.call(this),this.zoomInCallback=t.util.bind(this.zoomIn,this),this.zoomOutCallback=t.util.bind(this.zoomOut,this),th("#".concat(n,"-zoom-in")).bind("click",this.zoomInCallback),th("#".concat(n,"-zoom-out")).bind("click",this.zoomOutCallback)},clear:function(){th("#".concat(n,"-zoom-in")).unbind("click",this.zoomInCallback),th("#".concat(n,"-zoom-out")).unbind("click",this.zoomOutCallback),i.superclass.clear.call(this)},zoomIn:function(){var e=this.getData().control.getMap();e.setZoom(e.getZoom()+1,{checkZoomRange:!0})},zoomOut:function(){var e=this.getData().control.getMap();e.setZoom(e.getZoom()-1,{checkZoomRange:!0})}});return i}},{key:"_setZoomControlPosition",value:function(){var e=this.map.container._size[1];this.zoomControl&&this.zoomControl.options.set("position",{top:e/2,right:0})}},{key:"_initCustomFullscreenControl",value:function(){var e=this,t=this.ymaps,n=t.templateLayoutFactory.createClass('<div class="yandex-map__fullscreen-button yandex-map__fullscreen-button-open" '.concat(void 0,' data-tooltip="На весь экран" data-tooltip-position="left">\n    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path fill-rule="evenodd" clip-rule="evenodd" d="M19.0512 4H12V2H21H22V3V12H20V5.86693L5.46313 20H12V22H3H2V21V12H4V18.6331L19.0512 4Z"/>\n    </svg>\n      </div>')+'<div class="yandex-map__fullscreen-button yandex-map__fullscreen-button-close" data-tooltip="Закрыть" data-tooltip-position="left">\n        <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M6.00005 5.36846L0.631575 0L0 0.631574L5.36847 6.00003L6.74523e-05 11.3684L0.631643 12L6.00005 6.63161L11.3684 11.9999L11.9999 11.3683L6.63162 6.00003L12 0.631668L11.3684 9.42307e-05L6.00005 5.36846Z"/>\n        </svg>\n        </div>'),i=new t.control.FullscreenControl({options:{layout:n,position:{top:null,right:0}}});this.map.controls.add(i),this.overlay&&this.overlay.addEventListener("click",function(t){t.preventDefault(),i.enterFullscreen(),e._setZoomControlPosition(),e.body.classList.add("map-open"),e.header.classList.remove("is-showed"),e.header.classList.add("is-hidden")}),this.map.container.events.add("fullscreenexit",function(){setTimeout(function(){tp.publish("fullscreenexit"),e.body.classList.remove("map-open"),o.isDesktop()||e.map.behaviors.disable("drag")},100)}),this.map.container.events.add("fullscreenenter",function(){e.body.classList.add("map-open"),e.map.behaviors.enable("drag")})}}],td(n.prototype,e),t&&td(n,t),n}();function tm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tv=new m,ty=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n)}return e=[{key:"init",value:function(e,t,n){this.map=t,this.settings=n,this.content=e,this.settings.groups&&this.settings.groups.length&&(this._clearIfHas(),this._createLayout(),this._initElements(),this._subscribes(),this._bindEvent())}},{key:"_subscribes",value:function(){var e=this;tv.subscribe("map:updateGroups",function(t){var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)!function(){var t=a.value;e.items.find(function(e){return e.dataset.id===t.groupId.toString()}).querySelector(".j-yandex-map__group-count").innerHTML=t.count}()}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}})}},{key:"_clearIfHas",value:function(){var e=this.content.querySelector(".j-yandex-map__groups");e&&o.removeElement(e)}},{key:"_createLayout",value:function(){this.content.children[0].insertAdjacentHTML("beforeend",(this.settings.groups,'<div class="yandex-map__groups j-yandex-map__groups">\n    <div class="yandex-map__group j-yandex-map__group" data-coords="" data-zoom="">\n        <span class="j-yandex-map__group-count"></span>\n    </div>\n</div>'))}},{key:"_initElements",value:function(){this.items=Array.from(this.content.querySelectorAll(".j-yandex-map__group"))}},{key:"_bindEvent",value:function(){var e=this;this.items.forEach(function(t){t.addEventListener("click",function(){var n=t.dataset.coords.split(","),i=t.dataset.zoom;e.map.panTo([e.map.getCenter(),n],{delay:0,flying:!1,safe:!1,duration:300}).then(function(){e.map.setZoom(i,{duration:300})})})})}}],tm(n.prototype,e),t&&tm(n,t),n}();function tg(e){function t(){return e.balloon.title?'<div class="yandex-map-balloon__title">'.concat(e.balloon.title,"</div>"):""}function n(){return e.balloon.text?'<div class="yandex-map-balloon__text">'.concat(e.balloon.text,"</div>"):""}return'\n  <div class="yandex-map-balloon yandex-map-balloon--default j-yandex-map-balloon yandex-map-balloon--'.concat(e.modifyClass,'">\n    <div class="yandex-map-balloon__modal">\n      <div class="yandex-map-balloon__content">\n        ').concat(t(),"\n        ").concat(n(),'\n      </div>\n    </div>\n  <div class="yandex-map-balloon__panel">\n      <div class="yandex-map-balloon__content">\n        ').concat(t(),"\n        ").concat(n(),'\n      </div>\n  </div>\n  <div class="yandex-map-balloon__close j-yandex-map-balloon-close">\n    <svg width="18" height="18" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6.00005 5.36846L0.631575 0L0 0.631574L5.36847 6.00003L6.74523e-05 11.3684L0.631643 12L6.00005 6.63161L11.3684 11.9999L11.9999 11.3683L6.63162 6.00003L12 0.631668L11.3684 9.42307e-05L6.00005 5.36846Z"/>\n    </svg>\n  </div>\n  </div>\n')}function tb(e){function t(){if(!e.balloon.tags)return"";var t=e.balloon.tags,n="";return t.forEach(function(e){n+='<div class="yandex-map-balloon__tags-item">'.concat(e,"</div>")}),'<div class="yandex-map-balloon__tags">'.concat(n,"</div>")}function n(){return e.icon?'<img class="yandex-map-balloon__image" src="'.concat(e.icon,'" alt="ЖК"/>'):""}function i(){return e.balloon.title?'<div class="yandex-map-balloon__title">'.concat(e.balloon.title,"</div>"):""}function o(){var t="",n="";return e.balloon.deadline||e.balloon.walkToCenter?(e.balloon.deadline&&(t="<li>Передача ключей  ".concat(e.balloon.deadline," </li>")),e.balloon.walkToCenter&&(n='<li><span class="walking"></span>до центра '.concat(e.balloon.walkToCenter," </li>")),"<ul>".concat(t).concat(n,"</ul>")):e.balloon.text?"".concat(e.balloon.text):void 0}return'<div class="yandex-map-balloon j-yandex-map-balloon yandex-map-balloon--'.concat(e.modifyClass,'">\n    <div class="yandex-map-balloon__modal">\n    <div class="yandex-map-balloon__content">\n        ').concat(t(),'\n          <div class="yandex-map-balloon__top">\n            ').concat(n(),'\n            <div class="yandex-map-balloon__top-right">\n              ').concat(e.typeName?'<div class="yandex-map-balloon__type">'.concat(e.typeName,"</div>"):"","\n              ").concat(i(),'\n            </div>\n          </div>\n          <div class="yandex-map-balloon__list">').concat(o(),'</div>\n          <div class="yandex-map-balloon__bottom">\n            <div class="yandex-map-balloon__price"> ').concat(e.balloon.price,'</div>\n            <div class="yandex-map-balloon__counter">').concat(e.balloon.rooms,'</div>\n          </div>\n\n    </div>\n    </div>\n      <div class="yandex-map-balloon__panel">\n          <div class="yandex-map-balloon__content">\n          ').concat(t(),"\n          ").concat(n(!0),'\n              <div class="yandex-map-balloon__info">\n                ').concat(i(!0),'\n                <div class="yandex-map-balloon__list">').concat(o(),'</div>\n                <div class="yandex-map-balloon__bottom">\n                  <div class="yandex-map-balloon__price"> ').concat(e.balloon.price,'</div>\n                  <div class="yandex-map-balloon__counter">').concat(e.balloon.rooms,"</div>\n                </div>\n                ").concat(e.active&&e.href?'<a href="'+e.href+'" class="yandex-map-balloon__link">Подробнее</a>':"",'\n              </div>\n          </div>\n      </div>\n      <div class="yandex-map-balloon__close j-yandex-map-balloon-close">\n        <svg width="18" height="18" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M6.00005 5.36846L0.631575 0L0 0.631574L5.36847 6.00003L6.74523e-05 11.3684L0.631643 12L6.00005 6.63161L11.3684 11.9999L11.9999 11.3683L6.63162 6.00003L12 0.631668L11.3684 9.42307e-05L6.00005 5.36846Z"/>\n        </svg>\n      </div>\n      </div>\n  ')}function t_(e){function t(){return e.balloon.image?'<img class="" src="'.concat(e.balloon.image,'" alt="ЖК"/>'):""}function n(){return e.balloon.type?'<div class="yandex-map-balloon__type">'.concat(e.balloon.type,"</div>"):""}function i(){return e.balloon.title?'<div class="yandex-map-balloon__title">'.concat(e.balloon.title,"</div>"):""}return'\n  <div class="j-yandex-map-balloon yandex-map-balloon yandex-map-balloon--'.concat(e.modifyClass,'">\n    <div class="yandex-map-balloon__modal">\n      <div class="yandex-map-balloon__content">\n        <div class="yandex-map-balloon__image">\n          ').concat(t(),'\n        </div>\n        <div class="yandex-map-balloon__info">\n          ').concat(n(),"\n          ").concat(i(),'\n        </div>\n      </div>\n    </div>\n    <div class="yandex-map-balloon__panel">\n      <div class="yandex-map-balloon__content">\n        <div class="yandex-map-balloon__image">\n          ').concat(t(),'\n        </div>\n        <div class="yandex-map-balloon__info">\n          ').concat(n(),"\n          ").concat(i(),'\n        </div>\n      </div>\n    </div>\n    <div class="yandex-map-balloon__close j-yandex-map-balloon-close">\n      <svg width="18" height="18" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M6.00005 5.36846L0.631575 0L0 0.631574L5.36847 6.00003L6.74523e-05 11.3684L0.631643 12L6.00005 6.63161L11.3684 11.9999L11.9999 11.3683L6.63162 6.00003L12 0.631668L11.3684 9.42307e-05L6.00005 5.36846Z"/>\n      </svg>\n    </div>\n  </div>\n')}function tk(e){function t(){return e.balloon.title?'<div class="yandex-map-balloon__title">'.concat(e.balloon.title,"</div>"):""}function n(){return e.balloon.text?'<div class="yandex-map-balloon__text">'.concat(e.balloon.text,"</div>"):""}function i(){return e.balloon.worktime?'<div class="yandex-map-balloon__text">'.concat(e.balloon.worktime,"</div>"):""}function o(){return e.balloon.phones?'<div class="yandex-map-balloon__text">'.concat(e.balloon.phones,"</div>"):""}return'\n<div class="yandex-map-balloon yandex-map-balloon--office j-yandex-map-balloon yandex-map-balloon--'.concat(e.modifyClass,'">\n  <div class="yandex-map-balloon__modal">\n    <div class="yandex-map-balloon__content">\n    ').concat(t(),"\n    ").concat(n(),"\n    ").concat(i(),"\n    ").concat(o(),'\n    </div>\n  </div>\n<div class="yandex-map-balloon__panel">\n    <div class="yandex-map-balloon__content">\n      ').concat(t(),"\n      ").concat(n(),"\n      ").concat(i(),"\n      ").concat(o(),'\n    </div>\n</div>\n<div class="yandex-map-balloon__close j-yandex-map-balloon-close">\n  <svg width="18" height="18" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M6.00005 5.36846L0.631575 0L0 0.631574L5.36847 6.00003L6.74523e-05 11.3684L0.631643 12L6.00005 6.63161L11.3684 11.9999L11.9999 11.3683L6.63162 6.00003L12 0.631668L11.3684 9.42307e-05L6.00005 5.36846Z"/>\n  </svg>\n</div>\n</div>\n')}function tw(e){function t(){return e.balloon.title?'<div class="yandex-map-balloon__title">'.concat(e.balloon.title,"</div>"):""}function n(){return e.balloon.text?'<div class="yandex-map-balloon__text">'.concat(e.balloon.text,"</div>"):""}return'\n    <div class="yandex-map-balloon j-yandex-map-balloon yandex-map-balloon--'.concat(e.modifyClass,'">\n      <div class="yandex-map-balloon__modal">\n        <div class="yandex-map-balloon__content">\n          ').concat(t(),"\n          ").concat(n(),'\n        </div>\n      </div>\n    <div class="yandex-map-balloon__panel">\n        <div class="yandex-map-balloon__content">\n          ').concat(t(),"\n          ").concat(n(),'\n        </div>\n    </div>\n    <div class="yandex-map-balloon__close j-yandex-map-balloon-close">\n      <svg width="18" height="18" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M6.00005 5.36846L0.631575 0L0 0.631574L5.36847 6.00003L6.74523e-05 11.3684L0.631643 12L6.00005 6.63161L11.3684 11.9999L11.9999 11.3683L6.63162 6.00003L12 0.631668L11.3684 9.42307e-05L6.00005 5.36846Z"/>\n      </svg>\n    </div>\n    </div>\n')}function tS(){return'<div class="yandex-map__dot-marker j-yandex-map-marker"></div>'}function tE(e){return'<div class="yandex-map__text-marker j-yandex-map-marker">'.concat(e.text,"</div>")}function tx(e){return'<div class="yandex-map__infrastructure-marker j-yandex-map-marker" style="background: '.concat(e.color,'">\n    <i class="yandex-map__infrastructure-marker-icon ').concat(e.icon,'"></i>\n</div>')}var tC={needBalloonPanel:function(){return window.innerWidth<1199},isMobile:function(){return window.innerWidth<1199}};function tO(e){return'<div class="yandex-map__marker j-yandex-map-marker">\n    <img src="'.concat(e.icon,'" alt=""/>\n</div>')}function tP(e){return'<div data-href="'.concat(e.href,'" class="yandex-map__object-marker j-yandex-map-marker j-map-project ').concat(e.active?" is-active":"",'" data-marker-id="').concat(e.id,'">\n      <div class="marker-image">\n      ').concat(e.icon?'<img class="marker-image__image" src="'+e.icon+'" alt="ЖК"/>':"",'\n      </div>\n      <div class="marker-content">\n        <div class="marker-content__type">').concat(e.typeName?e.typeName:"",'</div>\n        <div class="marker-content__name">').concat(e.name?e.name:"","</div>\n      </div>\n</div>")}function tL(e){return'<div class="yandex-map__point-marker j-yandex-map-marker data-marker-id="'.concat(e.id,'">\n    <div class="marker-image">\n    ').concat(e.icon?'<img class="marker-image__image" src="'+e.icon+'" alt="ЖК"/>':"","\n    </div>\n</div>")}function tT(e){return'\n    <div class="yandex-map__office-marker j-yandex-map-marker" data-marker-id="'.concat(e.id,'">\n        <svg class="yandex-map__office-marker-svg" width="46" height="46" viewBox="0 0 46 46" xmlns="http://www.w3.org/2000/svg">\n          <path d="M22.9998 24.9167C26.1755 24.9167 28.7498 22.3423 28.7498 19.1667C28.7498 15.9911 26.1755 13.4167 22.9998 13.4167C19.8242 13.4167 17.2498 15.9911 17.2498 19.1667C17.2498 22.3423 19.8242 24.9167 22.9998 24.9167Z"  stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"/>\n          <path d="M22.9998 42.1667C30.6665 34.5 38.3332 27.6351 38.3332 19.1667C38.3332 10.6983 31.4682 3.83337 22.9998 3.83337C14.5315 3.83337 7.6665 10.6983 7.6665 19.1667C7.6665 27.6351 15.3332 34.5 22.9998 42.1667Z"  stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>\n    </div>')}function tj(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tA=new m,tI=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.state="close",this.id=null,this.defDelay=300,this.aciveClass="is-active",this._subscribes()}return e=[{key:"_subscribes",value:function(){var e=this;tA.subscribe("fullscreenexit",function(){"close"!==e.state&&e._close()})}},{key:"open",value:function(e){this.data=e.options.get("data"),this.template=e.options.get("template"),this.domTarget=e.getOverlaySync().getLayoutSync().getElement(),this.marker=this.domTarget.querySelector(".j-yandex-map-marker"),this.wrapper=document.querySelector(".j-yandex-map-base"),this.id===Number(this.data.id)?this._close():this.id!==Number(this.data.id)&&"close"!==this.state?(this._close(),this._createTemplate("repeat")):this._createTemplate(),this._bindMapClickListener()}},{key:"_bindMapClickListener",value:function(){var e=this;window.addEventListener("bindMapClick",function(){e._close()})}},{key:"_createTemplate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t?this.defDelay:0;this._setStateMarker(),setTimeout(function(){o.insetContent(e.wrapper,e.template(e.data)),e.id=Number(e.data.id),e._getElements(),e._bindEvents(),e._showPanel()},n)}},{key:"_getElements",value:function(){this.panel=this.wrapper.querySelector(".j-yandex-map-balloon"),this.panelHeight=this.panel.offsetHeight}},{key:"_bindEvents",value:function(){var e=this,t=Array.from(this.panel.querySelectorAll(".j-yandex-map-balloon-close"));t.length&&t.forEach(function(t){t.addEventListener("click",function(){e._close()})})}},{key:"_showPanel",value:function(){this.panel.style.transform="translateY(".concat(-this.panelHeight,"px)"),this.state="show",this.wrapper.classList.add(this.aciveClass)}},{key:"_hideAll",value:function(){this.panel.style.transform="translateY(0)",this.state="close",this.wrapper.classList.remove(this.aciveClass)}},{key:"_close",value:function(){var e=this;this._removeStateMarker(),this._hideAll(),this.id="тест",setTimeout(function(){o.removeElement(e.panel)},this.defDelay)}},{key:"_setStateMarker",value:function(){this.marker&&this.marker.classList.add(this.aciveClass)}},{key:"_removeStateMarker",value:function(){this.marker&&(this.activeMarker=document.querySelector(".j-yandex-map-marker.is-active"),this.activeMarker&&this.activeMarker.classList.remove(this.aciveClass),this.marker.classList.remove(this.aciveClass))}}],tj(n.prototype,e),t&&tj(n,t),n}(),tM=n(755);function tq(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tB=new tI,tD=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.ymaps=window.ymaps,this.desktopBreakpoint=1199}return e=[{key:"createMarker",value:function(e){return(this._setSettings(e),e.balloon.title||e.balloon.text)?this._initWithBallon():this._initWithoutBalloon()}},{key:"createHtmlMarker",value:function(e){this._setTemplateMarker(e),this._setTemplateBalloon(e),this.ballon=e,this.office=e.office||!1,this.route=e.route||!1;var t=this.ymaps.templateLayoutFactory.createClass(this.markerTemplate(e),{build:function(){this.constructor.superclass.build.call(this),this._$element=tM(".yandex-map__".concat(e.modifyClass,"-marker"),this.getParentElement()),this._options=this.getData().options,this._size=[this._$element[0].offsetWidth,this._$element[0].offsetHeight],this._offset=this._calcElementOffset();var t={type:"Rectangle",coordinates:[this._offset,[this._offset[0]+this._size[0],this._offset[1]+this._size[1]]]};this._options.set("shape",t),this._applyElementOffset(this._offset),this._bindEvents()},_bindEvents:function(){var e=this;this.inited||(this.inited=!0,this.innerWidth=window.innerWidth,window.addEventListener("resize",function(){window.innerWidth!==e.innerWidth&&(e.innerWidth=window.innerWidth,e.rebuild())}))},_calcElementOffset:function(){switch(e.modifyClass){case"infrastructure":case"point":return[-this._size[0]/2,-this._size[1]/2];case"object":return[-this._size[1]/2,-this._size[1]/2];default:return[-this._size[0]/2,-this._size[1]]}},_applyElementOffset:function(e){this._$element[0].style.marginLeft="".concat(e[0],"px"),this._$element[0].style.marginTop="".concat(e[1],"px")}}),n=e.zIndex||!1,i=e.balloon,o=!tC.needBalloonPanel()&&!!i&&this._createBalloonContentLayout(),a=new this.ymaps.Placemark(e.coords,{},{type:"Placemark",balloonLayout:o,iconLayout:t,hideIconOnBalloonOpen:this.hideIconOnBalloonOpen,office:this.office,template:this.balloonTemplate,data:e,iconShape:this._setIconShape(e),zIndex:n,panel:tB,cursor:i?"pointer":"default",isBalloon:i});return this._bindEventsMarker(a),e.isHidden&&a.options.set("visible",!1),a}},{key:"_setSettings",value:function(e){var t={};t.lat=59.939014,t.lon=30.315545,t.iconWidth=24,t.iconHeight=24,t.offsetTop=0,t.offsetLeft=0,this.type=e.type||"Point",this.coords=e.coords||[t.lat,t.lon],this.iconLayout="default#image",this.iconImageHref=e.icon||"../../webicons/map/media/markers/marker.svg",this.iconImageSize=e.size||[t.iconWidth,t.iconHeight],this.iconImageOffset=e.offset||[t.offsetTop,t.offsetLeft],this.route=e.route||!1,this.ballon=e}},{key:"_initWithoutBalloon",value:function(){return new this.ymaps.Placemark(this.coords,{type:this.type},{iconLayout:this.iconLayout,iconImageHref:this.iconImageHref,iconImageSize:this.iconImageSize,iconImageOffset:this.iconImageOffset})}},{key:"_initWithBallon",value:function(){this._setTemplateBalloon();var e=new this.ymaps.Placemark(this.coords,{type:this.type},{balloonLayout:this._createBalloonContentLayout(),iconLayout:this.iconLayout,iconImageHref:this.iconImageHref,iconImageSize:this.iconImageSize,iconImageOffset:this.iconImageOffset,route:this.route,template:this.balloonTemplate,data:this.ballon,hideIconOnBalloonOpen:!1});return this._bindEventsMarker(e),e}},{key:"_setTemplateMarker",value:function(e){switch(e.modifyClass){case"object":this.hideIconOnBalloonOpen=!1,this.markerTemplate=tP;break;case"point":this.hideIconOnBalloonOpen=!1,this.markerTemplate=tL;break;case"infrastructure":this.hideIconOnBalloonOpen=!1,this.markerTemplate=tx;break;case"office":this.hideIconOnBalloonOpen=!1,this.markerTemplate=tT;break;case"dot":this.hideIconOnBalloonOpen=!1,this.markerTemplate=tS;break;case"text":this.hideIconOnBalloonOpen=!1,this.markerTemplate=tE;break;default:this.hideIconOnBalloonOpen=!1,this.markerTemplate=tO}}},{key:"_setTemplateBalloon",value:function(e){switch(e.modifyClass){case"object":this.balloonTemplate=tb;break;case"point":this.balloonTemplate=t_;break;case"office":this.balloonTemplate=tk;break;case"infrastructure":this.balloonTemplate=tw;break;default:this.balloonTemplate=tg}}},{key:"_setIconShape",value:function(e){return tC.needBalloonPanel()?this.iconImageSize=[Number(e.size.height),Number(e.size.height)]:this.iconImageSize=[-Number(e.size.width/2),-Number(e.size.height)],{type:"Rectangle",coordinates:[[0,0],this.iconImageSize]}}},{key:"_createBalloonContentLayout",value:function(){var e=this,t=this.ymaps.templateLayoutFactory.createClass(this.balloonTemplate(this.ballon),{build:function(){var t=this;this.constructor.superclass.build.call(this),this.balloon=document.querySelector(".j-yandex-map-balloon"),this.closeBallooneButtons=Array.from(document.querySelectorAll(".j-yandex-map-balloon-close")),e.markerOffset(this.balloon),this.closeBallooneButtons.forEach(function(e){e.addEventListener("click",t.onCloseClick.bind(t))})},clear:function(){this.constructor.superclass.clear.call(this)},onCloseClick:function(e){e.preventDefault(),this.events.fire("userclose")},onSublayoutSizeChange:function(){t.superclass.onSublayoutSizeChange.apply(this,arguments),this.balloon&&(e.markerOffset(this.balloon),this.events.fire("shapechange"))},getShape:function(){if(!this.balloon)return t.superclass.getShape.call(this);var e=this.balloon.offsetHeight,n=this.balloon.offsetWidth,i=this.balloon.offsetTop,o=this.balloon.offsetLeft;return new window.ymaps.shape.Rectangle(new window.ymaps.geometry.pixel.Rectangle([[o,i],[o+n,i+e]]))}});return t}},{key:"markerOffset",value:function(e){var t=this.iconImageSize[0],n=this.iconImageSize[1],i=e.classList;switch(!0){case i.contains("yandex-map-balloon--infrastructure"):e.style.left="".concat(-(e.offsetWidth/2),"px"),e.style.top="".concat(-e.offsetHeight-10+n/2,"px");break;case i.contains("yandex-map-balloon--object"):e.style.left="".concat(t,"px"),e.style.top="".concat(-(n-10)/2,"px");break;case i.contains("yandex-map-balloon--point"):e.style.left="".concat(-(e.offsetWidth/2),"px"),e.style.top="".concat(-e.offsetHeight-10+n/2,"px");break;case i.contains("yandex-map-balloon--office"):e.style.left="".concat(-(e.offsetWidth/2),"px"),e.style.top="".concat(-e.offsetHeight-10+n,"px");break;default:e.style.left="".concat(-(e.offsetWidth/2)+t/2,"px"),e.style.top="".concat(-e.offsetHeight-n/2,"px")}}},{key:"closeBalloonOnClickMap",value:function(e){window.innerWidth>this.desktopBreakpoint&&(e.geoObjects.events.add("click",function(){e.balloon.isOpen()&&e.balloon.close()}),e.events.add("click",function(){e.balloon.isOpen()&&e.balloon.close()}))}},{key:"_bindEventsMarker",value:function(e){window.innerWidth>=this.desktopBreakpoint&&!e.options.get("data").onlyPanel?(e.events.add("mouseenter",this.onMouseenterMarker.bind(this)),e.events.add("mousemove",this.onMousemoveMarker.bind(this)),e.events.add("mouseleave",this.onMouseleaveMarker.bind(this)),e.events.add("click",this._onMouseClickMarker.bind(this))):e.events.add("click",this.onMouseenterMarker.bind(this))}},{key:"_getMarkerElement",value:function(e){return e.get("target").getOverlaySync().getLayoutSync().getElement().querySelector(".j-yandex-map-marker")}},{key:"_onMouseClickMarker",value:function(e){var t=e.get("target"),n=this._getMarkerElement(e);if(t.options.get("data").href){n.closest(".j-map-project")&&n.classList.contains("is-active")&&window.open(t.options.get("data").href);return}tC.needBalloonPanel()&&t.options.get("balloonLayout")&&(e.preventDefault(),tB.open(t))}},{key:"onMousemoveMarker",value:function(e){var t=e.get("target").balloon,n=t.isOpen(),i=this._getMarkerElement(e);n||(this.bindEventsBalloon(t),i.classList.add("is-open-balloon"),t.open())}},{key:"onMouseenterMarker",value:function(e){var t=e.get("target"),n=t.balloon,i=t.options.get("data").onlyPanel;tC.needBalloonPanel()||i?tB.open(t):this.bindEventsBalloon(n)}},{key:"onMouseleaveMarker",value:function(e){var t=e.get("target").balloon,n=this._getMarkerElement(e);this.timerCloseBalloon=this.getSetTimeoutClosingBalloon(t,n)}},{key:"bindEventsBalloon",value:function(e){e.events.add("mouseenter",this.onMouseenterBalloon.bind(this)),e.events.add("mouseleave",this.onMouseleaveBalloon.bind(this))}},{key:"onMouseenterBalloon",value:function(){clearTimeout(this.timerCloseBalloon),this.timerCloseBalloon=null}},{key:"onMouseleaveBalloon",value:function(e){var t=e.get("target").balloon,n=this._getMarkerElement(e);this.getSetTimeoutClosingBalloon(t,n)}},{key:"getSetTimeoutClosingBalloon",value:function(e,t){t.classList.remove("is-open-balloon"),t.classList.add("is-hide-balloon");var n=document.querySelector(".yandex-map-balloon");return n&&n.classList.add("is-hide-balloon"),setTimeout(function(){e.close(),t.classList.remove("is-hide-balloon")},300)}}],tq(n.prototype,e),t&&tq(n,t),n}();function tR(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t$=new m,tz=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.buttons=null,this.resetButton=null,this.disableClass="is-active"}return tR(t.prototype,[{key:"init",value:function(e){this.buttons=Array.from(e.target.querySelectorAll(".j-map-filter-item")),this.resetButton=e.resetButton||null,this._bindEvents()}},{key:"_bindEvents",value:function(){var e=this;this.buttons.forEach(function(t){t.addEventListener("change",function(){e._changeFilter(t)})}),this._resetFilter(),this.resetButton.addEventListener("click",function(){e._resetFilter()})}},{key:"_changeFilter",value:function(e){if(this.buttons.every(function(e){return!1===e.checked})){this.resetButton.classList.add(this.disableClass),t$.publish("showAllMarkers");return}var t=e.checked?"addFilterItem":"removeFilterItem",n=[];this.buttons.forEach(function(e){!0===e.checked&&n.push(e.dataset.type)}),this.resetButton.classList.remove(this.disableClass),t$.publish(t,n),t$.publish("filterUpdated")}},{key:"_resetFilter",value:function(){this.buttons.forEach(function(e){e.checked=!1}),this.resetButton.classList.add(this.disableClass),t$.publish("showAllMarkers")}}]),e&&tR(t,e),t}();function tH(e,t,n,i,o,a,s){try{var r=e[a](s),l=r.value}catch(e){n(e);return}r.done?t(l):Promise.resolve(l).then(i,o)}function tN(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){tH(a,i,o,s,r,"next",e)}function r(e){tH(a,i,o,s,r,"throw",e)}s(void 0)})}}function tW(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function tF(e,t){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}}var tV=new m,tZ=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.ymaps=e,this.geoObjectCollection=new this.ymaps.GeoObjectCollection,this.settings={},this.map=null,this.baseClass=".j-yandex-map-base",this.preloaderClass="is-loading",this.desktopBreakpoint=1199}return e=[{key:"init",value:function(e){this.outerOptions=e,this.mapWrapper=e.wrapper,this.content=this.mapWrapper.querySelector(this.baseClass),this.mapRoot=this.mapWrapper.closest(".j-yandex-map-root"),this.id=this.content.id,this.json=this.mapWrapper.dataset.json||e.json,this.mapWrapper.removeAttribute("data-json"),this._runMap(),this._subscribes()}},{key:"update",value:function(){this.geoObjectCollection&&(this.map.geoObjects.remove(this.geoObjectCollection),this.geoObjectCollection=new this.ymaps.GeoObjectCollection),this._initHistoricalPolygon(),this._initMarker(),this._initGroups(),this._initCircles()}},{key:"_subscribes",value:function(){var e=this;this._showGeoObject=this._showGeoObject.bind(this),this._hideGeoObject=this._hideGeoObject.bind(this),tV.subscribe("addFilterItem",function(t){e._toggleGeoObjects(t,e._showGeoObject)}),tV.subscribe("removeFilterItem",function(t){e._toggleGeoObjects(t,e._hideGeoObject)}),tV.subscribe("showAllMarkers",function(){e._visibleAllMarkers()}),tV.subscribe("mapSetCenter",function(){e._setCenterMap()})}},{key:"removeFilterItem",value:function(e){var t=this;e.forEach(function(e){t.geoObjectCollectionArray.forEach(function(n){n.options.get("data").type===e&&t._hideGeoObject(n)})})}},{key:"addFilterItem",value:function(e){var t=this;e.forEach(function(e){t.geoObjectCollectionArray.forEach(function(n){n.options.get("data").type===e&&t._showGeoObject(n)})})}},{key:"updateGroups",value:function(e){if(this.settings.groups){var t=[],n=!0,i=!1,o=void 0;try{for(var a,s=this,r=this.settings.groups[Symbol.iterator]();!(n=(a=r.next()).done);n=!0)!function(){var n=a.value,i=s.geoObjectCollectionArray.filter(function(t){return t.options.get("data").type===e&&t.options.get("data").group===n.id});t.push({groupId:n.id,count:i.length})}()}catch(e){i=!0,o=e}finally{try{n||null==r.return||r.return()}finally{if(i)throw o}}tV.publish("map:updateGroups",t)}}},{key:"_runMap",value:function(){var e=this;return tN(function(){return tF(this,function(t){switch(t.label){case 0:return[4,e._setSettings()];case 1:return t.sent(),[4,e._initYandexMap()];case 2:return t.sent(),e._setDeviceSettings(),e._initMarker(),e._initControls(),e._initCluster(),e._initGroups(),e._initCircles(),e._bindEvents(),e._showMap(),e._createFilterList(),e._initMapFilter(),tV.publish("map:ready"),[2]}})})()}},{key:"_setSettings",value:function(){var e=this;return tN(function(){var t;return tF(this,function(n){return e._connectSettings(e._setDefaultSettings()),e._connectSettings(e._setScriptSettings()),e.json&&(t=JSON.parse(e.json),e._connectSettings(t.data)),[2]})})()}},{key:"_initYandexMap",value:function(){var e=this;return tN(function(){var t,n;return tF(this,function(i){switch(i.label){case 0:t=function(){return new Promise(function(t){if(e.map=new e.ymaps.Map(e.id,e.settings,{suppressMapOpenBlock:!0}),e.map)t();else throw Error()})},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t()];case 2:return[2,i.sent()];case 3:throw n=i.sent(),console.error("При инициализации Яндекс Карт произошла критическая ошибка ".concat(n)),Error();case 4:return[2]}})})()}},{key:"_connectSettings",value:function(e){"object"==typeof e&&Object.assign(this.settings,e)}},{key:"_setDefaultSettings",value:function(){return{center:[59.939014,30.315545],mapTypeControl:!1,autoZoom:!1,zoom:12,zoomMargin:250,minZoom:10,maxZoom:18,zoomStep:1,controls:[],zoomControl:!0,customZoomControl:!0,fullScreenControl:!0,customFullScreenControl:!0,height:this.content.offsetHeight,zoomScroll:!1,markers:[]}}},{key:"_setScriptSettings",value:function(){return this.outerOptions}},{key:"_setDeviceSettings",value:function(){this._setDeviceCenter(),this._setDeviceZoom(),this.outerOptions.disableZoom&&this._disableZoom(),this.outerOptions.disableDrag&&this._disableDrag()}},{key:"_setDeviceCenter",value:function(){if(this.settings.centerMobile){var e=this.map.getZoom();o.isMobile()?this.map.setCenter(this.settings.centerMobile,e,{useMapMargin:!0}):this.map.setCenter(this.settings.center,e,{useMapMargin:!0})}}},{key:"_setDeviceZoom",value:function(){this.settings.zoomMobile&&(o.isMobile()?this.map.setZoom(this.settings.zoomMobile):this.map.setZoom(this.settings.zoom))}},{key:"_initMarker",value:function(){var e=this;this.settings.markers.forEach(function(t){var n=new tD;e.geoObjectCollection.add(n.createHtmlMarker(t)),n.closeBalloonOnClickMap(e.map)}),this.geoObjectCollectionArray=this.geoObjectCollection.toArray().map(function(e){return e}),this.map.geoObjects.add(this.geoObjectCollection),this.geoObjectCollectionArray.length>1&&this.settings.autoZoom&&this.map.setBounds(this.geoObjectCollection.getBounds(),{zoomMargin:this.settings.zoomMargin}),this._bindMapClick()}},{key:"_bindMapClick",value:function(){var e=this,t=new CustomEvent("bindMapClick");window.dispatchEvent(t),this.map.events.add("click",function(){window.innerWidth<e.desktopBreakpoint&&window.dispatchEvent(t)})}},{key:"_initControls",value:function(){new tf().init(this.map,this.settings,this.ymaps)}},{key:"_initCluster",value:function(){var e=this.settings.markers.filter(function(e){return"object-min"===e.modifyClass});this.outerOptions.cluster&&!e.length&&(this.cluster=new tu,this.cluster.init(this.geoObjectCollection))}},{key:"_initGroups",value:function(){this.settings.groups&&this.settings.groups.length&&new ty().init(this.content,this.map,this.settings)}},{key:"_initCircles",value:function(){var e=this,t=this.settings.circles;t&&t.forEach(function(t){var n=new ymaps.Circle([t.center,t.radius],{},{fillColor:t.fillColor,fillOpacity:t.fillOpacity,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth,strokeStyle:t.strokeStyle});e.map.geoObjects.add(n)})}},{key:"_bindEvents",value:function(){var e=this;this._setDeviceSettings=this._setDeviceSettings.bind(this),["resize","orientationchange"].forEach(function(t){window.addEventListener(t,o.debounce(e._setDeviceSettings,100))})}},{key:"_showMap",value:function(){this.content.classList.remove(this.preloaderClass),this.content.style.opacity="1",this.outerOptions.afterShow&&this.outerOptions.afterShow()}},{key:"_createFilterList",value:function(){var e=this;if(this.mapRoot&&this.mapRoot.querySelector(".j-yandex-map-infrastructure")){var t=this.mapRoot.querySelector(".j-map-filter"),n=this.settings.markers,i="",o=[];n.forEach(function(t){if("infrastructure"===t.modifyClass){var n=t.type;o.includes(n)||(i+=e.createFilterItem(t),o.push(n))}}),t.innerHTML=i}}},{key:"createFilterItem",value:function(e){return'\n        <li class="infrastructure-legend__list-item">\n          <label class="infrastructure-label">\n            <input class="infrastructure-label__checkbox j-map-filter-item" type="checkbox" name="'.concat(e.type,'" data-type="').concat(e.type,'" id="').concat(e.type,'" />\n            <div class="infrastructure-label__inner">\n              <span class="infrastructure-label__text">').concat(e.name,'</span>\n              <span class="infrastructure-label__icon">\n                <i class="').concat(e.icon,'"></i>\n              </span>\n            </div>\n          </label>\n        </li>\n      ')}},{key:"_initMapFilter",value:function(){if(this.mapRoot){var e=this.mapRoot.querySelector(".j-map-filter"),t=this.mapRoot.querySelector(".j-map-filter-reset"),n=this.mapRoot.querySelector(".j-map-filter-apply");e&&(new tz().init({target:e,resetButton:t}),n&&tV.subscribe("filterUpdated",function(){n.classList.remove("is-hidden")}));var i=this.mapRoot.querySelector(".j-yandex-map-infrastructure"),o=this.mapRoot.querySelector(".j-yandex-map-filter-toggle");o&&i&&(o.addEventListener("click",function(){i.classList.toggle("is-open"),o.classList.toggle("is-open")}),n.addEventListener("click",function(){n.classList.add("is-hidden"),i.classList.remove("is-open"),o.classList.remove("is-open")}))}}},{key:"_showGeoObject",value:function(e){this.cluster.addGeoObjectToClusterer(e)}},{key:"_hideGeoObject",value:function(e){this.cluster.removeGeoObjectToClusterer(e)}},{key:"_toggleGeoObjects",value:function(e,t){var n=this;this.geoObjectCollectionArray.forEach(function(e){"point"!==e.options.get("data").type&&"text"!==e.options.get("data").type&&n._hideGeoObject(e)}),e.forEach(function(e){n.geoObjectCollectionArray.forEach(function(i){i.options.get("data").type===e&&(t(i),n._showGeoObject(i))})})}},{key:"_visibleAllMarkers",value:function(){var e=this;this.geoObjectCollectionArray.forEach(function(t){"point"!==t.options.get("data").type&&e._showGeoObject(t)})}},{key:"hideAllMarkers",value:function(){var e=this;this.geoObjectCollectionArray.forEach(function(t){"point"!==t.options.get("data").type&&e._hideGeoObject(t)})}},{key:"_setCenterMap",value:function(e){tC.isMobile()&&this.setCenter(e,this.settings.zoom)}},{key:"_disableZoom",value:function(){var e=this.map.getZoom();this.map.behaviors.disable("dblClickZoom"),this.map.behaviors.disable("scrollZoom"),this.map.options.set("maxZoom",e),this.map.options.set("minZoom",e)}},{key:"_disableDrag",value:function(){this.map.behaviors.disable("drag")}},{key:"getMarkers",value:function(){return this.settings.markers}},{key:"setCenter",value:function(e,t){this.map.setCenter(e,t)}}],tW(n.prototype,e),t&&tW(n,t),n}(),tG=new m,tU=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"init",value:function(){this._subscribe()}},{key:"_loadScriptApi",value:function(){if(!window.ymapsInited)return new Promise(function(e,t){var n=document.createElement("script");n.src="https://api-maps.yandex.ru/2.1/?apikey=fc8ccd61-8a5d-43e8-ae97-d91256868293&lang=ru_RU",n.async=!0,n.defer=!0,n.type="text/javascript",n.onload=e,n.onerror=function(e){t(e)},document.body.appendChild(n)}).then(function(){return window.ymapsInited=!0,new Promise(function(e){window.ymaps.ready(e)})})}},{key:"_subscribe",value:function(){var e=this;window.ymapsInited=!1,tG.subscribe("map:init",function(t){e._initMap(t)})}},{key:"_initMap",value:function(e){e&&(window.ymapsInited?new tZ(window.ymaps).init({wrapper:e,cluster:!0,fullScreenControl:!0,customFullScreenControl:!0,customZoomControl:!0}):this._loadScriptApi().then(function(t){new tZ(t).init({wrapper:e,cluster:!0,fullScreenControl:!0,customFullScreenControl:!0,customZoomControl:!0}),window.ymapsInited=!0}).catch(function(e){console.error("При загрузке яндекс карт произошла ошибка: ".concat(e))}))}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t,e),t}(),tY=n(755);function tK(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tJ=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.storage={}}return e=[{key:"isExist",value:function(e){return null!==e&&!isNaN(+e)&&void 0!==e}},{key:"accessStorage",value:function(e,t){return this.isExist(t)?this.storage[e]=t:parseInt(this.storage[e])||this.storage[e]}},{key:"getObjectData",value:function(e){return{key:tY(e.$input).attr("name"),data:e.from}}},{key:"calc",value:function(e,t,n){switch(e){case"creditAmount":return t-n;case"creditAmountPretty":return(t-n).toLocaleString("ru-Ru")+" ₽";case"creditPercent":return parseInt((n/t*100).toFixed());case"creditPercentPretty":return(n/t*100).toFixed()+"%";case"monthlyPaymentPretty":return parseInt(t.toFixed()).toLocaleString("ru-Ru")+" ₽ <span> /мес.</span>";case"monthlyPaymentPrettyTranche":return"".concat(parseInt(t.toFixed()).toLocaleString("ru-Ru")," ₽ ").concat(this.createDelimiter()," ").concat(parseInt(n.toFixed()).toLocaleString("ru-Ru")," ₽ <span> /мес.</span>")}}},{key:"calcCredit",value:function(){var e=this.accessStorage("price[min]",null),t=this.accessStorage("first-pay[min]",null),n=this.calc("creditPercentPretty",e,t),i=this.accessStorage("limitation[min]",null),o=this.calc("creditAmount",e,t)>=0?this.calc("creditAmountPretty",e,t):"—";return this.accessStorage("creditAmount",this.calc("creditAmount",e,t)),this.accessStorage("creditPercent",this.calc("creditPercent",e,t)),{amount:o,percent:n,period:i}}},{key:"decodePostfix",value:function(e){return[1,21,31].includes(e)?"годa":"лет"}},{key:"use$Value",value:function(e,t){return void 0===t?tY(e).val():tY(e).val(t)}},{key:"checkInputedData",value:function(e,t,n){var i=+tY(e).val().replace(n,"");t.from=i<t.min?t.min:i>t.max?t.max:i}},{key:"preventNaNSymbolsEnter",value:function(e){![8,9,13,17,18,35,36,37,39,46].includes(e.which)&&(e.which>57||e.which<48)&&(e.which>105||e.which<96)&&(e.which>123||e.which<112)&&e.preventDefault()}},{key:"onKeyDownEvent",value:function(e,t,n,i,o){switch(e.which){case 13:this.checkInputedData(i,t,o),tY(i).trigger("blur");break;case 27:tY(i).trigger("blur")}}},{key:"getReplaceDotToNumber",value:function(e){return Number(e.replace(/,/g,"."))}},{key:"createDelimiter",value:function(){return'<span class="mortgage-bank__delimiter">/</span>'}},{key:"createRate",value:function(e){return"\n        ".concat(1===e.length?"".concat(e,"%"):"\n            ".concat(e[0],"%\n            ").concat(this.createDelimiter(),"\n            ").concat(e[1],"%\n        "),"\n        ")}}],tK(n.prototype,e),t&&tK(n,t),n}(),tX=n(755);function tQ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function t0(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}O.p8.registerPlugin(P.i);var t1=new m,t2=new tJ,t3=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.ranges={},this.minPercent=0,this.maxPercent=90}return e=[{key:"init",value:function(e){this._getElements(e),this._createRateValues(),this._getMinFirstPercent(),this._subscribes(),this._initCalcSliders(),this._bindEvents()}},{key:"_getElements",value:function(e){this.wrap=e,this.$wrap=tX(e),this.$sliders=this.$wrap.find(".form-range--mortgage"),this.$banksItems=this.$wrap.find(".mortgage-result__item"),this.banksArray=this.$banksItems.toArray(),this.$creditPercent=this.$wrap.find(".mortgage-filter__percent"),this.$orderCount=this.$wrap.find(".j-mortgage-orders-count"),this.$emptyResult=this.$wrap.find(".mortgage__no-result"),this.classes={active:"is-active",disabled:"is-disabled",hidden:"is-hidden",loadmore:"is-loadmore"},this.flatPriceWrap=tX(document).find(".flat__prices-mortgage"),this.flatPrice=this.flatPriceWrap.find(".j-flat__price"),this.$select=this.$wrap.find(".form-select select"),this.$resultList=this.$wrap.find(".mortgage-result__list"),this.trancheCheckbox=this.wrap.querySelector(".mortgage-filtres__checks-tranche input"),this.isTrancheEnabled=!1,this.durationAnim=400}},{key:"_initCalcSliders",value:function(){var e=Array.from(this.$sliders);this._getRangeSliders(),e.forEach(function(e,t){n.initSlider(e,t)})}},{key:"_getRangeSliders",value:function(){var e=this;Array.from(this.wrap.querySelectorAll(".j-form-range-base")).forEach(function(t){e.ranges[t.id]=t})}},{key:"_bindEvents",value:function(){this._onSelectChange(),this._backToFilter(),this.trancheCheckbox&&this.trancheCheckbox.addEventListener("change",this._onChangeTranche.bind(this)),this.banksArray.forEach(function(e){var t=e.querySelector(".mortgage-bank__payment__icon");t&&t.addEventListener("click",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault()})})}},{key:"_onChangeTranche",value:function(){this.trancheCheckbox.checked?this.isTrancheEnabled=!0:this.isTrancheEnabled=!1,this.update()}},{key:"_onSelectChange",value:function(){var e=this;this.$select.length&&this.$select.on("change",function(){var t=e.$select.select2("data").map(function(e){return e.id});e._onChangeSelect(t),e._getMinFirstPercent(),e._recalculateFirstPayment(),e.update()})}},{key:"_subscribes",value:function(){var e=this;t1.subscribe("rangesliderStart",function(t,n){e._isMineSlider(n)&&(t.$input=t.input.closest(".form-range").find(".form-range__input"),t.$postfix=t.input.closest(".form-range").find(".range-slider__input-right"),t.$rangeSlider=n,e.updateSlidersValues(t,null),e.manualInput(t,e),e.update())}),t1.subscribe("rangesliderChange",function(t){if(e._isMineSlider(t.$rangeSlider)){var n=t.input[0].id;"price"===n&&e._recalculateFirstPayment(),e.updateSlidersValues(t,"set","price"===n)}}),t1.subscribe("rangesliderFinish",function(t){e._isMineSlider(t.$rangeSlider)&&(e.setCredit(),e.update())})}},{key:"_isMineSlider",value:function(e){var t=e.$rangeSlider[0].id;return this.ranges[t]===e.$rangeSlider[0]}},{key:"_getMinFirstPercent",value:function(){var e,t=this,n=[];this.banksArray.filter(function(e){return!e.classList.contains(t.classes.hidden)}).forEach(function(e){var t=t2.getReplaceDotToNumber(e.dataset.firstpayment);n.push(t)}),this.minPercent=(e=Math).min.apply(e,function(e){if(Array.isArray(e))return tQ(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return tQ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tQ(e,t)}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}},{key:"updateSlidersValues",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.updateData(e,t),n.setInput(e.from,e),i||this.setCredit()}},{key:"updateData",value:function(e,t){var n=t2.getObjectData(e).key;t2.isExist(t2.accessStorage(n,null))&&"set"!==t?e.from=t2.accessStorage(n,null):(e.from=parseInt(e.from),t2.accessStorage(n,e.from))}},{key:"setCredit",value:function(){this.$creditPercent.text(t2.calcCredit().percent)}},{key:"manualInput",value:function(e,t){this.chooseInputInteraction(e,t,"focus"),this.chooseInputInteraction(e,t,"blur"),this.chooseInputInteraction(e,t,"keyup"),this.chooseInputInteraction(e,t,"keydown")}},{key:"chooseInputInteraction",value:function(e,t,i){var o=/[^0-9.]/g,a=this;e.$input.on(i,function(s){switch(i){case"focus":t2.use$Value(this,"");break;case"blur":""===t2.use$Value(this)?n.setInput(e.from,e):(t2.checkInputedData(this,e,o),"price"===e.$rangeSlider.slider.input.id?(a.updateSlidersValues(e,"set",!0),a._recalculateFirstPayment()):a.updateSlidersValues(e,"set"),e.$rangeSlider.slider.update(),a.setCredit(),a.update());break;case"keyup":t2.use$Value(this)&&n.setInput(+t2.use$Value(this).replace(o,""),e);break;case"keydown":t2.preventNaNSymbolsEnter(s),t2.onKeyDownEvent(s,e,t,this,o);break;default:console.error("Wrong type of interaction")}})}},{key:"setPaymentOnTable",value:function(){this.banksArray.forEach(function(e){n.calcPaymentForBank(tX(e))})}},{key:"_recalculateFirstPayment",value:function(){var e=+this.$creditPercent[0].innerText.replace("%","");this.minPercent>e&&(e=this.minPercent);var t=t2.accessStorage("price[min]",null),n=Math.trunc(t*e/100),i=t/100*this.minPercent,o=t/100*this.maxPercent,a=(o-i)/(this.maxPercent-this.minPercent),s=this.$wrap.find('input[name="first-pay[min]"]'),r=tX(this.ranges["first-pay"]).data("ionRangeSlider");s.val(n.toLocaleString("ru-Ru")),r.update({from:n,min:i,max:o,step:a}),t2.accessStorage("first-pay[min]",n),this.setCredit()}},{key:"_disableItems",value:function(){var e=this;this.banksArray.forEach(function(t){e._setDisabled(tX(t))})}},{key:"_setDisabled",value:function(e){var t=e.find(".mortgage-bank__payment-value"),n=t2.getReplaceDotToNumber(e.attr("data-firstPayment")),i=+e.attr("data-limit"),o=+e.attr("data-limitMin");t2.accessStorage("creditPercent")<n||t2.accessStorage("creditPercent")>100||t2.accessStorage("limitation[min]")>i||t2.accessStorage("limitation[min]")<o?(t.text("—"),e.addClass(this.classes.disabled)):e.removeClass(this.classes.disabled),this.isTrancheEnabled&&!e.hasClass("_tranche")&&e.addClass(this.classes.disabled)}},{key:"_setOrdersCount",value:function(){var e=this.$banksItems.not(".".concat(this.classes.disabled,", .").concat(this.classes.hidden)).length;this.$orderCount.text("".concat(e))}},{key:"_checkEmptyResult",value:function(){var e=this.$banksItems.not(".".concat(this.classes.disabled,", .").concat(this.classes.hidden)).length?"removeClass":"addClass";this.$resultList[e](this.classes.disabled),this.$emptyResult[e](this.classes.active)}},{key:"_setTableOrder",value:function(){for(var e=0;e<this.$banksItems.length;e++)this._setItemOrder(tX(this.$banksItems[e]))}},{key:"_setItemOrder",value:function(e){var t=+e.attr("data-payment");t=0===t?1e7:t,e.css("order",t)}},{key:"update",value:function(){var e=this;this.hide(),setTimeout(function(){e.setPaymentOnTable(),e._disableItems(),e._setOrdersCount(),e._checkEmptyResult(),e._setTableOrder(),e.loadMoreProgramm(),e.flatPrice.text(e.$banksItems.find(".mortgage-bank__payment-value").first().text())},this.durationAnim),this.show()}},{key:"show",value:function(){var e=this;setTimeout(function(){e.$wrap.addClass("is-ready")},this.durationAnim)}},{key:"hide",value:function(){this.$wrap.removeClass("is-ready")}},{key:"_onChangeSelect",value:function(e){this._changeBanks(e),this._setOrdersCount(),this._checkEmptyResult()}},{key:"_changeBanks",value:function(e){var t=this;this.hide(),setTimeout(function(){Array.from(t.$banksItems).forEach(function(n){var i=tX(n),o=i.attr("data-type");-1!==e.indexOf(o)||-1!==e.indexOf("all")?i.removeClass(t.classes.hidden,t.classes.loadmore):i.addClass(t.classes.hidden)})},this.durationAnim),this.show()}},{key:"_onLeave",value:function(e){e.classList.remove("_show")}},{key:"_onEnter",value:function(e){e.classList.add("_show")}},{key:"_backToFilter",value:function(){var e=this;if(o.isMobile()){var t=this.wrap.querySelector(".mortgage-row__main");P.i.create({trigger:t,start:"top 80px",end:"bottom 80px",onEnter:function(){return e._onEnter(t)},onEnterBack:function(){return e._onEnter(t)},onLeave:function(){return e._onLeave(t)},onLeaveBack:function(){return e._onLeave(t)}})}}},{key:"loadMoreProgramm",value:function(){var e=this,t=this,n=this.$wrap.find(".mortgage-loadmore__button"),i=n.closest(".mortgage-loadmore__wrap"),a=n.find(".mortgage-loadmore__counter"),s=o.isMobile()?5:10,r=this.$banksItems.not(".".concat(t.classes.hidden,", .").concat(this.classes.disabled));n.removeClass(t.classes.active);var l=r.sort(function(e,t){return+e.style.order-+t.style.order}),c=function(){l.not(".".concat(e.classes.disabled)).addClass(t.classes.loadmore),l.slice(0,s).removeClass(t.classes.loadmore);var n=o.pluralWord(l.length-s,["ипотечную программы","ипотечные программы","ипотечных программ"]);a.text("Показать еще ".concat(l.length-s," ").concat(n)),l.length>s?i.show():i.hide()};c(),n.off(),n.on("click",function(e){e.preventDefault(),tX(this).toggleClass(t.classes.active),tX(this).hasClass(t.classes.active)?(l.not(".".concat(t.classes.disabled)).removeClass(t.classes.loadmore),a.text("Свернуть список")):c()})}},{key:"_createRateValues",value:function(){this.banksArray.forEach(function(e){var t=e.dataset.rate.split(",");e.querySelector(".mortgage-bank__rate").innerHTML=t2.createRate(t)})}}],t=[{key:"init",value:function(){var e=document.querySelectorAll("[data-mortgage]");e.length&&e.forEach(function(e){new n().init(e)})}},{key:"initSlider",value:function(e){new e8().initRange({element:e})}},{key:"setInput",value:function(e,t){t.$input.val(e.toLocaleString("ru-Ru")),"limitation[min]"===t.$input.attr("name")&&t.$postfix.text(t2.decodePostfix(e))}},{key:"calcMonthlyPay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e/12/100,o=12*t2.accessStorage("limitation[min]")-n,a=t2.accessStorage("creditAmount")-t,s=i*Math.pow(1+i,o)/(Math.pow(1+i,o)-1)*a;return t>0&&console.log("⟶ ",o,a),s<0?"—":s}},{key:"calcMonthlyPayTranch",value:function(e,t,n){var i=e/12/100,o=i*Math.pow(1+i,n)/(Math.pow(1+i,n)-1)*t;return o<0?"—":o}},{key:"calcPaymentForBank",value:function(e){var t=e.attr("data-rate").split(","),i=2===t.length,o=i&&+e.attr("data-tranch-cost"),a=i&&+e.attr("data-tranch-limit")||24,s="";s=i&&o?t2.isExist(n.calcMonthlyPay(t[0]))?t2.calc("monthlyPaymentPrettyTranche",n.calcMonthlyPayTranch(t[0],o,a),n.calcMonthlyPay(t[1],o,a)):"—":t2.isExist(n.calcMonthlyPay(t[0]))?t2.calc("monthlyPaymentPretty",n.calcMonthlyPay(t[0]),null):"—",e.find(".mortgage-bank__payment-value").html(s);var r="—"!==s?n.calcMonthlyPay(t[0]).toFixed():0;e.attr("data-payment",r)}}],e&&t0(n.prototype,e),t&&t0(n,t),n}();function t6(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}O.p8.registerPlugin(P.i);var t5=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.element=e.element,this.items=this.element.querySelectorAll("[data-scrolling-item"),this.sectionTrigger=this.element.closest("[data-scrolling-trigger"),this.breakpoint=1199}return e=[{key:"init",value:function(){var e=this;o.isBreakpoint(0,this.breakpoint)||(this.trigger=P.i.create({animation:O.p8.to(this.element,{scrollLeft:function(){return e.element.scrollWidth+90-o.getWindowWidth()},ease:"none"}),trigger:this.sectionTrigger,start:function(){return"50% 50%"},end:function(){return"+=".concat(.3*e.element.scrollWidth)},scrub:!0,pin:!0,anticipatePin:.5}))}}],t=[{key:"init",value:function(){var e=document.querySelectorAll("[data-scrolling-list]");e.length&&e.forEach(function(e){new n({element:e}).init()})}}],e&&t6(n.prototype,e),t&&t6(n,t),n}();function t9(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t8=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.elementName="[data-slyscroll], .tab-buttons",this.elements=document.querySelectorAll(this.elementName)}return e=[{key:"init",value:function(){o.isDesktop()||this._bindEvents()}},{key:"_bindEvents",value:function(){this.elements.forEach(function(e){Array.from(e.childNodes).filter(function(e){return"#text"!==e.nodeName}).forEach(function(t){t.addEventListener("click",function(t){var i=t.target;n.scrollToActiveTab(i,e,"center")})})})}},{key:"scrollToStart",value:function(e){if(e)var t=setInterval(function(){e.scrollLeft-=15,e.scrollLeft<=0&&clearInterval(t)},10)}}],t=[{key:"init",value:function(){new n().init()}},{key:"scrollToActiveTab",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center";if(e&&t){var i=t.scrollWidth-t.clientWidth,o=.05*window.screen.width,a=null;"start"===n&&(a=e.offsetLeft-o),"center"===n&&(a=e.offsetLeft-(t.clientWidth-e.clientWidth)/2);var s=setInterval(function(){t.scrollLeft<a&&(t.scrollLeft+=15,(t.scrollLeft>=a||t.scrollLeft>=i)&&r()),t.scrollLeft>a&&(t.scrollLeft-=15,(t.scrollLeft<=a||t.scrollLeft<=0)&&r())},10),r=function(){clearInterval(s),s=null}}}}],e&&t9(n.prototype,e),t&&t9(n,t),n}();function t4(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t7=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.target=e.element,this.direction=e.direction||this.target.dataset.simpleScrollbar,this.isCenter=e.center||!1,this.isPinch=e.pinch||!1,this.bar='<div class="ss-scroll">',this.wrapper=document.createElement("div"),this.wrapper.setAttribute("class","ss-wrapper "),this.content=document.createElement("div"),this.content.setAttribute("class","ss-content"),this.wrapper.appendChild(this.content),this.content.appendChild(this.target.firstElementChild),this.target.appendChild(this.wrapper),this.target.insertAdjacentHTML("beforeend",this.bar),this.bar=this.target.lastChild}return e=[{key:"init",value:function(){this._addClassToContainer(),this._scrollbarGrabbed(),this._moveBar(),this._bindEvents(),!o.isDesktop()&&(this.isCenter&&this._setCenter(),this.isPinch&&this._setPinch())}},{key:"_bindEvents",value:function(){this.target.addEventListener("resize",this._moveBar.bind(this)),this.content.addEventListener("scroll",this._moveBar.bind(this)),this.content.addEventListener("mouseenter",this._moveBar.bind(this));var e=getComputedStyle(this.target);"0px"===e.height&&"0px"!==e["max-height"]&&(this.target.style.height=e["max-height"])}},{key:"_addClassToContainer",value:function(){this.target.classList.add("ss-container"),"left"===this.direction?this.target.classList.add("ss-left"):"bottom"===this.direction?this.target.classList.add("ss-bottom"):this.target.classList.add("ss-right")}},{key:"_scrollbarGrabbed",value:function(){var e,t=this,n=this,i=function(n){var i=n.pageY-e;e=n.pageY,t.content.scrollTop+=i/t.scrollRatio},o=function(){n.bar.classList.remove("ss-grabbed"),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",o)};this.target.addEventListener("mousedown",function(t){e=t.pageY,n.bar.classList.add("ss-grabbed"),document.addEventListener("mousemove",i),document.addEventListener("mouseup",o)})}},{key:"_moveBar",value:function(){"bottom"===this.direction?this._moveBarHorizontal():this._moveBarVertical()}},{key:"_moveBarVertical",value:function(){var e=this.content.scrollHeight,t=this.content.clientHeight;this.scrollRatio=t/e;var n="left"===this.direction?18:-1*(this.target.clientWidth-this.bar.clientWidth);this.scrollRatio>=1?this.bar.classList.add("ss-hidden"):(this.bar.classList.remove("ss-hidden"),this.bar.style.cssText="height:"+Math.max(100*this.scrollRatio,10)+"%; top:"+this.content.scrollTop/e*100+"%;right:"+n+"px;")}},{key:"_moveBarHorizontal",value:function(){var e=this.content.scrollWidth,t=this.content.clientWidth;this.scrollRatio=t/e;var n=this.target.clientHeight-this.bar.clientHeight-4,i=this.content.scrollLeft/e*100,o=98.5-Math.max(100*this.scrollRatio,10);i<2&&(i=1.5),i>o&&(i=o),this.scrollRatio>=1?this.target.classList.add("ss-bottom-hidden"):this.bar.style.cssText="width:"+Math.max(100*this.scrollRatio,10)+"%; left:"+i+"%;top:"+n+"px;"}},{key:"_setCenter",value:function(){var e=this.target.querySelector(".ss-content"),t=this.content.scrollWidth/2-this.content.clientWidth;e.scrollLeft+=t}},{key:"_setPinch",value:function(){var e=this;this.pinch=document.createElement("div"),this.pinch.setAttribute("class","ss-pinch"),this.wrapper.appendChild(this.pinch),this.target.addEventListener("touchstart",function(){e.pinch.style.display="none"})}}],t=[{key:"init",value:function(){var e=document.querySelectorAll("[data-simple-scrollbar]");e.length&&e.forEach(function(e){new n({element:e}).init()});var t=document.querySelectorAll("[data-simple-scrollbar-2]");t.length&&t.forEach(function(e){new n({element:e,direction:"bottom",center:!0,pinch:!0}).init()})}}],e&&t4(n.prototype,e),t&&t4(n,t),n}(),ne=n(843),nt=n(869),nn=n(523);function ni(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var no=function(){var e,t;function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.wrapper=e.element,this.trigger=this.wrapper.querySelectorAll("[data-gallery-zoom-trigger]"),this.items=Array.from(this.wrapper.querySelectorAll("[data-gallery-zoom-item]")),this.isMultyple=this.items.length>1,this.inlineGallery=null}return e=[{key:"init",value:function(){this.trigger&&this.items&&(this._initGallery(),this._bindEvents())}},{key:"_bindEvents",value:function(){var e=this;this.trigger.forEach(function(t){t.addEventListener("click",function(t){t.stopPropagation(),e._open()})})}},{key:"_open",value:function(){var e=this._getIndex();this.inlineGallery.openGallery(e)}},{key:"_initGallery",value:function(){var e={plugins:[nt.Z,nn.Z],selector:"[data-gallery-zoom-item]",licenseKey:"1111-1111-1111-1111",getCaptionFromTitleOrAlt:!1,zoomFromOrigin:!1,download:!1,mobileSettings:{controls:!0,showCloseIcon:!0,download:!1},youTubePlayerParams:{modestbranding:1,showinfo:0,rel:0}};this.inlineGallery=(0,ne.Z)(this.wrapper,e),this.wrapper.classList.add("_inited")}},{key:"_getIndex",value:function(){var e=0;if(this.isMultyple){var t=this.wrapper.querySelector(".tab-content__item.is-active");t.length&&(e=o.getElementIndex(t))}return e}}],t=[{key:"init",value:function(){window.GalleryZoom={};var e=document.querySelectorAll("[data-gallery-zoom]");e.length&&e.forEach(function(e){new n({element:e}).init()}),window.GalleryZoom.update=function(){var e=document.querySelectorAll("[data-gallery-zoom]");e.length&&e.forEach(function(e){e.classList.contains("_inited")||new n({element:e}).init()})}}}],e&&ni(n.prototype,e),t&&ni(n,t),n}();function na(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var ns=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.get=window.location.search,this.cookies=F.Z,this.getObject={},this.utm=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],this.utmID=[["ym_uid","_ym_uid"],["ga_uid","_ga"],["roistat_visit","roistat_visit"]],this.utmCookieCount=0}return e=[{key:"init",value:function(){this._searchStringToObject(),Object.keys(this.getObject).length&&this._addUtmToCookie(),this._checkCookie(),this.utmCookieCount>0&&this._addUtmValueToInputs(),this._addToInputsFromUtmID()}},{key:"_searchStringToObject",value:function(){if(-1!==this.get.indexOf("&")){var e=this.get.slice(1).split("&");this.getObject=e.reduce(function(e,t){return(t=t.split("="))[0].includes("utm")&&(e[t[0]]=t[1]),e},{})}}},{key:"_addUtmToCookie",value:function(){for(var e in this.getObject){var t=this.getObject[e];this._setCookie(e,t)}}},{key:"_checkCookie",value:function(){var e=this;this.utm.forEach(function(t){e._getCookie(t)&&e.utmCookieCount++})}},{key:"_addUtmValueToInputs",value:function(){var e=this;this.formElems=document.querySelectorAll("form"),0!==this.formElems.length&&this.formElems.forEach(function(t){e.utm.forEach(function(n){var i=t.querySelector('input[name="'.concat(n,'"]'));if(i){var o=e._getCookie(n);o&&(i.value=o)}})})}},{key:"_addToInputsFromUtmID",value:function(){var e=this;this.formElems=document.querySelectorAll("form"),0!==this.formElems.length&&this.formElems.forEach(function(t){e.utmID.forEach(function(n){var i=t.querySelector('input[name="'.concat(n[0],'"]'));if(i){var o=e._getCookie(n[1]);o&&(i.value=o)}})})}},{key:"_setCookie",value:function(e,t){this.cookies.set(e,t,{expires:+this.cookieDuration})}},{key:"_getCookie",value:function(e){return this.cookies.get(e)}}],t=[{key:"init",value:function(){new n().init()}}],e&&na(n.prototype,e),t&&na(n,t),n}();function nr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var nl=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.options=e,this.gallery=e.element,this.galleryOpt=e.settings}return e=[{key:"init",value:function(){this.initGallery()}},{key:"initGallery",value:function(){var e=null;e=this.gallery.hasAttribute("data-gallery-item")?"this":this.gallery.classList.contains("j-gallery-slider")?".slick-slide:not(.slick-cloned) .j-gallery-item":"[data-gallery-item]",(0,ne.Z)(this.gallery,{plugins:[nt.Z,nn.Z],selector:e,licenseKey:"1111-1111-1111-1111",getCaptionFromTitleOrAlt:!1,zoomFromOrigin:!1,download:!1,mobileSettings:{controls:!0,showCloseIcon:!0,download:!1},youTubePlayerParams:{modestbranding:1,showinfo:0,rel:0}})}}],t=[{key:"init",value:function(){window.Realty={};var e=document.querySelectorAll("[data-gallery]");e.length&&e.forEach(function(e){new n({element:e}).init()}),window.Realty.updateGallery=function(){var e=document.querySelectorAll("[data-gallery]");e.length&&e.forEach(function(e){e.hasAttribute("data-lg-id")||new n({element:e}).init()})},document.addEventListener("click",function(e){var t=e.target;if(t.classList.contains("j-realty-card-zoom")){var n=e.target.closest(".realty-card").querySelector("[data-gallery-item]");n&&(n.addEventListener("click",function(e){e.stopPropagation()}),n.click())}if(t.classList.contains("j-gallery-trigger-layouts-examles")){var i=e.target.closest(".layouts-examles__image-wrap"),o=i.querySelector("[data-gallery-item]");console.log("⟶ ",i,o),o&&(o.addEventListener("click",function(e){e.stopPropagation()}),o.click())}});var t=document.querySelector(".j-space-main-zoom");t&&t.addEventListener("click",function(e){var t=e.target.closest(".realty-space-main__plan").querySelector(".tab-content__item.is-active").querySelector("[data-gallery-item]");t&&t.click()})}}],e&&nr(n.prototype,e),t&&nr(n,t),n}();function nc(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var nu=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.elem=e,this.openClass="is-open"}return e=[{key:"_init",value:function(){this.elem&&(this._initElements(),this._bindEvents())}},{key:"_initElements",value:function(){this.button=this.elem.querySelector(".j-share-button"),this.tooltipClose=this.elem.querySelector(".j-share-close"),this.copyUrl=this.elem.querySelector(".j-share-url"),this.copyUrlText=this.copyUrl.querySelector(".j-share-url-text")}},{key:"_bindEvents",value:function(){var e=this;this.button.addEventListener("click",this._toggleOpen.bind(this)),this.tooltipClose.addEventListener("click",this._toggleOpen.bind(this)),this.copyUrl.addEventListener("click",function(t){t.preventDefault(),e._copyUrl()}),o.clickOutside([".j-share"],this._close.bind(this),null,!0)}},{key:"_toggleOpen",value:function(){this.elem.classList.toggle(this.openClass),this._changeCopyText()}},{key:"_close",value:function(){this.elem.classList.contains(this.openClass)&&(this.elem.classList.remove(this.openClass),this._changeCopyText())}},{key:"_copyUrl",value:function(){var e=document.createElement("input");e.value=window.location.href,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this._changeCopyText(!0)}},{key:"_changeCopyText",value:function(e){this.copyUrlText.innerHTML=e?"Ссылка скопирована":"Скопировать ссылку"}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll(".j-share");t.length&&t.forEach(function(e){new n(e)._init()})}}],e&&nc(n.prototype,e),t&&nc(n,t),n}();function nh(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var nd=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n)}return e=[{key:"init",value:function(e){this.options={},this.options.targets=e.targets,this.options.autoload=!1!==e.autoload,this.options.quality=e.quality||5,this.options.orientation=e.orientation||"portrait",this.options.pageBreak=e.pageBreak||".pdf__page-break",this.scriptInit=!1,this._bindEvents()}},{key:"_bindEvents",value:function(){var e=this;this.options.targets.forEach(function(t){t.addEventListener("click",e._start.bind(e))})}},{key:"_start",value:function(e){this._collectData(e),this._startPreloader(),this._getScript()}},{key:"_getScript",value:function(){var e=this;this.scriptInit?e._getHtml():o.addScript("https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js",{onload:function(){this.scriptInit=!0,e._getHtml()}})}},{key:"_collectData",value:function(e){this.pageOffset=pageYOffset,this.currentTarget=e.currentTarget;var t=["ajax","element","file"];for(var n in this.dataset=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){var i,o,a;i=e,o=t,a=n[t],o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a})}return e}({},this.currentTarget.dataset),this.currentTarget.hasAttribute("data-autoload")&&(this.options.autoload=!0),this.formData=new FormData,this.dataset)0>t.indexOf(n)&&this.formData.set(n,this.dataset[n])}},{key:"_getHtml",value:function(){if(this.dataset.element){this.html=document.querySelector("".concat(this.dataset.element)).innerHTML,this._createContainer(),this._openPdf(),this._stopPreloader();return}if(this.dataset.ajax){var e=this;o.send(this.formData,this.dataset.ajax,{success:function(t){e.html=t.html,e._createContainer(),e._openPdf(),e._stopPreloader()},error:function(e){console.error("Ошибка при получении данных для pdf - ".concat(e))},complete:function(){}})}}},{key:"_createContainer",value:function(){this.pdfContainer=document.createElement("div"),this.pdfContainer.innerHTML=this.html}},{key:"_openPdf",value:function(){var e=this,t={filename:this.dataset.file||"flat-pdf.pdf",html2canvas:{dpi:300,scale:this.options.quality,y:this.pageOffset,letterRendering:!0,useCORS:!0},jsPDF:{unit:"mm",format:"a4",orientation:this.options.orientation},pagebreak:{after:this.options.pageBreak},margin:0};return new Promise(function(n){if(e.options.autoload){html2pdf().set(t).from(e.pdfContainer).save().then(function(){n()});return}html2pdf().set(t).from(e.pdfContainer).toPdf().get("pdf").then(function(e){window.open(e.output("bloburl"),"_blank"),n()})})}},{key:"_startPreloader",value:function(){this.currentTarget.classList.add("is-loading")}},{key:"_stopPreloader",value:function(){this.currentTarget.classList.remove("is-loading")}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=Array.from(e.querySelectorAll(".j-html2pdf"));t.length&&new n().init({targets:t,autoload:!1})}}],e&&nh(n.prototype,e),t&&nh(n,t),n}();function np(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var nf=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.link=e.element,this.id=this.link.getAttribute("href"),this.popupContent=null,this.html=document.querySelector("html"),this.body=document.body}return e=[{key:"init",value:function(){this._bindLinkEvents()}},{key:"_bindLinkEvents",value:function(){this.link.addEventListener("click",this._openPopup.bind(this))}},{key:"_bindContentEvents",value:function(){this.overlay.addEventListener("click",this._popupClose.bind(this)),this.closeButton.addEventListener("click",this._popupClose.bind(this))}},{key:"_openPopup",value:function(e){e.preventDefault(),this._getContent(this.id),this.popupContent&&(o.bodyFixed(this.popupContent),this._setTemplate(this.popupContent),this._insertTemplate(),this._getElements(),this.popupTop.style.display="flex",this.popupTop.classList.add("_show"),this.html.classList.add("_open-popup-bottom"))}},{key:"_popupClose",value:function(){var e=this;this.popupTop.classList.add("_hide"),setTimeout(function(){e.popupTop.classList.remove("_show"),e.popupTop.classList.remove("_hide"),e.html.classList.add("_open-popup-bottom"),e.popupTop.style.display="none",o.bodyStatic(),e._removeTemplate()},300)}},{key:"_getContent",value:function(e){this.popupContent=document.querySelector(e),this.popupContent||console.error("[PopupBottom]: Упсс... не найден попап ",e)}},{key:"_getElements",value:function(){this.popupTop=document.querySelector(".popup-bottom-top"),this.overlay=this.popupTop.querySelector(".popup-bottom__overlay"),this.closeButton=this.popupTop.querySelector(".popup-bottom__content-close"),this._bindContentEvents()}},{key:"_setTemplate",value:function(e){this.template='<div class="popup-bottom-top">'.concat(e.innerHTML,"</div>")}},{key:"_insertTemplate",value:function(){this.body.insertAdjacentHTML("afterbegin",this.template)}},{key:"_removeTemplate",value:function(){o.removeElement(this.popupTop)}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll("[data-popup-bottom-link]");t.length&&t.forEach(function(e){new n({element:e}).init()})}}],e&&np(n.prototype,e),t&&np(n,t),n}();function nm(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}O.p8.registerPlugin(P.i);var nv=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.filtresWrapper=e,this.filtresResults=document.querySelector(".realty-results"),this.filtresMobile=document.querySelector(".realty-results__mobile"),this.toggleButtons=document.querySelectorAll(".realty-filtres__mobile-button-toggle, .realty-results__mobile-button-toggle"),this.filtresMobileCloseButton=this.filtresWrapper.querySelector(".realty-filtres__mobile-close"),this.html=document.querySelector("html"),this.desktopBreakpoint=768}return e=[{key:"init",value:function(){this.filtresMobile&&window.innerWidth<this.desktopBreakpoint&&(this._buttonFixed(),this._bindEvents())}},{key:"_bindEvents",value:function(){var e=this;this.toggleButtons.forEach(function(t){t.addEventListener("click",e._openFilter.bind(e))}),this.filtresMobileCloseButton&&this.filtresMobileCloseButton.addEventListener("click",this._closeFilter.bind(this))}},{key:"_buttonFixed",value:function(){var e=this;this.filtresResults&&P.i.create({trigger:this.filtresResults,start:"300px 50%",end:"bottom 50%",onEnter:function(){return e._showButton()},onEnterBack:function(){return e._showButton()},onLeave:function(){return e._hideButton()},onLeaveBack:function(){return e._hideButton()}})}},{key:"_openFilter",value:function(){this.html.classList.add("_realty-filtres-open")}},{key:"_closeFilter",value:function(){this.html.classList.remove("_realty-filtres-open")}},{key:"_hideButton",value:function(){this.filtresMobile.classList.remove("is-active")}},{key:"_showButton",value:function(){this.filtresMobile.classList.add("is-active")}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelector(".realty-filtres__wrapper");t&&new n(t).init()}}],e&&nm(n.prototype,e),t&&nm(n,t),n}(),ny=n(755);function ng(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var nb=new m,n_=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.element=e.element}return e=[{key:"init",value:function(){this.trigger=this.element.querySelector(".realty-filtres__controls-button-reset"),this.trigger&&(this.selectAll=this.element.querySelectorAll(".j-select"),this.checkboxAll=this.element.querySelectorAll('input[type="checkbox"]'),this._bindEvents())}},{key:"_bindEvents",value:function(){this.trigger.addEventListener("click",this._resetElems.bind(this))}},{key:"_resetElems",value:function(){nb.publish("resetFilter",this.element),this.checkboxAll&&this.checkboxAll.forEach(function(e){e.checked=!1}),this.selectAll&&this.selectAll.forEach(function(e){var t=e.querySelector("option").value;ny(e).val(t).trigger("change.select2")})}}],t=[{key:"init",value:function(){var e=document.querySelectorAll(".realty-filtres__form");e.length&&e.forEach(function(e){new n({element:e}).init()})}}],e&&ng(n.prototype,e),t&&ng(n,t),n}();function nk(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var nw=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.wrapper=e.element,this.trigger=this.wrapper.querySelector(".form-switch input"),this.cards=this.wrapper.querySelectorAll(".realty-card"),console.log("⟶ ",this.cards),this.stateChecked=!1}return e=[{key:"init",value:function(){this._bindEvents(),this._checkCards()}},{key:"_bindEvents",value:function(){this.trigger.addEventListener("change",this._changeState.bind(this))}},{key:"_changeState",value:function(){this.stateChecked=this.trigger.checked}},{key:"_checkCards",value:function(){for(var e=0;e<this.cards.length;e++)console.log("⟶ ",this.cards[e])}}],t=[{key:"init",value:function(){var e=document.querySelectorAll("[data-filter-compare");e.length&&e.forEach(function(e){new n({element:e}).init()})}}],e&&nk(n.prototype,e),t&&nk(n,t),n}();n.p,window.Site||(window.Site={},window.Site.Modules={});var nS=new u;nS.register([Z,H,x,t5,$,eX,eQ,e7,W,e$,ey,eg,eb,to,eE,ew,e3,e8,ei,eo,_,ts,t3,tU,tl,nl,nu,nd,nf,nv,n_,nw,t8,no,t7,ns]),o.handlerDocumentReady(function(){nS.init()})}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=o,s.amdD=function(){throw Error("define cannot be used indirect")},s.amdO={},e=[],s.O=function(t,n,i,o){if(n){o=o||0;for(var a=e.length;a>0&&e[a-1][2]>o;a--)e[a]=e[a-1];e[a]=[n,i,o];return}for(var r=1/0,a=0;a<e.length;a++){for(var n=e[a][0],i=e[a][1],o=e[a][2],l=!0,c=0;c<n.length;c++)r>=o&&Object.keys(s.O).every(function(e){return s.O[e](n[c])})?n.splice(c--,1):(l=!1,o<r&&(r=o));if(l){e.splice(a--,1);var u=i();void 0!==u&&(t=u)}}return t},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},s.p="",t={179:0},s.O.j=function(e){return 0===t[e]},n=function(e,n){var i,o,a=n[0],r=n[1],l=n[2],c=0;if(a.some(function(e){return 0!==t[e]})){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(l)var u=l(s)}for(e&&e(n);c<a.length;c++)o=a[c],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(u)},(i=self.webpackChunkwebpacktemplate=self.webpackChunkwebpacktemplate||[]).forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i));var r=s.O(void 0,[216],function(){return s(315)});s.O(r)}();
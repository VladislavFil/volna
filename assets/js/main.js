!function(){"use strict";var e,t,n,i,o={166:function(e,t,n){var i=n(208),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e)}return function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e,[{key:"handlerDocumentReady",value:function(e){return"function"==typeof e&&("interactive"===document.readyState||"complete"===document.readyState?e():document.addEventListener("DOMContentLoaded",e))}},{key:"removeElement",value:function(e){e.parentNode.removeChild(e)}},{key:"siblings",value:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return Array.from(e.parentNode.children).filter(function(n){return t?n:n!==e})}},{key:"show",value:function(e){e.style.display="block"}},{key:"hide",value:function(e){e.style.display="none"}},{key:"clearHtml",value:function(e){e.innerHTML=""}},{key:"insetContent",value:function(e,t){"string"==typeof t?e.insertAdjacentHTML("beforeend",t):"object"==typeof t&&e.appendChild(t)}},{key:"keyExist",value:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},{key:"isEmptyObject",value:function(e){return 0===Object.keys(e).length}},{key:"isString",value:function(e){return"string"==typeof e}},{key:"getWindowHeight",value:function(){return window.innerHeight||document.documentElement.clientHeight}},{key:"getWindowWidth",value:function(){return window.innerWidth||document.documentElement.clientWidth}},{key:"getScrollTop",value:function(){return window.scrollY||document.documentElement.scrollTop}},{key:"isTouchDevice",value:function(){var e,t;return!!("undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&"undefined"!=typeof document&&(e=document,null!=(t=window.DocumentTouch)&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t)))||!!("undefined"!=typeof navigator&&(navigator.maxTouchPoints||navigator.msMaxTouchPoints))}},{key:"isBreakpoint",value:function(e,t){return window.innerWidth>=e&&window.innerWidth<t}},{key:"isDesktop",value:function(){return window.innerWidth>1199}},{key:"isTablet",value:function(){return window.innerWidth<1023}},{key:"isMobile",value:function(){return window.innerWidth<768}},{key:"youTubeGetId",value:function(e){return e.match(/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be[.]?\/|youtube\.com[.]?\/(?:embed\/|v\/|watch\/?\?(?:\S+=\S*&)*v=))([\w-]{11})\S*$/)?RegExp.$1:void 0}},{key:"numberFormatted",value:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")}},{key:"getElementIndex",value:function(e){for(var t=0;e=e.previousElementSibling;)t++;return t}},{key:"getElementOffset",value:function(e){var t=document.documentElement,n=e.getBoundingClientRect();return{top:n.top+window.pageYOffset-t.clientTop,left:n.left+window.pageXOffset-t.clientLeft}}},{key:"loadScript",value:function(e,t){var n=document.createElement("script");n.onload=function(){if(t)return t()},n.src=e,document.getElementsByTagName("head")[0].appendChild(n)}},{key:"send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"POST";fetch(t,{method:i,body:JSON.stringify(e),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(e){return e.json()}).then(function(e){n.success(e),n.complete&&n.complete()}).catch(function(e){n.error&&n.error(e)})}},{key:"throttle",value:function(e,t){var n=null;return function(i){var o=n;n=Date.now(),(void 0===o||n-o>t)&&e(i)}}},{key:"debounce",value:function(e,t){var n=this,i=null;return function(o){var a=i;i=Date.now(),a&&i-a<=t&&clearTimeout(n.lastCallTimer),n.lastCallTimer=setTimeout(function(){e(o)},t)}}},{key:"wrapContent",value:function(e,t,n){var i=document.createElement(t);return n&&i.classList.add(n),e.parentNode.insertBefore(i,e),i.appendChild(e)}},{key:"bodyFixed",value:function(e){var t="".concat(window.innerWidth-document.documentElement.clientWidth,"px");(0,i.mh)(e,{reserveScrollBarGap:!0}),setTimeout(function(){var e=document.documentElement;e&&e.style.setProperty("--lock-offset",t)})}},{key:"bodyStatic",value:function(){(0,i.qY)(),setTimeout(function(){var e=document.documentElement;e&&e.style.setProperty("--lock-offset","")})}},{key:"convertToNumber",value:function(e){return parseFloat(e.toString().replace(/\s/g,""))}},{key:"replaceSpace",value:function(e){return e.replace(/\s/g,"")}},{key:"convertToDigit",value:function(e){return Number(e)?Number(e).toLocaleString("ru-Ru"):e}},{key:"convertToRank",value:function(e,t){return Number(e)/t}},{key:"pluralWord",value:function(e,t){return t[e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2]}},{key:"getUrlParams",value:function(e){return new URLSearchParams(window.location.search).get(e)}},{key:"isElement",value:function(e){return!!e.tagName}},{key:"closest",value:function(e,t){return!!e&&!!t&&e.closest(t)}},{key:"isInViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.getBoundingClientRect(),i=n.top+t,o=n.left+t,a=window.innerHeight||document.documentElement.clientHeight,s=window.innerWidth||document.documentElement.clientWidth,r=i<=a&&i+n.height>=0,l=o<=s&&o+n.width>=0;return r&&l}},{key:"hyphenate",value:function(e){var t=e,n="[а-яА-Я]",i="[аеёиоуыэюяАЕЁИОУЫЭЮЯ]",o="[бвгджзклмнпрстфхцчшщБВГДЖЗКЛМНПРСТФХЦШЩ]",a=[];a[1]=RegExp("(".concat("[йъьЙЪЬ]",")(").concat(n).concat(n,")"),"ig"),a[2]=RegExp("(".concat(i,")(").concat(i).concat(n,")"),"ig"),a[4]=RegExp("(".concat(i).concat(o,")(").concat(o).concat(i,")"),"ig"),a[3]=RegExp("(".concat(o).concat(i,")(").concat(o).concat(i,")"),"ig"),a[5]=RegExp("(".concat(i).concat(o,")(").concat(o).concat(o).concat(i,")"),"ig"),a[6]=RegExp("(".concat(i).concat(o).concat(o,")(").concat(o).concat(o).concat(i,")"),"ig");for(var s=0;s<2;++s)for(var r=0;r<=6;++r)t=t.replace(a[r],"$1".concat("\xad","$2"));return t}},{key:"checkInternetConnection",value:function(){return navigator.onLine}},{key:"isWindows",value:function(){var e,t;return -1!==["Win32","Win64","Windows","WinCE"].indexOf((null===(t=window.navigator)||void 0===t?void 0:null===(e=t.userAgentData)||void 0===e?void 0:e.platform)||window.navigator.platform)}},{key:"cubicProgress",value:function(e){return(e=((e=e<0?0:e)>1?1:e)/.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},{key:"now",value:function(){return window.performance&&window.performance.now?window.performance.now():+new Date}},{key:"toBase64",value:function(e){return window.btoa(unescape(encodeURIComponent(e)))}},{key:"fromBase64",value:function(e){return decodeURIComponent(escape(window.atob(e)))}},{key:"clickOutside",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){var o=[];e.nodeType===Node.ELEMENT_NODE?o=[[e]]:"string"==typeof e?o.push(Array.from(document.querySelectorAll(e))):Array.from(e).forEach(function(e){o.push(Array.from(document.querySelectorAll(e)))}),document.addEventListener("click",function(a){var s=a.target;i&&(o=[],e.nodeType===Node.ELEMENT_NODE?o=[[e]]:"string"==typeof e?o.push(Array.from(document.querySelectorAll(e))):Array.from(e).forEach(function(e){o.push(Array.from(document.querySelectorAll(e)))}));do{try{o.forEach(function(e){if(-1!==e.indexOf(s))throw n(),!1})}catch(e){return}s=s.parentNode}while(s);t()})}}},{key:"addScript",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=document.createElement("script");i.type="application/javascript",i.src=e,i.onload=n.onload,i.onerror=function(e){console.warn("Ошибка загрузки "+t.src),n.onerror(e)},document.head.appendChild(i)}}]),e}();function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function s(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r=null,l=function(){var e;function t(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.components=[],r||(r=this),r}return e=[{key:"register",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.components=s(this.components).concat(s(e)),!0}},{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return this.components.length&&Array.from(this.components).forEach(function(t){t.init(e),document.dispatchEvent(new CustomEvent("afterInitComponent",{detail:{component:t,context:e}}))}),!0}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}(),c=n(700),u=n(571),h=null,d=function(){var e;function t(){return!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),h||(h=this),this.channels={},h}return e=[{key:"subscribe",value:function(e,t){this.channels[e]||(this.channels[e]=[]),this.channels[e].push({context:this,callback:t})}},{key:"unsubscribe",value:function(e){return!!this.channels[e]&&(delete this.channels[e],this)}},{key:"publish",value:function(e){if(!this.channels[e])return!1;var t=Array.prototype.slice.call(arguments,1);return this.channels[e].forEach(function(e){e.callback.apply(e.context,t)}),this}},{key:"installTo",value:function(e){e.channels={},e.publish=this.publish,e.subscribe=this.subscribe}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}();function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}new d,c.os.registerPlugin(u.I);var f=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.elem=e.elem,this.maxScrollTop=null}return e=[{key:"init",value:function(){this._bindEvents()}},{key:"_bindEvents",value:function(){var e=this;this.elem.addEventListener("click",function(t){t.preventDefault(),e._scrollTo()})}},{key:"_scrollTo",value:function(){if(this.elem.hasAttribute("href")){var e=this.elem.getAttribute("href");this._scrollToAnchor(e)}else if(this.elem.dataset.scrollTo){var t=this.elem.dataset.scrollTo;this._scrollToAnchor(t)}}},{key:"_scrollToAnchor",value:function(e){var t=document.querySelector(e);if(!t){console.warn("Не найдет элемент с id "+e);return}e=t.getBoundingClientRect().top+(window.scrollY||document.body.scrollTop),this._scrollBy(e)}},{key:"_scrollBy",value:function(e){this._updateMaxScroll();var t=e>this.maxScrollTop?this.maxScrollTop:e,n=Math.abs(window.scrollY-t)/500;n=(n<.15?.15:n)>1?1:n,c.os.to(window,{duration:n,scrollTo:{y:t,autoKill:!1},ease:n>=.5?"power4.inOut":""})}},{key:"_updateMaxScroll",value:function(){this.maxScrollTop=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)-window.innerHeight}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll("[data-scroll-to]");t.length&&t.forEach(function(e){new n({elem:e}).init()})}}],e&&p(n.prototype,e),t&&p(n,t),n}();function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var v=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.classNameArray=[],this.userAgent=navigator.userAgent.toLowerCase(),this.htmlElem=document.documentElement,this.isKit=document.querySelector(".kit-wrapper")||!1}return e=[{key:"init",value:function(){this._detectPlatform(),this._detectSystem(),this._detectBrowser(),this._setEnvironmentObject()}},{key:"_detectPlatform",value:function(){this.platformName=/iphone|ipod|ipad|iPad|android|iemobile|blackberry|bada/i.test(this.userAgent)?"mobile":"desktop"}},{key:"_detectSystem",value:function(){var e="";/ipad|iphone|ipod/i.test(this.userAgent)?e="ios":/android/i.test(this.userAgent)?e="android":/win/i.test(this.userAgent)?e="win":/mac/i.test(this.userAgent)?e="mac":/linux/i.test(this.userAgent)&&(e="linux"),this.osName=e,this.classNameArray.push("_".concat(e))}},{key:"_detectBrowser",value:function(){var e="";/firefox/i.test(this.userAgent)?e="ff":/opr/i.test(this.userAgent)?e="opera":/yabrowser/i.test(this.userAgent)?e="yandex":/edge/i.test(this.userAgent)?e="edge":/safari/i.test(this.userAgent)&&!/chrome/i.test(this.userAgent)?e="safari":/chrome/i.test(this.userAgent)?e="chrome":/trident|explorer|msie/i.test(this.userAgent)&&(e="ie"),this.browserName=e,this.classNameArray.push("_".concat(e))}},{key:"_detectWebM",value:function(){var e=document.createElement("canvas"),t=!1;e.getContext&&e.getContext("2d")&&0===e.toDataURL("image/webp").indexOf("data:image/webp")&&(t=!0),this.supportsWebM=t,this.classNameArray.push(t?"_webm":"_no-webm")}},{key:"_setEnvironmentObject",value:function(){window.environmentObject={platform:this.platformName,os:this.osName,browser:this.browserName,isLocal:0===window.location.href.indexOf("http://localhost:"),isRetina:window.devicePixelRatio>1,isInnerPage:this.htmlElem.classList.contains("_inner-page"),isKitPage:!!this.isKit,supportsWebM:this.supportsWebM}}},{key:"_addHtmlClass",value:function(){this.htmlElem.className+=" "+this.classNameArray.join(" ")}}],t=[{key:"init",value:function(){new n().init()}}],e&&m(n.prototype,e),t&&m(n,t),n}(),y=n(319);function g(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var b=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n)}return e=[{key:"init",value:function(){var e=window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"));var t=(0,y.s)(10,function(){if(window.matchMedia("(max-width: 1024px)").matches){var e=window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}},100),n=(0,y.s)(10,function(){if(window.matchMedia("(max-width: 1024px)").matches){var e=window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}},50);return window.addEventListener("resize",t),window.addEventListener("orientationchange",n),function(){window.removeEventListener("resize",t),window.removeEventListener("orientationchange",n)}}}],t=[{key:"init",value:function(){new n().init()}}],e&&g(n.prototype,e),t&&g(n,t),n}();function _(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var k=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.htmlElem=document.documentElement,this.headingElem=document.querySelector(".heading-image"),this.mainSliderElem=document.querySelector(".main-slider")}return e=[{key:"init",value:function(){this._headerTheme(),this._headingImage(),this._modPages(),this._pageTheme(),this._footerTheme()}},{key:"_headerTheme",value:function(){if(this.headingElem||this.mainSliderElem){var e=document.querySelector(".header");e.classList.remove("header-theme--light"),e.classList.add("header-theme--transparent")}}},{key:"_headingImage",value:function(){this.headingElem&&(this.headingElem.classList.contains("heading-image--image")&&this.htmlElem.classList.add("_heading-image"),this.headingElem.classList.contains("heading-image--dark")&&this.htmlElem.classList.add("_heading-dark"),this.headingElem.classList.contains("heading-image--light")&&this.htmlElem.classList.add("_heading-light"))}},{key:"_modPages",value:function(){var e=document.querySelector(".contacts-map-block--bottom"),t=document.querySelector(".heading-image__title");e&&this.htmlElem.classList.add("_footer-fill"),(null==t?void 0:t.innerText)==="Контакты"&&this.htmlElem.classList.add("_page-contacts")}},{key:"_pageTheme",value:function(){this.headingElem||this.mainSliderElem||this.htmlElem.classList.add("_page-inner")}},{key:"_footerTheme",value:function(){if(!document.querySelector(".action-form__section")){var e=document.querySelector(".footer");e&&e.classList.add("waves-top")}}}],t=[{key:"init",value:function(){new n().init()}}],e&&_(n.prototype,e),t&&_(n,t),n}(),w=n(144),S=n.n(w);function E(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function x(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function C(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),e}var T=new d,O=function(){function e(){E(this,e)}return C(e,null,[{key:"init",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],new L().init(),new P().init()}}]),e}(),P=function(){function e(){E(this,e),this.lazyloadEnter=null}return C(e,[{key:"init",value:function(){this.subscibe()}},{key:"subscibe",value:function(){var e=this;T.subscribe("preloader:end",function(){setTimeout(function(){e.start()},300)})}},{key:"start",value:function(){this.lazyloadEnter=new(S())({elements_selector:"[data-lazy-enter]",threshold:400,callback_exit:this._onEnter.bind(this,"exit",1),callback_enter:this._onEnter.bind(this,"enter",0)})}},{key:"_onEnter",value:function(e,t,n){var i=n.getAttribute("data-lazy-enter").split(",")[t];n.classList.contains("_".concat(e))||(T.publish(i,n),n.classList.add("_".concat(e)))}}]),e}(),L=function(){function e(){E(this,e),this.lazyloadImage=null}return C(e,[{key:"init",value:function(){this.lazyloadImage=new(S())({elements_selector:".lazy",threshold:300,unobserve_entered:!0,callback_error:function(e){}})}}]),e}();function A(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var j=new d,I=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.preloader=document.querySelector(".preloader"),this.html=document.documentElement,this.timeOnView=600}return e=[{key:"init",value:function(){this.preloader&&this._subscribe()}},{key:"_subscribe",value:function(){var e=this;j.subscribe("animation:inited",function(){e._bindEvents()})}},{key:"_bindEvents",value:function(){var e=this;o.handlerDocumentReady(function(){setTimeout(function(){e._hide()},e.timeOnView)})}},{key:"_hide",value:function(){var e=this;this.preloader.classList.add("_ready"),this.html.classList.add("_loaded"),j.publish("preloader:end"),setTimeout(function(){o.removeElement(e.preloader)},1e3)}}],t=[{key:"init",value:function(){new n().init()}}],e&&A(n.prototype,e),t&&A(n,t),n}(),M=n(575);function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function B(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function D(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return q(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}c.os.registerPlugin(M.u);var N=function(){var e,t;function n(){var e=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.parallaxElems=D(document.querySelectorAll("[data-plx-elem]")).map(function(t){return e._getParams(t,"data-plx-elem")}),this.parallaxImages=D(document.querySelectorAll("[data-plx-image]")).map(function(t){return e._getParams(t,"data-plx-image")}),this.parallaxSections=D(document.querySelectorAll("[data-plx-section]")).map(function(t){return e._getParams(t,"data-plx-section")}),this.parallaxSpeeds=D(document.querySelectorAll("[data-plx-speed]")).map(function(t){return e._getParams(t,"data-plx-speed")}),this.parallaxTitleds=D(document.querySelectorAll("[data-plx-titled]")),this.parallaxPinchElem=document.querySelector("[data-plx-pinch]"),this.viewHeight=window.innerHeight,this.scrollPosition=o.getScrollTop()}return e=[{key:"init",value:function(){this._start()}},{key:"_start",value:function(){var e=this;this.parallaxElems.forEach(function(t){e._parallaxElem(t)}),this.parallaxImages.forEach(function(t){e._parallaxImage(t)}),this.parallaxSections.forEach(function(t){e._parallaxSection(t)}),this.parallaxSpeeds.forEach(function(t){e._parallaxSpeed(t)}),this.parallaxTitleds.forEach(function(t){e._parallaxTitled(t)}),this.parallaxPinchElem&&this._parallaxPinch()}},{key:"_parallaxSpeed",value:function(e){var t=e.target,n=t.closest("[data-plx-wrap]"),i=n.offsetWidth,o=n.offsetHeight,a=t.firstChild;if(a&&"IMG"===a.tagName){var s=.5*i,r=.5*o;s=-(-.004*(s*e.x)),r=-(-.004*(r*e.y)),t.style.setProperty("left","-".concat(s,"px")),t.style.setProperty("width","calc(100% + ".concat(2*s,"px)")),t.style.setProperty("top","-".concat(r,"px")),t.style.setProperty("height","calc(100% + ".concat(2*r,"px)"))}n.addEventListener("mousemove",function(n){var a=n.pageX-.5*i,s=n.pageY-.5*o;c.os.to(t,{x:-((t.offsetLeft+a*e.x)*.004),y:-((t.offsetTop+s*e.y)*.004),duration:1})})}},{key:"_parallaxElem",value:function(e){var t=e.target;c.os.set(t,{force3D:!0});var n={trigger:t,start:"top bottom",end:"bottom 90%",scrub:!0},i=10*e.x,o=10*e.y;c.os.fromTo(t,{opacity:e.fade?0:1,duration:1},{opacity:1,scrollTrigger:n}),c.os.fromTo(t,{y:0,x:0,duration:9},{y:o,x:i,scrollTrigger:n})}},{key:"_parallaxSection",value:function(e){var t=this,n=e.target,i=n.hasAttribute("data-plx-top");c.os.fromTo(n,{y:i?"".concat(-window.innerHeight*this._getRatio(n),"px"):"0px"},{y:function(){return"".concat(window.innerHeight*(1-t._getRatio(n)),"px")},ease:"none",scrollTrigger:{trigger:n,start:function(){return i?"top bottom":"top top"},end:"bottom top",scrub:!0,invalidateOnRefresh:!0}})}},{key:"_parallaxImage",value:function(e){n.parallaxImage(e.target)}},{key:"_parallaxTitled",value:function(e){var t=e.closest("[data-plx-wrap]"),n=t?t.querySelector("[data-plx-titled-title]"):null,i=Math.round(window.innerHeight/100*15);if(c.os.fromTo(e,{y:"-".concat(i)},{y:"".concat(i),ease:"none",scrollTrigger:{trigger:e,start:"top bottom",end:"bottom top",scrub:!0}}),n){var o=c.os.timeline({scrollTrigger:{trigger:e,start:"".concat(i," center"),end:"bottom center",scrub:!0,pin:n,pinSpacer:!1}});o.from(n,{autoAlpha:0,scaleY:1.2},"start"),o.to(n,{autoAlpha:1,scaleY:1},"start+=0.025"),o.to(n,{autoAlpha:0,scaleY:1.2},"start+=0.9")}}},{key:"_parallaxPinch",value:function(){var e=this,t=this.parallaxPinchElem.querySelector("[data-plx-pinch-video]");t?t.addEventListener("loadeddata",function(){c.os.to(e.parallaxPinchElem,{scale:.8,y:"20%",scrollTrigger:{trigger:e.parallaxPinchElem,start:"top top",end:"bottom top",scrub:!0,markers:!0,onEnter:function(){return t.play()},onEnterBack:function(){return t.play()},onLeave:function(){return t.pause()}}})}):c.os.to(this.parallaxPinchElem,{scale:.8,y:"20%",scrollTrigger:{trigger:this.parallaxPinchElem,start:"top top",end:"bottom top",scrub:!0}})}},{key:"_getRatio",value:function(e){return window.innerHeight/(window.innerHeight+e.offsetHeight)}},{key:"_getParams",value:function(e,t){var n,i,a,s,r=e.getAttribute(t),l=e.getAttribute("data-plx-fade");"data-plx-speed"===t?(n=r.split(",")[0],i=r.split(",")[1]||0,a=r.split(",")[2]||0,s=r.split(",")[3]||0):(i=r.split(",")[0],s=r.split(",")[1]||0,n=r.split(",")[2]||0,a=r.split(",")[3]||0);var c=parseInt(o.isDesktop()?i:s);c=Number.isNaN(c)?10:c;var u=parseInt(o.isDesktop()?n:a);return{target:e,y:c,x:u=Number.isNaN(u)?10:u,fade:null!==l}}}],t=[{key:"parallaxImage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=e.closest("[data-plx-wrap]")||e.parentNode,i=n?n.querySelector("[data-plx-label]"):null;e.onload=function(){c.os.to(e,{scrollTrigger:{scroller:t,trigger:n,scrub:.5,invalidateOnRefresh:!0},y:n.offsetHeight-e.offsetHeight,ease:"none"}),i&&(c.os.set(i,{autoAlpha:0}),c.os.to(i,{autoAlpha:1,scrollTrigger:{trigger:e,start:"top bottom",end:"bottom center",scrub:1}}))}}}],e&&B(n.prototype,e),t&&B(n,t),n}();function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function R(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function z(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return $(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}c.os.registerPlugin(M.u);var H=new d,F=function(){var e,t;function n(){var e=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.wrapper=document.querySelector("body"),this.blockSelector="[data-anim]",this.animationObjects=c.os.utils.toArray(this.blockSelector),this.animationSettings={delayAfterPreloader:600,breakpoint:1},this.gsapSettings={ease:"power2.out",duration:.9,delay:0,scrub:!o.isDesktop()&&2},this.animationObjects=z(this.wrapper.querySelectorAll(this.blockSelector)).map(function(t){var n,i,o,a;return{animationBlock:t,items:z(t.querySelectorAll("\n                  [data-anim-item]")),delay:(null===(n=t.dataset)||void 0===n?void 0:n.animDelay)||0,duration:(null===(i=t.dataset)||void 0===i?void 0:i.animDuration)||e.gsapSettings.duration,isOnly:t.hasAttribute("data-anim-only")||!1,type:(null===(o=t.dataset)||void 0===o?void 0:o.anim)||"fadeIn",ease:(null===(a=t.dataset)||void 0===a?void 0:a.animEase)||e.gsapSettings.ease}}),c.os.config({nullTargetWarn:!1})}return e=[{key:"init",value:function(){if(this._initOtherAnimations(),!o.isDesktop()){H.publish("animation:inited");return}this._animationInit(),this._subscribes()}},{key:"_subscribes",value:function(){var e=this;H.subscribe("preloader:end",function(){setTimeout(function(){e.animationObjects.forEach(function(t){e._show(t.animationBlock),e._animateMove(t)}),e._updateAnimation()},e.animationSettings.delayAfterPreloader)})}},{key:"_getScrollSettings",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i={trigger:e,start:o.isDesktop()?"top 80%":"top 95%",end:"top 60%",scrub:this.gsapSettings.scrub,once:!0,toggleActions:"play none none reverse"};return n.onEnter&&(i.onEnter=n.onEnter),i}},{key:"_counterRowItems",value:function(e){var t=e.animationBlock,n=t.querySelector("[data-anim-item], .col");return Math.trunc(t.getBoundingClientRect().width/n.getBoundingClientRect().width)}},{key:"_animationInit",value:function(){var e=this;new N().init(),this.animationObjects.forEach(function(t){e._hide(t.animationBlock)}),H.publish("animation:inited")}},{key:"_initOtherAnimations",value:function(){}},{key:"_animateMove",value:function(e){var t=this,n=e.animationBlock,i=e.items.length?e.items:n,o=[];if(i.length){for(var a=this._counterRowItems(e),s=0;s<i.length;s+=a){var r=i.slice(s,s+a);o.push(r)}o.forEach(function(n){var i=c.os.timeline({scrollTrigger:t._getScrollSettings(n,e)}),o=t._animatePosition(e.type);i.fromTo(n,{opacity:0,x:o.x,y:o.y},{opacity:1,y:0,x:0,duration:e.duration,delay:e.delay||0,ease:e.ease||t.gsapSettings.ease,stagger:.15})})}else{var l=c.os.timeline({scrollTrigger:this._getScrollSettings(n,e,{onEnter:function(){}})});if("clipPath"===e.type){this._setClipPathAnimation(e);return}var u=this._animatePosition(e.type);l.fromTo(n,{opacity:0,y:u.y,x:u.x,scale:u.scale},{opacity:1,y:0,x:0,scale:1,duration:e.duration,delay:e.delay||0,ease:e.ease||this.gsapSettings.ease})}}},{key:"_animatePosition",value:function(e){var t=0,n=0,i=1;switch(e){case"fadeIn":break;case"fadeInTop":n="30";break;case"fadeInDown":n="-30";break;case"fadeInLeft":t=o.isDesktop()?"-30":0;break;case"fadeInRight":t=o.isDesktop()?"30":0;break;case"zoomIn":i=.5}return{x:t,y:n,scale:i}}},{key:"_setClipPathAnimation",value:function(e){var t=this,n=e.animationBlock,i=e.animationBlock.querySelector("img");n.style.overflow="hidden",c.os.timeline({scrollTrigger:this._getScrollSettings(n,e,{onEnter:function(){t._show(n)}})}).from(i,{scale:1.2}).fromTo(n,{css:{opacity:0,clipPath:"polygon(0 0, 0 0, 0 100%, 0% 100%)",webkitClipPath:"polygon(0 0, 0 0, 0 100%, 0% 100%)"}},{css:{opacity:1,clipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%)",webkitClipPath:"polygon(0 0, 100% 0, 100% 100%, 0 100%)"},duration:e.duration,ease:e.ease||this.gsapSettings.ease},0)}},{key:"_updateAnimation",value:function(){var e=document.body.scrollHeight;window.addEventListener("scroll",(0,y.s)(10,function(){var t=document.body.scrollHeight;t!==e&&(M.u.refresh(!0),e=t)}))}},{key:"_hide",value:function(e){c.os.set(e,{opacity:0})}},{key:"_show",value:function(e){c.os.set(e,{opacity:1})}}],t=[{key:"init",value:function(){new n().init()}}],e&&R(n.prototype,e),t&&R(n,t),n}();function W(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var V=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.openClass="_menu-opened",this.opened=!1,this.animating=!1,this.menu=e,this.closeBtn=this.menu.querySelector(".menu-top__head-close"),this.menuContent=this.menu.querySelector(".menu-top__container"),this.menuInner=this.menu.querySelector(".menu-top__container-inner"),this.menuOverlay=this.menu.querySelector(".menu-top__overlay"),this.openers=document.querySelectorAll("[data-menu-trigger]"),this.htmlElem=document.documentElement,this.animDuration=.6,this.animEase="power2.out"}return e=[{key:"init",value:function(){this._bindContext(),this._bindEvents()}},{key:"_bindContext",value:function(){this.open=this.open.bind(this),this.close=this.close.bind(this),this._changeState=this._changeState.bind(this)}},{key:"_bindEvents",value:function(){var e=this;document.addEventListener("keyup",function(t){e._closeByKeyboard(t)}),this.openers.length&&this.openers.forEach(function(t){t.addEventListener("click",e._changeState)}),this.closeBtn&&this.closeBtn.addEventListener("click",this._changeState),["resize","orientationchange"].forEach(function(t){window.addEventListener(t,e._onResize.bind(e))})}},{key:"_onResize",value:function(){this.opened&&o.isDesktop()&&this._changeState()}},{key:"_closeByKeyboard",value:function(e){27===e.keyCode&&this.opened&&this._changeState()}},{key:"_changeState",value:function(){this.opened?this.close():this.open()}},{key:"open",value:function(){var e=this;(this.opened||!this.animating)&&(this.opened=!0,this.animating=!0,this.menu.style.pointerEvents="all",this.menu.style.display="block",this.htmlElem.classList.add(this.openClass),o.bodyFixed(),c.os.fromTo(this.menuOverlay,{alpha:0},{alpha:1,duration:this.animDuration,ease:this.animEase}),c.os.fromTo(this.menuContent,{alpha:0,y:"-100%"},{alpha:1,y:0,duration:this.animDuration/2}),c.os.fromTo(this.menuInner,{alpha:0,y:"-30px"},{alpha:1,y:0,duration:this.animDuration,delay:this.animDuration/1.5,ease:this.animEase,onComplete:function(){e.animating=!1}}))}},{key:"close",value:function(){var e=this;this.opened&&this.animating||(this.opened=!1,this.animating=!0,this.menu.style.pointerEvents="none",c.os.to(this.menuOverlay,{alpha:0,duration:this.animDuration,ease:this.animEase,delay:this.animDuration/1.5}),c.os.to(this.menuInner,{alpha:0,duration:this.animDuration/2,ease:this.animEase}),c.os.to(this.menuContent,{alpha:0,y:"-100%",duration:this.animDuration,delay:this.animDuration/1.5,ease:this.animEase,onComplete:function(){e.animating=!1,e.htmlElem.classList.remove(e.openClass),e.menu.style.display="none",o.bodyStatic()}}))}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelector(".menu-top");t&&new n(t).init()}}],e&&W(n.prototype,e),t&&W(n,t),n}(),G=n(987);function Z(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var U=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.cookie=e,this.cookies=G.A,this.messageShowDelay=5e3,this.cookieDuration=this.cookie.dataset.cookieTime||365,this.activeClass="is-active",this.hideClass="is-hide"}return e=[{key:"_init",value:function(){if(0==+this.cookieDuration&&this._removeCookie("cookie-accepted"),void 0!==this._getCookie("cookie-accepted")){this._hideMessage();return}this._showMessage(),this._bindEvents()}},{key:"_bindEvents",value:function(){var e=this;document.querySelector(".cookie__close").addEventListener("click",function(){e.cookie.classList.add(e.hideClass),setTimeout(function(){e._hideMessage(),e._setCookie("cookie-accepted","yes")},300)})}},{key:"_setCookie",value:function(e,t){this.cookies.set(e,t,{expires:+this.cookieDuration})}},{key:"_getCookie",value:function(e){return this.cookies.get(e)}},{key:"_removeCookie",value:function(e){this.cookies.remove(e)}},{key:"_showMessage",value:function(){var e=this;setTimeout(function(){e.cookie.classList.add(e.activeClass)},this.messageShowDelay)}},{key:"_hideMessage",value:function(){o.removeElement(this.cookie)}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelector(".j-cookie");t&&new n(t)._init()}}],e&&Z(n.prototype,e),t&&Z(n,t),n}();function Y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var K=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.wrapper=e.element,this.isTextAccordion=this.wrapper.hasAttribute("data-accordion-text"),this.accordion=this.wrapper.querySelector("[data-accordion]"),(this.accordion||this.isTextAccordion)&&(this.accordions=this.isTextAccordion?[this.wrapper]:o.siblings(this.accordion),this.breakpoint=e.breakpoint||this.wrapper.dataset.breakpoint||1e4,this.title=this.wrapper.querySelector("[data-accordion-title]"),this.titleText=!!this.title&&this.title.innerHTML,this.changeTitle=this.wrapper.hasAttribute("data-title"),this.hiddenText=this.wrapper.dataset.title||"Скрыть",this.animating=!1,this.openClass="is-open",this.duration=.35)}return e=[{key:"init",value:function(){this._isBreakpoint()&&(this._setInitState(),this._bindEvents())}},{key:"_setInitState",value:function(){var e=this;this.accordions.forEach(function(t){t.classList.contains(e.openClass)&&e.open(t)})}},{key:"_isBreakpoint",value:function(){return o.isBreakpoint(0,this.breakpoint)}},{key:"_bindEvents",value:function(){var e=this;this.accordions.forEach(function(t){t.querySelector("[data-accordion-opener]").addEventListener("click",e._onToggle.bind(e))})}},{key:"_onToggle",value:function(e){if(!this.animating){var t=e.currentTarget,n=this.isTextAccordion?t.closest("[data-accordion-text]"):t.closest("[data-accordion]");n.classList.contains(this.openClass)?this.close(n):this.open(n);var i=o.siblings(n,!1);i.length&&this.closeOther(i)}}},{key:"open",value:function(e){var t=this,n=e.querySelector("[data-accordion-content]"),i=n.querySelector("[data-accordion-inner]"),a=n.querySelectorAll("[data-stagger]"),s=i.getBoundingClientRect().height;e.classList.add(this.openClass),c.os.fromTo(n,{height:0},{height:s,duration:this.duration+.5,ease:"power3.inOut",onStart:function(){t.animating=!0},onComplete:function(){n.style.height="auto",n.style.overflow="visible",t.changeTitle&&t.titleText&&(o.clearHtml(t.title),o.insetContent(t.title,t.hiddenText)),t.animating=!1}}),c.os.fromTo(a,{alpha:0,y:"30"},{alpha:1,y:"0",duration:.5,stagger:.075})}},{key:"close",value:function(e){var t=this,n=e.querySelector("[data-accordion-content]"),i=n.querySelector("[data-accordion-inner]").getBoundingClientRect().height;e.classList.remove(this.openClass),c.os.fromTo(n,{height:i},{height:0,duration:this.duration,onStar:function(){t.animating=!0,n.style.height="auto",n.style.overflow="hidden"},onComplete:function(){t.animating=!1,t.changeTitle&&t.titleText&&(o.clearHtml(t.title),o.insetContent(t.title,t.titleText))}})}},{key:"closeOther",value:function(e){var t=this;e.forEach(function(e){e.classList.contains(t.openClass)&&t.close(e)})}}],t=[{key:"init",value:function(){var e=document.querySelectorAll("[data-accordions], [data-accordion-text]");e.length&&e.forEach(function(e){new n({element:e}).init()})}}],e&&Y(n.prototype,e),t&&Y(n,t),n}(),J=function(){function e(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e)}return function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e,[{key:"getTemplateArrows",value:function(){return'<div class="swiper-navigation">\n        <div class="swiper-button swiper-button-prev"></div>\n        <div class="swiper-button swiper-button-next"></div>\n    </div>'}},{key:"getTemplateArrowsAndPagination",value:function(){return'<div class="swiper-navigation">\n              <div class="swiper-navigation__container container">\n              <div class="swiper-navigation__buttons">\n                <div class="swiper-button swiper-button-prev"></div>\n                <div class="swiper-button swiper-button-next"></div>\n              </div>\n        </div>\n    </div>'}},{key:"getTemplatePrev",value:function(){return'\n      <div class="swiper-button__inner">\n        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none" class="swiper-button__svg">\n          <path d="M15 18.4248L9 12.4248L15 6.4248" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>\n      </div>'}},{key:"getTemplateNext",value:function(){return'\n    <div class="swiper-button__inner">\n      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="25" viewBox="0 0 24 25" fill="none" class="swiper-button__svg">\n        <path d="M9 18.425L15 12.425L9 6.42505" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n      </svg>\n    </div>'}}]),e}(),X=function(){function e(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e)}return function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e,[{key:"setSettingSlidesViews",value:function(e,t){switch(e){case"1":t.slidesPerView="auto",t.spaceBetween=10;break;case"2":t.slidesPerView=1,t.breakpoints={480:{slidesPerView:2,spaceBetween:20}};break;case"3":t.slidesPerView=1,t.breakpoints={480:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:3,spaceBetween:20}};break;case"4":t.slidesPerView=1,t.spaceBetween=10,t.breakpoints={480:{slidesPerView:3,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:20}}}}},{key:"getTemplateGalleryButton",value:function(){return'<span class="slider-gallery-button">\n              <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n              <path d="M2 9V6.5C2 4.01 4.01 2 6.5 2H9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n              <path d="M15 2H17.5C19.99 2 22 4.01 22 6.5V9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n              <path d="M22 16V17.5C22 19.99 19.99 22 17.5 22H16" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n              <path d="M9 22H6.5C4.01 22 2 19.99 2 17.5V15" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n              </svg>\n            </span>'}},{key:"getDirection",value:function(e){return 0===e?"NONE":e>0?"NEXT":"BACK"}},{key:"zeroBeforeNumber",value:function(e){return e<9?"0".concat(e):e}}]),e}(),Q=n(236),ee=n(889);function et(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function en(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ei(e,t,n){return t&&en(e.prototype,t),n&&en(e,n),e}function eo(e,t,n){return(eo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ea(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n||e):o.value}})(e,t,n||e)}function ea(e){return(ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function es(e,t){return(es=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var er=new d,el=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&es(e,t)}(i,e);var t,n=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,n=ea(i);return e=t?Reflect.construct(n,arguments,ea(this).constructor):n.apply(this,arguments),e&&("object"==(e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)||"function"==typeof e)?e:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)});function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return et(this,i),(e=n.call(this,t)).arrayAllElements=[],e}return ei(i,[{key:"init",value:function(){var e=this;eo(ea(i.prototype),"init",this).call(this),this.slider.params.parallax&&(this.slideElements=Array.from(this.sliderElement.querySelectorAll(".swiper-slide__picture")),this.slideElements.forEach(function(t){t.setAttribute("data-swiper-parallax","".concat(.75*e.sliderElement.offsetWidth))}))}},{key:"_bindEvents",value:function(){eo(ea(i.prototype),"_bindEvents",this).call(this),this.slider.on("init",this._onInit.bind(this)),this.slider.on("lazyImageReady",this._lazyImageReady.bind(this))}},{key:"_lazyImageReady",value:function(){var e,t;(null===(t=this.slider.params)||void 0===t?void 0:null===(e=t.autoplay)||void 0===e?void 0:e.enabled)&&!this.slider.autoplay.running&&this.slider.autoplay.start()}},{key:"_onInit",value:function(){var e=this;this.arrayAllElements=this.arrayAllElements.concat(this.sliderElement.querySelectorAll("[data-title]")),this.arrayAllElements=this.arrayAllElements.concat(this.sliderElement.querySelectorAll("[data-subtitle]")),this.arrayAllElements=this.arrayAllElements.concat(this.sliderElement.querySelectorAll(".swiper-slide-caption")),this.slider.on("slideNextTransitionStart",this._slideNextTransitionStart.bind(this)),this.slider.on("slidePrevTransitionStart",this._slidePrevTransitionStart.bind(this)),this._hideElements(),er.subscribe("slider:enter",function(t){if(t===e.sliderWrapper){var n,i;e._animate("next",!0),(null===(i=e.slider.params)||void 0===i?void 0:null===(n=i.autoplay)||void 0===n?void 0:n.enabled)&&e.slider.autoplay.start()}})}},{key:"_slideNextTransitionStart",value:function(){this._animate("next")}},{key:"_slidePrevTransitionStart",value:function(){this._animate("prev")}},{key:"_hideElements",value:function(){this.arrayAllElements.forEach(function(e){c.os.to(e,{duration:"0.3",x:0,opacity:0})})}},{key:"_animate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next",t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this.sliderElement.querySelector(".swiper-slide-active")),n=t.querySelector("[data-title]"),i=t.querySelector("[data-subtitle]"),o=t.querySelector(".swiper-slide-caption");this._hideElements(),c.os.fromTo(n,{x:"next"===e?10:-10},{ease:"power2.out",delay:"0.6",duration:"0.7",x:0,opacity:1}),c.os.fromTo(i,{x:"next"===e?10:-10},{ease:"power2.out",delay:"0.7",duration:"0.5",x:0,opacity:1}),c.os.to(o,{ease:"power2.in",delay:"0.9",duration:"0.7",opacity:1})}}]),i}(function(){function e(t){var n;et(this,e),this.sliderWrapper=t.item,this.sliderElement=this.sliderWrapper.querySelector(".swiper"),this.slider=null,this.sliderNum=null,this.interleaveOffset=.5,this.settingsCommon={},this.settingsOption=(null==t?void 0:t.settings)||{},this.settingsCustom=(null==t?void 0:t.custom)||{},this.settingsData=this.sliderWrapper.dataset.swiper||(null===(n=this.sliderElement)||void 0===n?void 0:n.dataset.swiper)||{},this.btnPrev=null,this.btnNext=null,this.slides=Array.from(this.sliderElement.querySelectorAll(".swiper-slide"))}return ei(e,[{key:"_setSettingsDefault",value:function(){var e="";if(null===(t=this.settingsOption.autoplay)||void 0===t?void 0:t.delay){var t,n,i,o=null===(i=this.settingsOption.autoplay)||void 0===i?void 0:i.delay;e="animation-duration: ".concat(o,"ms")}var a={},s=this.sliderWrapper.classList.contains("_pagination-counter");return a=(null===(n=this.settingsOption.custom)||void 0===n?void 0:n.paginationFraction)||s?{el:this.sliderWrapper.querySelector(".swiper-pagination"),clickable:!1,type:"fraction",renderFraction:function(){return'\n                      <div class="slider-counter__inner">\n                        <span class="slider-counter__current">\n                            '.concat(this.realIndex+1,'\n                          </span>\n                          <span class="slider-counter__spacer">/</span>\n                          <span class="slider-counter__total">\n                            ').concat(this.slides.length,"\n                          </span>\n                        </div>")}}:{el:this.sliderWrapper.querySelector(".swiper-pagination"),clickable:!0,type:"bullets",renderBullet:function(){return'\n                        <span class="swiper-pagination-bullet">\n                            <span style="'.concat(e,'"></span>\n                        </span>\n                        ')}},{modules:[ee.Vx,ee.dK,ee.Ij,ee._R,ee.FJ,ee.GP,ee.s3,ee.kQ,ee.U1],init:!1,watchSlidesProgress:!0,simulateTouch:this.slides.length>1,speed:700,lazy:{loadPrevNext:!0,loadPrevNextAmount:2},fadeEffect:{crossFade:!0},loop:!0,loopedSlides:2,navigation:{nextEl:this.btnNext,prevEl:this.btnPrev,disabledClass:"is-disabled"},custom:{animation:!1},on:{resize:function(){this.update()}},pagination:a}}},{key:"init",value:function(){var e,t,n,i=null;o.isEmptyObject(this.settingsData)||(i=JSON.parse(this.settingsData));var a=!0;if((null===(e=this.settingsOption)||void 0===e?void 0:e.navigation)===!1&&(a=!1),this.slides.length>1&&a&&this._addTemplateArrowsAndIcons(),(null===(t=this.settingsOption)||void 0===t?void 0:t.custom)&&(this.settingsCustom=null===(n=this.settingsOption)||void 0===n?void 0:n.custom),(null==i?void 0:i.custom)&&this._connectSettingsCustom(null==i?void 0:i.custom),this.settingsCustom.paginationOut){var s=this.sliderWrapper.closest(".slider-wrapper");this.settingsCommon.pagination.el=s.querySelector(".swiper-pagination")}this.settingsCustom.gallery&&(o.insetContent(this.sliderWrapper,X.getTemplateGalleryButton()),this.sliderWrapper.querySelector(".slider-gallery-button").addEventListener("click",function(e){console.log("⟶ click",e)})),this.slideOnWindow=String(this.sliderWrapper.dataset.slide)||"1",X.setSettingSlidesViews(this.slideOnWindow,this.settingsCommon),this._connectSettings(this._setSettingsDefault()),this._connectSettings(this.settingsOption),i&&this._connectSettings(i),"scrolling"===this.settingsCommon.effect&&this.sliderElement.classList.add("slider-scrolling"),this.slider=new Q.A(this.sliderElement,this.settingsCommon),this._bindEvents(),this.slider.init(),this.sliderNum=this.sliderWrapper.querySelector(".slider-counter__current")}},{key:"_addTemplateArrowsAndIcons",value:function(){o.insetContent(this.sliderWrapper,this.settingsCustom.paginationOut?J.getTemplateArrows():J.getTemplateArrowsAndPagination()),this.btnPrev=this.sliderWrapper.querySelector(".swiper-button-prev"),this.btnNext=this.sliderWrapper.querySelector(".swiper-button-next"),o.insetContent(this.btnNext,J.getTemplateNext()),o.insetContent(this.btnPrev,J.getTemplatePrev())}},{key:"_bindEvents",value:function(){this.slider.on("slideChange",this._onChange.bind(this))}},{key:"_onChange",value:function(){this._setSlideNumber()}},{key:"_setSlideNumber",value:function(){if(this.sliderNum){var e=Number(this.slider.slides[this.slider.activeIndex].dataset.swiperSlideIndex)+1||this.slider.activeIndex+1;this.sliderNum.innerHTML="".concat(e)}}},{key:"sliderDisable",value:function(){this.slider.disable()}},{key:"slideTo",value:function(e,t,n){this.slider.slideTo(e,t,n)}},{key:"_connectSettings",value:function(e){"object"==typeof e&&Object.assign(this.settingsCommon,e)}},{key:"_connectSettingsCustom",value:function(e){"object"==typeof e&&Object.assign(this.settingsCustom,e)}}]),e}());function ec(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var eu=function(){return null},eh=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.wrapper=e.elem,this.hash=e.hash||this.wrapper.hasAttribute("data-tabs-hash")||!1,this.tabsParent=this.wrapper.querySelector(e.tabsParent||"[data-tab-buttons]")||null,this.tabItem=e.tabItem||"[data-tab-opener]",this.tabs=Array.from(this.tabsParent.querySelectorAll(this.tabItem)),this.isType=e.type||this.wrapper.dataset.type,this.tabsAnim=this.wrapper.dataset.tabs||"bottom",this.contentItem="true"!==this.isType?e.contentItem||"[data-tab]":"[data-tab-type]",this.contentsParent=this.wrapper.querySelector(e.contentsParent||"[data-tab-contents]")||null,this.contents=!!this.contentsParent&&o.siblings(this.contentsParent.querySelector(this.contentItem)),this.dataTab={},this.onChangeCallback=e.onChangeCallback||eu,this.activeClass="is-active"}return e=[{key:"init",value:function(){0!==this.tabs.length&&(this._setInitialState(),this._bindEvents())}},{key:"_setInitialState",value:function(){var e=this.tabsParent.querySelector(".".concat(this.activeClass))||this.tabs[0];if(this.hash){var t=this._getHash();e=t&&this.wrapper.querySelector('[data-tab-opener="'.concat(t,'"]'))||e}this.isType&&(this.contents=!!this.contentsParent&&Array.from(this.contentsParent.querySelectorAll(".col"))),this.toggleTab(e)}},{key:"_getHash",value:function(){return window.location.hash.replace(RegExp("^#","u"),"")}},{key:"_bindEvents",value:function(){this.wrapper.addEventListener("click",this._onTabs.bind(this))}},{key:"_onTabs",value:function(e){var t=e.target;t.closest(this.tabItem)&&(e.preventDefault(),e.stopPropagation()),t&&t.closest(this.tabItem)&&this.toggleTab(t.closest(this.tabItem))}},{key:"toggleTab",value:function(e){this._setData(e),this._changeState(),this.onChangeCallback(this.dataTab),this.isType&&this._toggleTabType()}},{key:"_setData",value:function(e){this.dataTab={tab:e,id:e.dataset.tabOpener}}},{key:"_changeState",value:function(){var e=this,t=this.dataTab.id;this.tabs.forEach(function(n){n.classList.toggle(e.activeClass,n.dataset.tabOpener===t)}),this.contentsParent&&this.contents.forEach(function(n){n.dataset.tab===t&&("fade"===e.tabsAnim?c.os.fromTo(n,{autoAlpha:0},{position:"relative",autoAlpha:1,duration:.75,ease:"Power3.easeInOut"}):c.os.fromTo(n,{y:25,autoAlpha:0},{position:"relative",autoAlpha:1,duration:.75,y:0,ease:"Power3.easeInOut"})),n.classList.contains(e.activeClass)&&c.os.to(n,{position:"absolute",duration:.35,autoAlpha:0,ease:"Power3.easeInOut"}),n.classList.toggle(e.activeClass,n.dataset.tab===t)})}},{key:"_toggleTabType",value:function(){var e=this.dataTab.id;this.contents.forEach(function(t){t.dataset.tab===e||"all"===e?setTimeout(function(){t.style.display="block",t.style.opacity=1},200):(t.style.opacity=0,setTimeout(function(){t.style.display="none"},200))})}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll("[data-tabs]");t.length&&t.forEach(function(e){new n({elem:e}).init()})}}],e&&ec(n.prototype,e),t&&ec(n,t),n}();n(732);var ed=n(692);function ep(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ef(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function em(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ev(e,t,n){return t&&em(e.prototype,t),n&&em(e,n),e}function ey(e,t,n){return(ey="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eg(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n||e):o.value}})(e,t,n||e)}function eg(e){return(eg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eb(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ek(e,t)}function e_(e,t){return t&&("object"==(t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t)||"function"==typeof t)?t:ep(e)}function ek(e,t){return(ek=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ew(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=eg(e);return n=t?Reflect.construct(i,arguments,eg(this).constructor):i.apply(this,arguments),e_(this,n)}}var eS=new d,eE=function(){function e(t){ef(this,e),this.settingsCommon={},this.settingsData=(null==t?void 0:t.settings)||!1}return ev(e,[{key:"init",value:function(){this._setSettingsDefault(),this._connectSettings(this._setSettingsDefault()),this._connectSettings(this.settingsData)}},{key:"_setSettingsDefault",value:function(){return{type:"inline",fixedContentPos:!1,fixedBgPos:!1,overflowY:"auto",removalDelay:700,closeBtnInside:!1,mainClass:"popup-theme-inline-white",closeMarkup:'<button title="%title%" type="button" class="mfp-close popup-close"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" class="mfp-close__svg"><path d="M.393 2.331C-.131 1.807-.131.935.393.393a1.392 1.392 0 0 1 1.94 0l11.636 11.652L25.625.393a1.366 1.366 0 0 1 1.919 0 1.356 1.356 0 0 1 0 1.938L15.908 13.966l11.636 11.652a1.358 1.358 0 0 1 0 1.939 1.368 1.368 0 0 1-1.919 0L13.969 15.904 2.333 27.557a1.394 1.394 0 0 1-1.94 0c-.524-.542-.524-1.416 0-1.939L12.03 13.966.393 2.331z"/></svg></button>',midClick:!0,callbacks:{open:function(){o.bodyFixed()},close:function(){o.bodyStatic()}},tClose:"",tLoading:"<span></span>",ajax:{tError:"Ошибка запроса."}}}},{key:"_initPopup",value:function(){ed(this.link).magnificPopup(this.settingsCommon)}},{key:"_fixScrollGap",value:function(){setTimeout(function(){var e=getComputedStyle(document.body).paddingRight,t=document.querySelector(".header__inner"),n=document.querySelector("[menu]");t&&(t.style.right=e),n&&(n.style.right=e)})}},{key:"isOpenPopup",value:function(){return!!document.querySelector(".mfp-ready")}},{key:"_connectSettings",value:function(e){"object"==typeof e&&Object.assign(this.settingsCommon,e)}}]),e}(),ex=function(e){eb(n,e);var t=ew(n);function n(e){var i,o;return(ef(this,n),i=t.call(this,e),e)?(i.link=null==e?void 0:e.item,i.view=(null===(o=i.link.dataset)||void 0===o?void 0:o.popup)||!1,i.isAjax=i.link.hasAttribute("data-popup-ajax"),i.isTabHash=i.link.hasAttribute("data-popup-tab"),i.tabHash=!!i.isTabHash&&i.link.dataset.popupTab,i.showPopup=i.showPopup.bind(ep(i)),i.hidePopup=i.hidePopup.bind(ep(i)),i):e_(i)}return ev(n,[{key:"init",value:function(){ey(eg(n.prototype),"init",this).call(this),this._viewPopup(),this._initPopup()}},{key:"showPopup",value:function(e,t){ey(eg(n.prototype),"init",this).call(this);var i=0,o=this;this.view=t||"inline",this._connectSettings(e),this.isOpenPopup()&&(this.hidePopup(),i=800),setTimeout(function(){o._viewPopup(),ed.magnificPopup.open(o.settingsCommon)},i)}},{key:"openPopup",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3?arguments[3]:void 0;ey(eg(n.prototype),"init",this).call(this);var s=0,r=this;this._isPopupContent(e)&&(this.isOpenPopup()&&(this.hidePopup(),s=800),setTimeout(function(){t.view=a||"inline",t.openededPopup=!1,t._connectSettings({items:{src:e}}),t._viewPopup(),setTimeout(function(){t.isOpenPopup()?eS.subscribe("popupClosed",function(){!r.openededPopup&&(setTimeout(function(){ed.magnificPopup.open(r.settingsCommon),r.openededPopup=!0},1e3),i&&r.hidePopup(i))}):(ed.magnificPopup.open(t.settingsCommon),i&&t.hidePopup(i))},o)},s))}},{key:"hidePopup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;setTimeout(function(){ed.magnificPopup.close()},e)}},{key:"_isPopupContent",value:function(e){return!!document.querySelector(e)||(console.warn("[PopupStatic]: ","Упс... Не найден попан - ".concat(e)),!1)}},{key:"_viewPopup",value:function(){switch(this.view){case"gallery":this._viewGallery();break;case"side":this._viewSide();break;case"video":this._viewVideo();break;case"subscribe":this._viewSubscribe();break;case"full":this._viewFull();break;case"bottom":this._viewBottom();break;default:this._viewStatic()}}},{key:"_viewSide",value:function(){this._connectSettings({mainClass:"popup-theme-side",closeBtnInside:!0})}},{key:"_viewFull",value:function(){this._connectSettings({mainClass:"popup-theme-inline-white full-popup"})}},{key:"_viewBottom",value:function(){var e=this;if(this.isAjax)this._connectSettings({type:"ajax",mainClass:"popup-theme-bottom bottom-popup",closeBtnInside:!0,callbacks:{ajaxContentAdded:function(){var t=this.contentContainer.find(".popup")[0];o.bodyFixed();var n=t.querySelector(".popup-info__image img"),i=t.querySelector(".popup-content");n&&i&&N.parallaxImage(n,i);var a=t.querySelector("[data-slider]");a&&new el({item:a,settings:{effect:"linear",speed:750}}).init();var s=t.querySelectorAll("[data-tabs]");if(s.length&&s.forEach(function(e){new eh({elem:e}).init()}),e.isTabHash){var r=t.querySelector('[data-tab-opener="'.concat(e.tabHash,'"]'));r&&r.click()}var l=t.querySelector("[data-popup]");l&&l.addEventListener("click",function(e){e.preventDefault();var t=l.getAttribute("href");t&&window.Site.Modules.Popup.showPopup({items:{src:t}},"bottom")})},close:function(){o.bodyStatic()}}});else{var t=this,n=null;this._connectSettings({type:"inline",mainClass:"popup-theme-bottom bottom-popup",closeBtnInside:!0,callbacks:{open:function(){o.bodyFixed();var e=this.contentContainer.find(".popup")[0],i=null==e?void 0:e.classList.contains("popup-message"),a=null==e?void 0:e.querySelector("[data-popup-dismiss]"),s=e.querySelector(".popup-info__image img"),r=e.querySelector(".popup-content");s&&r&&N.parallaxImage(s,r),i&&(n=setTimeout(function(){t.hidePopup()},1e4)),a&&a.addEventListener("click",function(){t.hidePopup()}),window.Site.Modules.PageScrolling&&window.Site.Modules.PageScrolling.lock(!0)},beforeClose:function(){n&&clearTimeout(n)},close:function(){eS.publish("popupClosed"),window.Site.Modules.PageScrolling&&window.Site.Modules.PageScrolling.unlock(),o.bodyStatic()}}})}}},{key:"_viewGallery",value:function(){this._connectSettings({mainClass:"popup-theme-gallery",callbacks:{open:function(){var e=this.contentContainer.find(".popup-gallery")[0];eS.publish("openGalleryPopup",e),o.bodyFixed()},close:function(){eS.publish("closeGalleryPopup",this),o.bodyStatic()}}})}},{key:"_viewVideo",value:function(){this._connectSettings({mainClass:"popup-theme-gallery",callbacks:{beforeOpen:function(){},open:function(){},afterClose:function(){}}})}},{key:"_viewStatic",value:function(){var e=this,t=null;this._connectSettings({closeOnBgClick:!1,callbacks:{open:function(){var n=this.contentContainer.find(".popup")[0],i=null==n?void 0:n.classList.contains("popup-message"),a=null==n?void 0:n.querySelector("[data-popup-dismiss]");i&&(t=setTimeout(function(){e.hidePopup()},1e4)),a&&a.addEventListener("click",function(){e.hidePopup()}),window.Site.Modules.PageScrolling&&window.Site.Modules.PageScrolling.lock(!0),o.bodyFixed(n)},beforeClose:function(){t&&clearTimeout(t)},close:function(){eS.publish("popupClosed"),window.Site.Modules.PageScrolling&&window.Site.Modules.PageScrolling.unlock(),o.bodyStatic()}}})}},{key:"_viewSubscribe",value:function(){this._connectSettings({mainClass:"popup-theme-side",callbacks:{open:function(){var e=this.contentContainer.find(".popup-side")[0],t=this.ev.closest("form").find("input[type=email]")[0].value;e&&(e.querySelector("input[type=email]").value=t)}}})}}],[{key:"init",value:function(){window.Site.Modules.Popup=new n;var e=document.querySelectorAll("[data-popup]");0!==e.length&&e.forEach(function(e){new n({item:e}).init()})}}]),n}(eE),eC=function(e){eb(n,e);var t=ew(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ef(this,n),t.call(this,e)}return ev(n,[{key:"init",value:function(){this.popupHashName=this._getPopupHashName(),this.popupHashName&&this._displayPopup()}},{key:"_displayPopup",value:function(){var e=this;this._checkPopup(this.popupHashName)&&eS.subscribe("preloader:end",function(){setTimeout(function(){window.Site.Modules.Popup.showPopup({items:{src:"#".concat(e.popupHashName)}},"inline")},600)})}},{key:"_getPopupHashName",value:function(){var e=window.location.hash.replace(RegExp("^#","u"),"");if(e.includes("popup"))return e}},{key:"_checkPopup",value:function(e){return!!document.querySelector("#".concat(e))||(console.warn("[PopupOpenByHash]: ","Упс... Не найден попан - ".concat(e)),!1)}}],[{key:"init",value:function(){new n().init()}}]),n}(eE),eT=function(e){eb(n,e);var t=ew(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ef(this,n),(e=t.call(this,i)).popup=i.item,e.popupDelay=e.popup.dataset.popupOpen||600,e.popupId=e.popup.getAttribute("id"),e}return ev(n,[{key:"init",value:function(){this.popup&&new ex().openPopup("#".concat(this.popupId),0,this.popupDelay,"inline")}}],[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelector("[data-popup-open]");t&&new n({item:t}).init()}}]),n}(eE);function eO(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var eP=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.textContent=e,this.textContent&&(this.iframes=this.textContent.querySelectorAll(":scope > iframe"),this.images=this.textContent.querySelectorAll(":scope > img"),this.tables=this.textContent.querySelectorAll(":scope > table"))}return e=[{key:"_init",value:function(){var e=this;this.iframes.forEach(function(t){e.iframeContent(t)}),this.images.forEach(function(t){e.imageContent(t)}),this.tables.forEach(function(t){e.tableContent(t)})}},{key:"iframeContent",value:function(e){o.wrapContent(e,"div","ui-iframe")}},{key:"tableContent",value:function(e){o.wrapContent(e,"div","table-responsive")}},{key:"imageContent",value:function(e){var t=e.getAttribute("alt");o.wrapContent(e,"figure");var n=e.parentNode;o.insetContent(n,"<figcaption>"+t+"</figcaption>")}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll(".text-content");t.length&&t.forEach(function(e){new n(e)._init()})}}],e&&eO(n.prototype,e),t&&eO(n,t),n}();function eL(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var eA=new d,ej=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n)}return e=[{key:"init",value:function(){var e=document.querySelectorAll("[data-slider]");e.length&&e.forEach(function(e){new el({item:e,settings:{loop:!1,effect:"fade"}}).init()});var t=document.querySelectorAll(".slider-gallery");t.length&&t.forEach(function(e){new el({item:e,settings:{loop:!0,effect:"fade"}}).init()});var n=document.querySelectorAll(".realty-layouts-slider__slider");n.length&&n.forEach(function(e){new el({item:e,settings:{loop:!1,speed:700,spaceBetween:16,pagination:!1,breakpoints:{768:{width:560,spaceBetween:30},1023:{width:840},1400:{width:1140}}}}).init()});var i=document.querySelectorAll(".infrastructure__anonse-slider");i.length&&i.forEach(function(e){new el({item:e,settings:{slidesPerView:1,spaceBetween:16,speed:750,preloadImages:!1,lazy:!0,loop:!1,pagination:!1,breakpoints:{680:{slidesPerView:2,spaceBetween:24},1023:{slidesPerView:3,spaceBetween:32},1540:{slidesPerView:4}}}}).init()});var o=document.querySelectorAll(".slider-progress");o.length&&(o.forEach(function(e){new el({item:e,settings:{slidesPerView:1,slidesPerGroup:1,spaceBetween:0,speed:750,centered:!0,preloadImages:!1,lazy:!0,loop:!1,pagination:!1,breakpoints:{768:{slidesPerView:2,slidesPerGroup:2},1024:{slidesPerView:3,slidesPerGroup:3}}}}).init()}),eA.publish("initProgressSlider"))}}],t=[{key:"init",value:function(){new n().init()}}],e&&eL(n.prototype,e),t&&eL(n,t),n}(),eI=function(){function e(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e)}return function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e,[{key:"ru",value:function(){return{errorLoading:function(){return"Результат не может быть загружен."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Пожалуйста, удалите "+t+" символ";return t>=2&&t<=4?n+="а":t>=5&&(n+="ов"),n},inputTooShort:function(e){return"Пожалуйста, введите "+(e.minimum-e.input.length)+" или более символов"},loadingMore:function(){return"Загружаем ещё ресурсы…"},maximumSelected:function(e){var t="Вы можете выбрать "+e.maximum+" элемент";return e.maximum>=2&&e.maximum<=4?t+="а":e.maximum>=5&&(t+="ов"),t},noResults:function(){return"Ничего не найдено"},searching:function(){return"Поиск…"},removeAllItems:function(){return"Удалить все елементы"}}}}]),e}();n(458);var eM=n(692);function eq(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var eB=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.$element=eM(e.element),this.element=e.element,this.isSingle=this.$element.hasClass("j-select-single"),this.isMultiple=this.$element.hasClass("j-select-multiple"),this.right=this.$element.hasClass("select-right"),this.data=this.$element.data("json")}return e=[{key:"init",value:function(){this.options={minimumResultsForSearch:1/0,dropdownCssClass:":all:",templateResult:this._formatState,cashe:!0,width:"100%",multiple:this.isMultiple,closeOnSelect:!this.isMultiple,allowClear:!1,dropdownAutoWidth:!0,dropdownParent:this.$element.parent(),language:eI.ru(),data:this.data?this.data:null,escapeMarkup:function(e){return e}},this.$element.select2(this.options),this._bindEvents(),this.getNumberSelection(),this.setPlaceholder()}},{key:"_bindEvents",value:function(){this.$element.on("select2:open",this._onOpen.bind(this)),this.$element.on("select2:selecting",this._onSelecting.bind(this)),this.$element.on("select2:select",this._onSelect.bind(this)),this.$element.on("select2:unselect",this._onUnSelect.bind(this)),this.$element.on("select2:close",this._onClose.bind(this))}},{key:"_formatState",value:function(e){if(!e.id)return e.text;var t=e.status?'<span class="select2-item-state">'.concat(e.status,"</span>"):"";return eM('<div class="select2-item">\n            <span class="select2-item-text"> '.concat(e.text," </span>\n            ").concat(t,"\n            </div>"))}},{key:"_onOpen",value:function(){}},{key:"_onSelecting",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$element.find('option[value="all"]').prop("selected",t)}},{key:"_onSelect",value:function(e){this.getNumberSelection(),this.checkOptions();var t=e.params.data;this.checkOptions(t);var n="";void 0!==t.$element&&(n=t.$element.dataset.link),void 0!==n&&""!==n&&(document.location.href=n)}},{key:"_onUnSelect",value:function(){this.checkOptions(),this.getNumberSelection()}},{key:"_onClose",value:function(){this.getNumberSelection()}},{key:"getNumberSelection",value:function(){var e=this.$element.select2("data").length;0===e&&this.setPlaceholder(),e<3||this.$element.next("span.select2").find("ul").html('<li class="select2-selection__choice__display">Выбрано: '.concat(e,"</li>"))}},{key:"setPlaceholder",value:function(){var e=this.$element.data("placeholder"),t=this.isMultiple?this.$element.next("span.select2").find("ul"):this.$element.next("span.select2").find(".select2-selection__rendered"),n=this.$element.find("option:selected"),i=this.$element.find('option[value="all"]:selected');1!==i.length&&""!==e&&e&&t.html("".concat(e)),i.length||n.length||(this._onSelecting(this,!0),t.html("<li>".concat(e,"</li>")))}},{key:"checkOptions",value:function(e){var t=this.element.querySelectorAll("option"),n=[];if(e&&"all"===e.element.getAttribute("value")){this.getValue("all"),this.$element.select2("close");return}t.forEach(function(e){e.selected&&("all"===e.getAttribute("value")&&(e.selected=!1),n.push(e))}),0===n.length&&(this.getValue("all"),this.$element.select2("close"))}},{key:"destroy",value:function(){this.$element.select2("destroy")}},{key:"disable",value:function(){this.$element.prop("disabled",!0)}},{key:"clearingfilter",value:function(){this.$element.val(null).trigger("change")}},{key:"getValue",value:function(e){this.$element.val(e).trigger("change")}},{key:"checkInit",value:function(){return this.$element.hasClass("select2-hidden-accessible")}}],t=[{key:"init",value:function(){var e=document.querySelectorAll(".j-select");e.length&&e.forEach(function(e){new n({element:e}).init()})}}],e&&eq(n.prototype,e),t&&eq(n,t),n}();n(822);var eD=n(692);function eN(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var e$=new d,eR=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.rangeSlider={}}return e=[{key:"initRange",value:function(e){this.$wrapper=eD(e.element),this.outerOptions=e.outerOptions||this.$wrapper.find(".j-form-range-base").data(),this._setOptions(),this._initRangeSlider(),this._getElements(),this._bindEvents(),this._subscribes(),this._initDigit()}},{key:"_setOptions",value:function(){var e=this;this.options={skin:"round",type:this.outerOptions.type,min:this.outerOptions.min,max:this.outerOptions.max,from:this.outerOptions.from,to:this.outerOptions.to,step:this.outerOptions.step,min_interval:this.outerOptions.step,digit:this.outerOptions.digit||!1,disable:this.outerOptions.disable||!1,validate:this.outerOptions.validate,hide_from_to:!0,hide_min_max:!0,prettify_enabled:!0,onStart:function(t){e$.publish("rangesliderStart",t,e)},onChange:function(t){e._updateInputs(t),e$.publish("rangesliderChange",t)},onFinish:function(e){e$.publish("rangesliderFinish",e)}},this.startOptions=this.options,this.isNumberShort="number_short"===this.options.validate}},{key:"_initRangeSlider",value:function(){this.$rangeSlider=this.$wrapper.find(".j-form-range-base"),this.$rangeSlider.ionRangeSlider(this.options)}},{key:"_getElements",value:function(){this.$inputs=this.$wrapper.find(".form-range__input"),this.$inputFrom=this.$inputs.first(),this.$inputTo="double"===this.options.type?this.$inputs.last():null,this.slider=this.$rangeSlider.data("ionRangeSlider"),this.id=this.slider.input.id,this.rangeSlider[this.id]=this.slider,this.$inputOutMin=this.$wrapper.find(".j-form-range-output-min"),this.$inputOutMax=this.$wrapper.find(".j-form-range-output-max")}},{key:"_subscribes",value:function(){e$.subscribe("resetFilter",this._reset.bind(this))}},{key:"_bindEvents",value:function(){var e=this;this.$inputFrom.on("change",this._onInputFromChange.bind(this)),"double"===this.options.type&&this.$inputTo.on("change",this._onInputToChange.bind(this)),this.$inputs.each(function(t,n){if(e.isNumberShort){var i=eD(n),o=i.val();i.val(e._getNumberDecimal(o))}n.addEventListener("input",function(t){var n=eD(t.target),i=n.val();e._validate(n),e._setDigit(n,i)})})}},{key:"_onInputFromChange",value:function(e){var t=e.target.name.slice(0,-5),n=this._getNumber(eD(e.target).val()),i=this.slider.result.to,o="number_decimal"===this.options.validate?1:0,a="number"===this.options.validate,s="single"===this.options.type?0:this.options.step;a||(n=this._getNumberThousands(n)),n<this.options.min?n=this.options.min:n>i&&(n=i-s),n=n.toFixed(o),eD(e.target).val(a?n:this._getNumberDecimal(n)),this._getOutputInputs("".concat(t,"-from"),n),this._setDigit(eD(e.target),n),this._update({from:n})}},{key:"_onInputToChange",value:function(e){var t=e.target.name.slice(0,-5),n=this._getNumber(eD(e.target).val()),i=this.slider.result.from,o="number_decimal"===this.options.validate?1:0,a="number"===this.options.validate;a||(n=this._getNumberThousands(n)),n<=i?n=i+this.options.step:n>this.options.max&&(n=this.options.max),n=n.toFixed(o),eD(e.target).val(a?n:this._getNumberDecimal(n)),this._getOutputInputs("".concat(t,"-to"),n),this._setDigit(eD(e.target),n),this._update({to:n})}},{key:"_validate",value:function(e){var t=this.options.validate;if(t)switch(t){case"number":this._validateNumber(e);break;case"number_decimal":this._validateNumberDecimal(e)}}},{key:"_validateNumber",value:function(e){var t=e.val();t=t.replace(/\s/g,""),e.val(/\d*/.exec(t))}},{key:"_validateNumberDecimal",value:function(e){var t=e.val();e.val(/\d*\.?\d?/g.exec(t))}},{key:"_getNumberDecimal",value:function(e){return(e/1e6).toFixed(1)}},{key:"_getNumberThousands",value:function(e){return 1e6*e}},{key:"_update",value:function(e){this.slider.update(e)}},{key:"_updateInputs",value:function(e){var t=this.$rangeSlider[0].id;this.$inputFrom.val(this.isNumberShort?this._getNumberDecimal(e.from):e.from),"price"===t&&this._getOutputInputs("".concat(t,"-from"),this._getNumber(e.from_pretty)),this._setDigit(this.$inputFrom,e.from),"double"===this.options.type&&(this.$inputTo.val(this.isNumberShort?this._getNumberDecimal(e.to):e.to),"price"===t&&this._getOutputInputs("".concat(t,"-to"),this._getNumber(e.to_pretty)),this._setDigit(this.$inputTo,e.to))}},{key:"_reset",value:function(){this.slider.input.classList.contains("is-not-search")||("double"===this.options.type?(this.startOptions.from=this.startOptions.min,this.startOptions.to=this.startOptions.max,this.$inputFrom[0].setAttribute("value",this.startOptions.from),this.$inputTo[0].setAttribute("value",this.startOptions.to),this.$inputFrom.val(this.startOptions.from),this.$inputTo.val(this.startOptions.to)):(this.startOptions.from=this.startOptions.max,this.$inputFrom[0].setAttribute("value",this.startOptions.max),this.$inputFrom.val(this.startOptions.max)),this.slider.update(this.startOptions),this._updateInputs(this.startOptions))}},{key:"_initDigit",value:function(){var e=this;this.$inputs.each(function(t,n){e.options.digit&&e._setDigit(eD(n))})}},{key:"_setDigit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this.options.digit){var n=t||e.val(),i=this._getNumber(n);e.val(o.convertToDigit(i))}}},{key:"_getNumber",value:function(e){return e?o.convertToNumber(e):0}},{key:"_getOutputInputs",value:function(e,t){"price-from"===e&&this.$inputOutMin.val(t),"price-to"===e&&this.$inputOutMax.val(t)}}],t=[{key:"init",value:function(){var e=document.querySelectorAll(".form-range:not(.form-range--mortgage)");e&&e.forEach(function(e){new n().initRange({element:e})})}}],e&&eN(n.prototype,e),t&&eN(n,t),n}();function ez(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var eH=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.header=e,this.headerMain=document.querySelector(".header"),this.innerElement=this.header.querySelector(".header__inner"),this.height=this.header.offsetHeight,this.heightBase=this.innerElement.offsetHeight,this.scrollPosition=0,this.classes={show:"is-showed",hide:"is-hidden",animate:"is-animate",fix:"is-fixed",themeTransparent:"header-theme--fixed"},this.wrapperSite=document.querySelector(".wrapper"),this._changeState=this._changeState.bind(this),this.transitionTime=300,this.isFixedDefault=!1}return e=[{key:"init",value:function(){this._initState(),this._bindEvents(),this._changeState()}},{key:"_checkTop",value:function(){if(this.isFixedDefault)return document.querySelector("html").classList.add("_main-page"),this.headerMain.classList.add(this.classes.themeTransparent),!1;o.isDesktop()&&(this.wrapperSite.style.paddingTop=this.height+"px")}},{key:"_initState",value:function(){!this.header.dataset.static&&(this.scrollPosition=o.getScrollTop(),this._isScrollInTarget()||this.header.classList.add(this.classes.fix,this.classes.hide))}},{key:"_bindEvents",value:function(){var e=this;window.addEventListener("scroll",(0,y.s)(6,this._changeState)),["resize","orientationchange"].forEach(function(t){window.addEventListener(t,function(){e.height=e.header.offsetHeight,e.heightBase=e.innerElement.offsetHeight,e._changeState()})})}},{key:"_changeState",value:function(){if(!this.header.dataset.static){this.scrollPosition=o.getScrollTop();var e=this.classes,t=e.animate,n=e.fix,i=e.hide,a=e.show;this._isScrollUp()&&(window.scrollY>10&&(this.header.classList.add(a,n,t),this.header.classList.remove(i)),this._isScrollInTarget(-1*this.height)&&this.header.classList.remove(n,t,i,a)),this._isScrollDown()&&window.scrollY>10&&(this.header.classList.add(i,t),this.header.classList.add(a,n)),this.prevScrollPosition=this.scrollPosition}}},{key:"_isScrollUp",value:function(){return this.scrollPosition-this.prevScrollPosition<-1}},{key:"_isScrollDown",value:function(){return this.scrollPosition>this.height&&this.scrollPosition-this.prevScrollPosition>1}},{key:"_isScrollInTarget",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.scrollPosition<100)return!0;if(!this.targetElement)return!1;var t=this.targetElement.offsetHeight-e;return t<0&&(t=0),t>this.scrollPosition&&this.scrollPosition}}],t=[{key:"init",value:function(){var e=document.querySelector(".header");e&&!window.environmentObject.isKitPage&&new n(e).init()}}],e&&ez(n.prototype,e),t&&ez(n,t),n}(),eF=n(692),eW=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.storage={}}return e=[{key:"isExist",value:function(e){return null!==e&&!isNaN(+e)&&void 0!==e}},{key:"accessStorage",value:function(e,t){return this.isExist(t)?this.storage[e]=t:parseInt(this.storage[e])||this.storage[e]}},{key:"getObjectData",value:function(e){return{key:eF(e.$input).attr("name"),data:e.from}}},{key:"calc",value:function(e,t,n){switch(e){case"creditAmount":return t-n;case"creditAmountPretty":return(t-n).toLocaleString("ru-Ru")+" ₽";case"creditPercent":return parseInt((n/t*100).toFixed());case"creditPercentPretty":return(n/t*100).toFixed()+"%";case"monthlyPaymentPretty":return parseInt(t.toFixed()).toLocaleString("ru-Ru")+" ₽ <span> /мес.</span>";case"monthlyPaymentPrettyTranche":return"".concat(parseInt(t.toFixed()).toLocaleString("ru-Ru")," ₽ ").concat(this.createDelimiter()," ").concat(parseInt(n.toFixed()).toLocaleString("ru-Ru")," ₽ <span> /мес.</span>")}}},{key:"calcCredit",value:function(){var e=this.accessStorage("price[min]",null),t=this.accessStorage("first-pay[min]",null),n=this.calc("creditPercentPretty",e,t),i=this.accessStorage("limitation[min]",null),o=this.calc("creditAmount",e,t)>=0?this.calc("creditAmountPretty",e,t):"—";return this.accessStorage("creditAmount",this.calc("creditAmount",e,t)),this.accessStorage("creditPercent",this.calc("creditPercent",e,t)),{amount:o,percent:n,period:i}}},{key:"decodePostfix",value:function(e){return[1,21,31].includes(e)?"годa":"лет"}},{key:"use$Value",value:function(e,t){return void 0===t?eF(e).val():eF(e).val(t)}},{key:"checkInputedData",value:function(e,t,n){var i=+eF(e).val().replace(n,"");t.from=i<t.min?t.min:i>t.max?t.max:i}},{key:"preventNaNSymbolsEnter",value:function(e){![8,9,13,17,18,35,36,37,39,46].includes(e.which)&&(e.which>57||e.which<48)&&(e.which>105||e.which<96)&&(e.which>123||e.which<112)&&e.preventDefault()}},{key:"onKeyDownEvent",value:function(e,t,n,i,o){switch(e.which){case 13:this.checkInputedData(i,t,o),eF(i).trigger("blur");break;case 27:eF(i).trigger("blur")}}},{key:"getReplaceDotToNumber",value:function(e){return Number(e.replace(/,/g,"."))}},{key:"createDelimiter",value:function(){return'<span class="mortgage-bank__delimiter">/</span>'}},{key:"createRate",value:function(e){return"\n        ".concat(1===e.length?"".concat(e,"%"):"\n            ".concat(e[0],"%\n            ").concat(this.createDelimiter(),"\n            ").concat(e[1],"%\n        "),"\n        ")}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}(),eV=n(692);function eG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function eZ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}c.os.registerPlugin(M.u);var eU=new d,eY=new eW,eK=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.ranges={},this.minPercent=0,this.maxPercent=90}return e=[{key:"init",value:function(e){this._getElements(e),this._createRateValues(),this._getMinFirstPercent(),this._subscribes(),this._initCalcSliders(),this._bindEvents()}},{key:"_getElements",value:function(e){this.wrap=e,this.$wrap=eV(e),this.$sliders=this.$wrap.find(".form-range--mortgage"),this.$banksItems=this.$wrap.find(".mortgage-result__item"),this.banksArray=this.$banksItems.toArray(),this.$creditPercent=this.$wrap.find(".mortgage-filter__percent"),this.$orderCount=this.$wrap.find(".j-mortgage-orders-count"),this.$emptyResult=this.$wrap.find(".mortgage__no-result"),this.classes={active:"is-active",disabled:"is-disabled",hidden:"is-hidden",loadmore:"is-loadmore"},this.flatPriceWrap=eV(document).find(".flat__prices-mortgage"),this.flatPrice=this.flatPriceWrap.find(".j-flat__price"),this.$select=this.$wrap.find(".form-select select"),this.$resultList=this.$wrap.find(".mortgage-result__list"),this.trancheCheckbox=this.wrap.querySelector(".mortgage-filtres__checks-tranche input"),this.isTrancheEnabled=!1,this.durationAnim=400}},{key:"_initCalcSliders",value:function(){var e=Array.from(this.$sliders);this._getRangeSliders(),e.forEach(function(e,t){n.initSlider(e,t)})}},{key:"_getRangeSliders",value:function(){var e=this;Array.from(this.wrap.querySelectorAll(".j-form-range-base")).forEach(function(t){e.ranges[t.id]=t})}},{key:"_bindEvents",value:function(){this._onSelectChange(),this._backToFilter(),this.trancheCheckbox&&this.trancheCheckbox.addEventListener("change",this._onChangeTranche.bind(this)),this.banksArray.forEach(function(e){var t=e.querySelector(".mortgage-bank__payment__icon");t&&t.addEventListener("click",function(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault()})})}},{key:"_onChangeTranche",value:function(){this.trancheCheckbox.checked?this.isTrancheEnabled=!0:this.isTrancheEnabled=!1,this.update()}},{key:"_onSelectChange",value:function(){var e=this;this.$select.length&&this.$select.on("change",function(){var t=e.$select.select2("data").map(function(e){return e.id});e._onChangeSelect(t),e._getMinFirstPercent(),e._recalculateFirstPayment(),e.update()})}},{key:"_subscribes",value:function(){var e=this;eU.subscribe("rangesliderStart",function(t,n){e._isMineSlider(n)&&(t.$input=t.input.closest(".form-range").find(".form-range__input"),t.$postfix=t.input.closest(".form-range").find(".range-slider__input-right"),t.$rangeSlider=n,e.updateSlidersValues(t,null),e.manualInput(t,e),e.update())}),eU.subscribe("rangesliderChange",function(t){if(e._isMineSlider(t.$rangeSlider)){var n=t.input[0].id;"price"===n&&e._recalculateFirstPayment(),e.updateSlidersValues(t,"set","price"===n)}}),eU.subscribe("rangesliderFinish",function(t){e._isMineSlider(t.$rangeSlider)&&(e.setCredit(),e.update())})}},{key:"_isMineSlider",value:function(e){var t=e.$rangeSlider[0].id;return this.ranges[t]===e.$rangeSlider[0]}},{key:"_getMinFirstPercent",value:function(){var e,t=this,n=[];this.banksArray.filter(function(e){return!e.classList.contains(t.classes.hidden)}).forEach(function(e){var t=eY.getReplaceDotToNumber(e.dataset.firstpayment);console.log("⟶ firstPayment",e.dataset.firstpayment,t),n.push(t)}),this.minPercent=(e=Math).min.apply(e,function(e){if(Array.isArray(e))return eG(e)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return eG(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return eG(e,void 0)}}(n)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}},{key:"updateSlidersValues",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.updateData(e,t),n.setInput(e.from,e),i||this.setCredit()}},{key:"updateData",value:function(e,t){var n=eY.getObjectData(e).key;eY.isExist(eY.accessStorage(n,null))&&"set"!==t?e.from=eY.accessStorage(n,null):(e.from=parseInt(e.from),eY.accessStorage(n,e.from))}},{key:"setCredit",value:function(){this.$creditPercent.text(eY.calcCredit().percent)}},{key:"manualInput",value:function(e,t){this.chooseInputInteraction(e,t,"focus"),this.chooseInputInteraction(e,t,"blur"),this.chooseInputInteraction(e,t,"keyup"),this.chooseInputInteraction(e,t,"keydown")}},{key:"chooseInputInteraction",value:function(e,t,i){var o=/[^0-9.]/g,a=this;e.$input.on(i,function(s){switch(i){case"focus":eY.use$Value(this,"");break;case"blur":""===eY.use$Value(this)?n.setInput(e.from,e):(eY.checkInputedData(this,e,o),"price"===e.$rangeSlider.slider.input.id?(a.updateSlidersValues(e,"set",!0),a._recalculateFirstPayment()):a.updateSlidersValues(e,"set"),e.$rangeSlider.slider.update(),a.setCredit(),a.update());break;case"keyup":eY.use$Value(this)&&n.setInput(+eY.use$Value(this).replace(o,""),e);break;case"keydown":eY.preventNaNSymbolsEnter(s),eY.onKeyDownEvent(s,e,t,this,o);break;default:console.error("Wrong type of interaction")}})}},{key:"setPaymentOnTable",value:function(){this.banksArray.forEach(function(e){n.calcPaymentForBank(eV(e))})}},{key:"_recalculateFirstPayment",value:function(){var e=+this.$creditPercent[0].innerText.replace("%","");this.minPercent>e&&(e=this.minPercent);var t=eY.accessStorage("price[min]",null),n=Math.trunc(t*e/100),i=t/100*this.minPercent,o=t/100*this.maxPercent,a=(o-i)/(this.maxPercent-this.minPercent),s=this.$wrap.find('input[name="first-pay[min]"]'),r=eV(this.ranges["first-pay"]).data("ionRangeSlider");s.val(n.toLocaleString("ru-Ru")),r.update({from:n,min:i,max:o,step:a}),eY.accessStorage("first-pay[min]",n),this.setCredit()}},{key:"_disableItems",value:function(){var e=this;this.banksArray.forEach(function(t){e._setDisabled(eV(t))})}},{key:"_setDisabled",value:function(e){var t=e.find(".mortgage-bank__payment-value"),n=eY.getReplaceDotToNumber(e.attr("data-firstPayment")),i=+e.attr("data-limit"),o=+e.attr("data-limitMin");eY.accessStorage("creditPercent")<n||eY.accessStorage("creditPercent")>100||eY.accessStorage("limitation[min]")>i||eY.accessStorage("limitation[min]")<o?(t.text("—"),e.addClass(this.classes.disabled)):e.removeClass(this.classes.disabled),this.isTrancheEnabled&&!e.hasClass("_tranche")&&e.addClass(this.classes.disabled)}},{key:"_setOrdersCount",value:function(){var e=this.$banksItems.not(".".concat(this.classes.disabled,", .").concat(this.classes.hidden)).length;this.$orderCount.text("".concat(e))}},{key:"_checkEmptyResult",value:function(){var e=this.$banksItems.not(".".concat(this.classes.disabled,", .").concat(this.classes.hidden)).length?"removeClass":"addClass";this.$resultList[e](this.classes.disabled),this.$emptyResult[e](this.classes.active)}},{key:"_setTableOrder",value:function(){for(var e=0;e<this.$banksItems.length;e++)this._setItemOrder(eV(this.$banksItems[e]))}},{key:"_setItemOrder",value:function(e){var t=+e.attr("data-payment");t=0===t?1e7:t,e.css("order",t)}},{key:"update",value:function(){var e=this;this.hide(),setTimeout(function(){e.setPaymentOnTable(),e._disableItems(),e._setOrdersCount(),e._checkEmptyResult(),e._setTableOrder(),e.loadMoreProgramm(),e.flatPrice.text(e.$banksItems.find(".mortgage-bank__payment-value").first().text())},this.durationAnim),this.show()}},{key:"show",value:function(){var e=this;setTimeout(function(){e.$wrap.addClass("is-ready")},this.durationAnim)}},{key:"hide",value:function(){this.$wrap.removeClass("is-ready")}},{key:"_onChangeSelect",value:function(e){this._changeBanks(e),this._setOrdersCount(),this._checkEmptyResult()}},{key:"_changeBanks",value:function(e){var t=this;this.hide(),setTimeout(function(){Array.from(t.$banksItems).forEach(function(n){var i=eV(n),o=i.attr("data-type");-1!==e.indexOf(o)||-1!==e.indexOf("all")?i.removeClass(t.classes.hidden,t.classes.loadmore):i.addClass(t.classes.hidden)})},this.durationAnim),this.show()}},{key:"_onLeave",value:function(e){e.classList.remove("_show")}},{key:"_onEnter",value:function(e){e.classList.add("_show")}},{key:"_backToFilter",value:function(){var e=this;if(o.isMobile()){var t=this.wrap.querySelector(".mortgage-row__main");M.u.create({trigger:t,start:"top 80px",end:"bottom 80px",onEnter:function(){return e._onEnter(t)},onEnterBack:function(){return e._onEnter(t)},onLeave:function(){return e._onLeave(t)},onLeaveBack:function(){return e._onLeave(t)}})}}},{key:"loadMoreProgramm",value:function(){var e=this,t=this,n=this.$wrap.find(".mortgage-loadmore__button"),i=n.closest(".mortgage-loadmore__wrap"),a=n.find(".mortgage-loadmore__counter"),s=o.isMobile()?5:10,r=this.$banksItems.not(".".concat(t.classes.hidden,", .").concat(this.classes.disabled));n.removeClass(t.classes.active);var l=r.sort(function(e,t){return+e.style.order-+t.style.order}),c=function(){l.not(".".concat(e.classes.disabled)).addClass(t.classes.loadmore),l.slice(0,s).removeClass(t.classes.loadmore);var n=o.pluralWord(l.length-s,["ипотечную программы","ипотечные программы","ипотечных программ"]);a.text("Показать еще ".concat(l.length-s," ").concat(n)),l.length>s?i.show():i.hide()};c(),n.off(),n.on("click",function(e){e.preventDefault(),eV(this).toggleClass(t.classes.active),eV(this).hasClass(t.classes.active)?(l.not(".".concat(t.classes.disabled)).removeClass(t.classes.loadmore),a.text("Свернуть список")):c()})}},{key:"_createRateValues",value:function(){this.banksArray.forEach(function(e){var t=e.dataset.rate.split(",");e.querySelector(".mortgage-bank__rate").innerHTML=eY.createRate(t)})}}],t=[{key:"init",value:function(){var e=document.querySelectorAll("[data-mortgage]");e.length&&e.forEach(function(e){new n().init(e)})}},{key:"initSlider",value:function(e){new eR().initRange({element:e})}},{key:"setInput",value:function(e,t){t.$input.val(e.toLocaleString("ru-Ru")),"limitation[min]"===t.$input.attr("name")&&t.$postfix.text(eY.decodePostfix(e))}},{key:"calcMonthlyPay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e/12/100,o=12*eY.accessStorage("limitation[min]")-n,a=i*Math.pow(1+i,o)/(Math.pow(1+i,o)-1)*(eY.accessStorage("creditAmount")-t);return a<0?"—":a}},{key:"calcMonthlyPayTranch",value:function(e,t,n){var i=e/12/100,o=i*Math.pow(1+i,n)/(Math.pow(1+i,n)-1)*t;return o<0?"—":o}},{key:"calcPaymentForBank",value:function(e){var t=e.attr("data-rate").split(","),i=2===t.length,o=i&&+e.attr("data-tranch-cost"),a=i&&+e.attr("data-tranch-limit")||24,s="";s=i&&o?eY.isExist(n.calcMonthlyPay(t[0]))?eY.calc("monthlyPaymentPrettyTranche",n.calcMonthlyPayTranch(t[0],o,a),n.calcMonthlyPay(t[1],o,a)):"—":eY.isExist(n.calcMonthlyPay(t[0]))?eY.calc("monthlyPaymentPretty",n.calcMonthlyPay(t[0]),null):"—",e.find(".mortgage-bank__payment-value").html(s);var r="—"!==s?n.calcMonthlyPay(t[0]).toFixed():0;e.attr("data-payment",r)}}],e&&eZ(n.prototype,e),t&&eZ(n,t),n}(),eJ=n(380),eX=n.n(eJ);n(371);var eQ=n(692);function e0(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var e1=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.form=e,this.form&&(this.formValidate="false"!==this.form.dataset.validate,this.constraints=null,this.inputs=this.form.querySelectorAll("input, textarea"),this.BtnSubmit=this.form.querySelector("button"),this.inputs=Array.from(this.inputs).filter(function(e){return"hidden"!==e.type&&""!==e.getAttribute("notvalidate")}))}return e=[{key:"init",value:function(){this.initPhoneMask(),this.inputFocus(),this.formValidate&&(this.setOptions(),this.bindEvents())}},{key:"initPhoneMask",value:function(){eQ(this.form).find("input[type=tel]").mask("+7(A00)000-00-00",{translation:{A:{pattern:/[0-69]/}}})}},{key:"checkRequiredEmail",value:function(){var e=!1;return(this.inputs.forEach(function(t){"email"===t.type&&t.required&&(e=!0)}),e)?{message:"^Поле обязятельно для заполнения"}:null}},{key:"checkInputAttributes",value:function(){this.inputs.forEach(function(e){e.required&&e.removeAttribute("required")})}},{key:"setOptions",value:function(){var e={message:"^Поле обязятельно для заполнения"};this.constraints={email:{presence:this.checkRequiredEmail(),email:{message:"^Введите корректный e-mail"}},phone:{presence:e,length:{minimum:16,message:"^Неправильный формат телефона"}},message:{length:{minimum:5,message:"^Минимум 5 символов"}},name:{presence:e,length:{minimum:2,maximum:20,message:"^Минимум 2 символа"},format:{pattern:/^[a-zA-Zа-яёА-ЯЁs\s]+$/i,message:"^Имя может содержать только буквы"}},agreement:{presence:{message:"^Для продолжения необходимо согласие с условиями"},inclusion:{within:[!0],message:"^Для продолжения необходимо согласие с условиями"}}}}},{key:"inputFocus",value:function(){var e=document.querySelectorAll(".form-input__label, .form-textarea__label");function t(e){var t=e.target.parentNode;t.classList.add("is-focused"),t.classList.add("is-filled")}function n(e){var t=e.target.parentNode,n=e.target;t.classList.remove("is-focused"),""===n.value.trim()&&t.classList.remove("is-filled")}e.length&&e.forEach(function(e){var i=e.previousElementSibling,o=e.parentNode;i.value&&""!==i.value.trim()&&o.classList.add(".is-filled"),i.addEventListener("focus",t),i.addEventListener("blur",n)})}},{key:"bindEvents",value:function(){var e=this;this.inputs.forEach(function(t){t.addEventListener("change",function(){var n=eX()(e.form,e.constraints)||{};e.showErrorsForInput(t,n[t.name]),e._validate()}),t.addEventListener("keyup",function(){var n=eX()(e.form,e.constraints)||{};""!==t.value.trim()&&(e.showErrorsForInput(t,n[t.name]),e._validate())})})}},{key:"_validate",value:function(){var e=this,t=!0;this.inputs.forEach(function(n){var i=e.validateInput(n);void 0===i||i.result||(t=!1)}),this.BtnSubmit&&t&&this.BtnSubmit.classList.remove("is-disabled")}},{key:"validateInput",value:function(e){var t=e.closest(".form-input");if(t||(t=e.closest(".form-policy")),t)return t.classList.contains("has-error")?{result:!1}:{result:!0}}},{key:"showErrorsForInput",value:function(e,t){var n=this,i=e.closest(".form-input");if(i||(i=e.closest(".form-policy")),i){var o=i.querySelector(".form-input__messages")||i.querySelector(".messages");this.resetFormGroup(i),t?(i.classList.add("has-error"),o&&t.forEach(function(e){n.addError(o,e)}),this.BtnSubmit.classList.add("is-disabled")):i.classList.add("has-success")}}},{key:"resetFormGroup",value:function(e){e.classList.remove("has-error"),e.classList.remove("has-success");var t=e.querySelectorAll(".help-block.error");t.length&&t.forEach(function(e){e.parentNode.removeChild(e)})}},{key:"addError",value:function(e,t){var n=document.createElement("p");n.classList.add("help-block"),n.classList.add("error"),n.innerText=t,e.appendChild(n)}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll("[data-validate]");t.length&&t.forEach(function(e){new n(e).init()})}}],e&&e0(n.prototype,e),t&&e0(n,t),n}();function e3(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var e2=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.container=e,this.labelElement=this.container.querySelector("[data-photo-label]"),this.inputElem=this.container.querySelector("[data-photo-input]"),this.buttonElement=this.container.querySelector("[data-photo-button]"),this.buttonTextElement=this.container.querySelector("[data-photo-text]"),this.reader=new FileReader,this.fileName=null,this.fileSrc=null,this.isUploaded=!1,this.onInputChange=this.onInputChange.bind(this),this.onUploadSuccess=this.onUploadSuccess.bind(this),this.onUploadError=this.onUploadError.bind(this),this.onButtonClick=this.onButtonClick.bind(this),this.onLabelClick=this.onLabelClick.bind(this),this.fileExtension=["jpg","jpeg","png"]}return e=[{key:"init",value:function(){this.inputElem.addEventListener("change",this.onInputChange),this.buttonElement.addEventListener("click",this.onButtonClick),this.labelElement&&this.labelElement.addEventListener("click",this.onLabelClick),this.reader.addEventListener("load",this.onUploadSuccess)}},{key:"onInputChange",value:function(){var e=this;if(!this.isUploaded){var t=this.inputElem.files[0];this.fileName=t.name.toLowerCase(),this.fileExtension.some(function(t){return e.fileName.endsWith(t)})?this.reader.readAsDataURL(t):this.onUploadError()}}},{key:"onUploadSuccess",value:function(){this.buttonElement.classList.add("_cross"),this.buttonElement.classList.remove("_invalid"),this.inputElem.classList.remove("_invalid"),this.buttonTextElement.textContent=this.fileName,this.fileSrc=this.reader.result,this.isUploaded=!0}},{key:"onUploadError",value:function(){this.reset(),this.inputElem.classList.add("_invalid"),this.buttonElement.classList.add("_invalid"),console.warn("Неверный формат файла")}},{key:"onButtonClick",value:function(e){this.isUploaded&&(e.preventDefault(),this.reset())}},{key:"onLabelClick",value:function(e){this.isUploaded&&e.preventDefault()}},{key:"reset",value:function(){this.buttonElement.classList.remove("_cross"),this.inputElem.value="",this.buttonTextElement.textContent="Выбрать фото",this.fileName=null,this.fileSrc=null,this.isUploaded=!1}},{key:"resetHard",value:function(){this.reset(),this.inputElem.classList.remove("_invalid"),this.buttonElement.classList.remove("_invalid")}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll("[data-photo]");t.length&&t.forEach(function(e){new n(e).init()})}}],e&&e3(n.prototype,e),t&&e3(n,t),n}();function e6(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var e5=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.kitWrap=e,this.bodyNode=document.body,this.themeSwitcherElem=this.kitWrap.querySelector(".switch-appearance"),this.themeMode="light",this.navItems=this.kitWrap.querySelectorAll(".kit-nav__item"),this.rightItems=this.kitWrap.querySelectorAll(".kit-content__item"),this.dropdownElems=this.kitWrap.querySelectorAll("[data-dropdown-toggle]")}return e=[{key:"init",value:function(){var e=this;this._themeDetect(),this._bindEvents(),this.bodyNode.classList.add("page-kit"),setTimeout(function(){e.kitWrap.style.opacity=1},600),this._initPrism(),this._initClipboard(),this._initCloseSidebar(),this._checkDropdownOnActiveElement()}},{key:"_bindEvents",value:function(){var e=this;this.themeSwitcherElem&&this.themeSwitcherElem.addEventListener("click",this._themeToggle.bind(this)),this.navItems.forEach(function(t){t.addEventListener("click",e._setHash.bind(e))}),this.dropdownElems.length&&this.dropdownElems.forEach(function(t){t.addEventListener("click",e._toggleDropdown.bind(e))})}},{key:"_initPrism",value:function(){Prism.plugins.NormalizeWhitespace.setDefaults({"remove-trailing":!0,"remove-indent":!0,"left-trim":!0,"right-trim":!0})}},{key:"_initCloseSidebar",value:function(){var e=this,t=document.querySelector(".kit-sidebar__head-toggle"),n="default";"collapsed"===localStorage.getItem("layout-style")&&(n="collapsed",this.kitWrap.setAttribute("data-layout-style",n)),t&&t.addEventListener("click",function(){n="default"===n?"collapsed":"default",e.kitWrap.setAttribute("data-layout-style",n),localStorage.setItem("layout-style",n)})}},{key:"_initClipboard",value:function(){var e=document.querySelectorAll("[data-clipboard]");e.length<1||e.forEach(function(e){var t=e.querySelector("[data-clipboard-tooltip]"),n=new ClipboardJS(e,{target:function(e){return e.nextElementSibling}});n.on("success",function(){t.innerHTML="Скопировано!"}),n.on("error",function(){t.innerHTML="Ошибка!"})})}},{key:"_checkDropdownOnActiveElement",value:function(){this.dropdownElems.forEach(function(e){var t=e.nextElementSibling;t.querySelectorAll(".kit-nav__dropdown-link").forEach(function(e){e.firstChild.classList.contains("is-active")&&t.previousElementSibling.classList.add("is-open")})})}},{key:"_toggleDropdown",value:function(e){var t=e.target,n=t.classList.contains("is-open");this.dropdownElems.forEach(function(e){e.classList.remove("is-open")}),n?t.classList.remove("is-open"):t.classList.add("is-open")}},{key:"_setHash",value:function(e){var t=(e.target.dataset.tabOpener?e.target:e.target.parentNode).dataset.tabOpener;t&&this.setHash(t),o.isDesktop()||this._menuToggle()}},{key:"_themeDetect",value:function(){var e=localStorage.getItem("theme-appearance");e?"light"===e?this._setThemeLight():this._setThemeDark():(localStorage.setItem("theme-appearance","light"),this._setThemeLight())}},{key:"_themeToggle",value:function(){"light"===this.themeMode?this._setThemeDark():this._setThemeLight()}},{key:"_setThemeLight",value:function(){this.themeMode="light",localStorage.setItem("theme-appearance",this.themeMode),this.kitWrap.setAttribute("data-theme",this.themeMode)}},{key:"_setThemeDark",value:function(){this.themeMode="dark",localStorage.setItem("theme-appearance",this.themeMode),this.kitWrap.setAttribute("data-theme",this.themeMode)}},{key:"getHash",value:function(){return window.location.hash.replace(RegExp("^#","u"),"")}},{key:"setHash",value:function(e){return window.location.hash="#"+e}},{key:"isBreakpoint",value:function(e,t){return window.innerWidth>=e&&window.innerWidth<t}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelector(".kit-wrapper");t&&new n(t).init()}}],e&&e6(n.prototype,e),t&&e6(n,t),n}(),e9=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.ymaps=window.ymaps}return e=[{key:"init",value:function(e){this.geoObjectCollection=e,this.create()}},{key:"create",value:function(){var e=this.ymaps.templateLayoutFactory.createClass('<div class="yandex-map__cluster">{{ properties.geoObjects.length }}</div>');this.clusterer=new this.ymaps.Clusterer({clusterIconLayout:e,groupByCoordinates:!1,gridSize:128,zoomMargin:50,hasBalloon:!1,minClusterSize:5,clusterIconShape:{type:"Circle",coordinates:[0,0],radius:40}});var t=this.geoObjectCollection.toArray().filter(function(e){return"Placemark"===e.options.get("type")&&!e.options.get("data").not_cluster});this.clusterer.add(t),this.geoObjectCollection.add(this.clusterer)}},{key:"addGeoObjectToClusterer",value:function(e){this.clusterer.add(e)}},{key:"removeGeoObjectToClusterer",value:function(e){this.clusterer.remove(e)}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}(),e4=n(692),e8=new d,e7=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"init",value:function(e,t,n){this.map=e,this.mapWrapper=this.map.container._parentElement.closest(".j-yandex-map"),this.overlay=this.mapWrapper.querySelector(".yandex-map__overlay"),this.settings=t,this.ymaps=n,this.body=document.querySelector("body"),this.header=document.querySelector(".header"),this.mapName=!!t.name&&t.name,this._initZoom(),this._initScrollZoom(),this._addFullScreenControl(),this._bindEvents(),t.disableMobileDrag&&this._disableMobileDrag()}},{key:"_initZoom",value:function(){this.settings.zoomControl&&(this.settings.customZoomControl?this._initCustomZoomControl():this.map.controls.add("zoomControl"))}},{key:"_initScrollZoom",value:function(){this.settings.zoomScroll?this.map.behaviors.enable("scrollZoom"):this.map.behaviors.disable("scrollZoom")}},{key:"_addFullScreenControl",value:function(){this.settings.fullScreenControl&&(this.settings.customFullScreenControl?this._initCustomFullscreenControl():this.map.controls.add("fullscreenControl"))}},{key:"_bindEvents",value:function(){var e=this;["resize","orientationchange"].forEach(function(t){window.addEventListener(t,e._setZoomControlPosition.bind(e))})}},{key:"_disableMobileDrag",value:function(){var e={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return e.Android()||e.BlackBerry()||e.iOS()||e.Opera()||e.Windows()}};e.any()&&this.map.behaviors.disable("drag")}},{key:"_initCustomZoomControl",value:function(){var e=this.ymaps;this.zoomControl=new e.control.ZoomControl({options:{layout:this._createLayoutZoomControl()}}),this.map.controls.add(this.zoomControl,{float:"none"}),this._setZoomControlPosition()}},{key:"_createLayoutZoomControl",value:function(){var e,t=this.ymaps,n=this.map.container._parentElement.id,i=t.templateLayoutFactory.createClass((e={mapId:n},'\n  <div class="yandex-map__zoom-wrapper">\n    <div class="yandex-map__zoom-button yandex-map__zoom-button--zoom-in" id="'.concat(e.mapId,'-zoom-in">\n        <svg viewBox="0 0 426.66667 426.66667" xmlns="http://www.w3.org/2000/svg"><path d="m405.332031 192h-170.664062v-170.667969c0-11.773437-9.558594-21.332031-21.335938-21.332031-11.773437 0-21.332031 9.558594-21.332031 21.332031v170.667969h-170.667969c-11.773437 0-21.332031 9.558594-21.332031 21.332031 0 11.777344 9.558594 21.335938 21.332031 21.335938h170.667969v170.664062c0 11.777344 9.558594 21.335938 21.332031 21.335938 11.777344 0 21.335938-9.558594 21.335938-21.335938v-170.664062h170.664062c11.777344 0 21.335938-9.558594 21.335938-21.335938 0-11.773437-9.558594-21.332031-21.335938-21.332031zm0 0"/></svg>\n    </div>\n    <div class="yandex-map__zoom-button yandex-map__zoom-button--zoom-out" id="').concat(e.mapId,'-zoom-out">\n        <svg viewBox="0 -192 426.66667 426" xmlns="http://www.w3.org/2000/svg"><path d="m405.332031 43h-384c-11.773437 0-21.332031-9.558594-21.332031-21.332031 0-11.777344 9.558594-21.335938 21.332031-21.335938h384c11.777344 0 21.335938 9.558594 21.335938 21.335938 0 11.773437-9.558594 21.332031-21.335938 21.332031zm0 0"/></svg>\n    </div>\n    </div>')),{build:function(){i.superclass.build.call(this),this.zoomInCallback=t.util.bind(this.zoomIn,this),this.zoomOutCallback=t.util.bind(this.zoomOut,this),e4("#".concat(n,"-zoom-in")).bind("click",this.zoomInCallback),e4("#".concat(n,"-zoom-out")).bind("click",this.zoomOutCallback)},clear:function(){e4("#".concat(n,"-zoom-in")).unbind("click",this.zoomInCallback),e4("#".concat(n,"-zoom-out")).unbind("click",this.zoomOutCallback),i.superclass.clear.call(this)},zoomIn:function(){var e=this.getData().control.getMap();e.setZoom(e.getZoom()+1,{checkZoomRange:!0})},zoomOut:function(){var e=this.getData().control.getMap();e.setZoom(e.getZoom()-1,{checkZoomRange:!0})}});return i}},{key:"_setZoomControlPosition",value:function(){var e=this.map.container._size[1];this.zoomControl&&("contacts"===this.mapName?this.zoomControl.options.set("position",{top:e/2,left:10}):this.zoomControl.options.set("position",{top:e/2,right:10}))}},{key:"_initCustomFullscreenControl",value:function(){var e=this,t=this.ymaps,n={},i=null;i=t.templateLayoutFactory.createClass('<div class="yandex-map__fullscreen-button yandex-map__fullscreen-button-open" '.concat(void 0,' data-tooltip="На весь экран" data-tooltip-position="left">\n        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M19.0512 4H12V2H21H22V3V12H20V5.86693L5.46313 20H12V22H3H2V21V12H4V18.6331L19.0512 4Z"/>\n        </svg>\n      </div>')+'<div class="yandex-map__fullscreen-button yandex-map__fullscreen-button-close" data-tooltip="Закрыть" data-tooltip-position="left">\n        <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M6.00005 5.36846L0.631575 0L0 0.631574L5.36847 6.00003L6.74523e-05 11.3684L0.631643 12L6.00005 6.63161L11.3684 11.9999L11.9999 11.3683L6.63162 6.00003L12 0.631668L11.3684 9.42307e-05L6.00005 5.36846Z"/>\n        </svg>\n        </div>'),n="contacts"===this.mapName?{top:26,left:10}:{top:26,right:10};var a=new t.control.FullscreenControl({options:{layout:i,position:n}});this.map.controls.add(a),this.overlay&&this.overlay.addEventListener("click",function(t){t.preventDefault(),a.enterFullscreen(),e._setZoomControlPosition(),e.body.classList.add("map-open"),e.body.classList.add("map-open--".concat(e.mapName)),e.header.classList.remove("is-showed"),e.header.classList.add("is-hidden")}),this.map.container.events.add("fullscreenexit",function(){setTimeout(function(){e8.publish("fullscreenexit"),e.body.classList.remove("map-open"),e.body.classList.remove("map-open--".concat(e.mapName)),o.isDesktop()||e.map.behaviors.disable("drag")},100)}),this.map.container.events.add("fullscreenenter",function(){e.body.classList.add("map-open"),e.body.classList.add("map-open--".concat(e.mapName)),e.map.behaviors.enable("drag")})}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}(),te=new d,tt=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"init",value:function(e,t,n){this.map=t,this.settings=n,this.content=e,this.settings.groups&&this.settings.groups.length&&(this._clearIfHas(),this._createLayout(),this._initElements(),this._subscribes(),this._bindEvent())}},{key:"_subscribes",value:function(){var e=this;te.subscribe("map:updateGroups",function(t){var n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done);n=!0)!function(){var t=a.value;e.items.find(function(e){return e.dataset.id===t.groupId.toString()}).querySelector(".j-yandex-map__group-count").innerHTML=t.count}()}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}})}},{key:"_clearIfHas",value:function(){var e=this.content.querySelector(".j-yandex-map__groups");e&&o.removeElement(e)}},{key:"_createLayout",value:function(){this.content.children[0].insertAdjacentHTML("beforeend",(this.settings.groups,'<div class="yandex-map__groups j-yandex-map__groups">\n    <div class="yandex-map__group j-yandex-map__group" data-coords="" data-zoom="">\n        <span class="j-yandex-map__group-count"></span>\n    </div>\n</div>'))}},{key:"_initElements",value:function(){this.items=Array.from(this.content.querySelectorAll(".j-yandex-map__group"))}},{key:"_bindEvent",value:function(){var e=this;this.items.forEach(function(t){t.addEventListener("click",function(){var n=t.dataset.coords.split(","),i=t.dataset.zoom;e.map.panTo([e.map.getCenter(),n],{delay:0,flying:!1,safe:!1,duration:300}).then(function(){e.map.setZoom(i,{duration:300})})})})}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}();function tn(e){function t(){return e.balloon.title?'<div class="yandex-map-balloon__title">'.concat(e.balloon.title,"</div>"):""}function n(){return e.balloon.text?'<div class="yandex-map-balloon__text">'.concat(e.balloon.text,"</div>"):""}return'\n  <div class="yandex-map-balloon yandex-map-balloon--default j-yandex-map-balloon yandex-map-balloon--'.concat(e.modifyClass,'">\n    <div class="yandex-map-balloon__modal">\n      <div class="yandex-map-balloon__content">\n        ').concat(t(),"\n        ").concat(n(),'\n      </div>\n    </div>\n  <div class="yandex-map-balloon__panel">\n      <div class="yandex-map-balloon__content">\n        ').concat(t(),"\n        ").concat(n(),'\n      </div>\n  </div>\n  <div class="yandex-map-balloon__close j-yandex-map-balloon-close">\n    <svg width="18" height="18" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n        <path d="M6.00005 5.36846L0.631575 0L0 0.631574L5.36847 6.00003L6.74523e-05 11.3684L0.631643 12L6.00005 6.63161L11.3684 11.9999L11.9999 11.3683L6.63162 6.00003L12 0.631668L11.3684 9.42307e-05L6.00005 5.36846Z"/>\n    </svg>\n  </div>\n  </div>\n')}function ti(e){function t(){if(!e.balloon.tags)return"";var t=e.balloon.tags,n="";return t.forEach(function(e){n+='<div class="yandex-map-balloon__tags-item">'.concat(e,"</div>")}),'<div class="yandex-map-balloon__tags">'.concat(n,"</div>")}function n(){return e.icon?'<img class="yandex-map-balloon__image" src="'.concat(e.icon,'" alt="ЖК"/>'):""}function i(){return e.balloon.title?'<div class="yandex-map-balloon__title">'.concat(e.balloon.title,"</div>"):""}function o(){var t="",n="";return e.balloon.deadline||e.balloon.walkToCenter?(e.balloon.deadline&&(t="<li>Передача ключей  ".concat(e.balloon.deadline," </li>")),e.balloon.walkToCenter&&(n='<li><span class="walking"></span>до центра '.concat(e.balloon.walkToCenter," </li>")),"<ul>".concat(t).concat(n,"</ul>")):e.balloon.text?"".concat(e.balloon.text):void 0}return'<div class="yandex-map-balloon j-yandex-map-balloon yandex-map-balloon--'.concat(e.modifyClass,'">\n    <div class="yandex-map-balloon__modal">\n    <div class="yandex-map-balloon__content">\n        ').concat(t(),'\n          <div class="yandex-map-balloon__top">\n            ').concat(n(),'\n            <div class="yandex-map-balloon__top-right">\n              ').concat(e.typeName?'<div class="yandex-map-balloon__type">'.concat(e.typeName,"</div>"):"","\n              ").concat(i(),'\n            </div>\n          </div>\n          <div class="yandex-map-balloon__list">').concat(o(),'</div>\n          <div class="yandex-map-balloon__bottom">\n            <div class="yandex-map-balloon__price"> ').concat(e.balloon.price,'</div>\n            <div class="yandex-map-balloon__counter">').concat(e.balloon.rooms,'</div>\n          </div>\n\n    </div>\n    </div>\n      <div class="yandex-map-balloon__panel">\n          <div class="yandex-map-balloon__content">\n          ').concat(t(),"\n          ").concat(n(!0),'\n              <div class="yandex-map-balloon__info">\n                ').concat(i(!0),'\n                <div class="yandex-map-balloon__list">').concat(o(),'</div>\n                <div class="yandex-map-balloon__bottom">\n                  <div class="yandex-map-balloon__price"> ').concat(e.balloon.price,'</div>\n                  <div class="yandex-map-balloon__counter">').concat(e.balloon.rooms,"</div>\n                </div>\n                ").concat(e.active&&e.href?'<a href="'+e.href+'" class="yandex-map-balloon__link">Подробнее</a>':"",'\n              </div>\n          </div>\n      </div>\n      <div class="yandex-map-balloon__close j-yandex-map-balloon-close">\n        <svg width="18" height="18" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M6.00005 5.36846L0.631575 0L0 0.631574L5.36847 6.00003L6.74523e-05 11.3684L0.631643 12L6.00005 6.63161L11.3684 11.9999L11.9999 11.3683L6.63162 6.00003L12 0.631668L11.3684 9.42307e-05L6.00005 5.36846Z"/>\n        </svg>\n      </div>\n      </div>\n  ')}function to(e){function t(){return e.balloon.image?'<img class="" src="'.concat(e.balloon.image,'" alt="ЖК"/>'):""}function n(){return e.balloon.type?'<div class="yandex-map-balloon__type">'.concat(e.balloon.type,"</div>"):""}function i(){return e.balloon.title?'<div class="yandex-map-balloon__title">'.concat(e.balloon.title,"</div>"):""}return'\n  <div class="j-yandex-map-balloon yandex-map-balloon yandex-map-balloon--'.concat(e.modifyClass,'">\n    <div class="yandex-map-balloon__modal">\n      <div class="yandex-map-balloon__content">\n        <div class="yandex-map-balloon__image">\n          ').concat(t(),'\n        </div>\n        <div class="yandex-map-balloon__info">\n          ').concat(n(),"\n          ").concat(i(),'\n        </div>\n      </div>\n    </div>\n    <div class="yandex-map-balloon__panel">\n      <div class="yandex-map-balloon__content">\n        <div class="yandex-map-balloon__image">\n          ').concat(t(),'\n        </div>\n        <div class="yandex-map-balloon__info">\n          ').concat(n(),"\n          ").concat(i(),'\n        </div>\n      </div>\n    </div>\n    <div class="yandex-map-balloon__close j-yandex-map-balloon-close">\n      <svg width="18" height="18" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M6.00005 5.36846L0.631575 0L0 0.631574L5.36847 6.00003L6.74523e-05 11.3684L0.631643 12L6.00005 6.63161L11.3684 11.9999L11.9999 11.3683L6.63162 6.00003L12 0.631668L11.3684 9.42307e-05L6.00005 5.36846Z"/>\n      </svg>\n    </div>\n  </div>\n')}function ta(e){function t(){return e.balloon.title?'<div class="yandex-map-balloon__title">'.concat(e.balloon.title,"</div>"):""}function n(){return e.balloon.text?'<div class="yandex-map-balloon__text">'.concat(e.balloon.text,"</div>"):""}function i(){return e.balloon.worktime?'<div class="yandex-map-balloon__text">'.concat(e.balloon.worktime,"</div>"):""}function o(){return e.balloon.phones?'<div class="yandex-map-balloon__text">'.concat(e.balloon.phones,"</div>"):""}return'\n<div class="yandex-map-balloon yandex-map-balloon--office j-yandex-map-balloon yandex-map-balloon--'.concat(e.modifyClass,'">\n  <div class="yandex-map-balloon__modal">\n    <div class="yandex-map-balloon__content">\n    ').concat(t(),"\n    ").concat(n(),"\n    ").concat(i(),"\n    ").concat(o(),'\n    </div>\n  </div>\n<div class="yandex-map-balloon__panel">\n    <div class="yandex-map-balloon__content">\n      ').concat(t(),"\n      ").concat(n(),"\n      ").concat(i(),"\n      ").concat(o(),'\n    </div>\n</div>\n<div class="yandex-map-balloon__close j-yandex-map-balloon-close">\n  <svg width="18" height="18" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n      <path d="M6.00005 5.36846L0.631575 0L0 0.631574L5.36847 6.00003L6.74523e-05 11.3684L0.631643 12L6.00005 6.63161L11.3684 11.9999L11.9999 11.3683L6.63162 6.00003L12 0.631668L11.3684 9.42307e-05L6.00005 5.36846Z"/>\n  </svg>\n</div>\n</div>\n')}function ts(e){function t(){return e.balloon.title?'<div class="yandex-map-balloon__title">'.concat(e.balloon.title,"</div>"):""}function n(){return e.balloon.text?'<div class="yandex-map-balloon__text">'.concat(e.balloon.text,"</div>"):""}return'\n    <div class="yandex-map-balloon j-yandex-map-balloon yandex-map-balloon--'.concat(e.modifyClass,'">\n      <div class="yandex-map-balloon__modal">\n        <div class="yandex-map-balloon__content">\n          ').concat(t(),"\n          ").concat(n(),'\n        </div>\n      </div>\n    <div class="yandex-map-balloon__panel">\n        <div class="yandex-map-balloon__content">\n          ').concat(t(),"\n          ").concat(n(),'\n        </div>\n    </div>\n    <div class="yandex-map-balloon__close j-yandex-map-balloon-close">\n      <svg width="18" height="18" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M6.00005 5.36846L0.631575 0L0 0.631574L5.36847 6.00003L6.74523e-05 11.3684L0.631643 12L6.00005 6.63161L11.3684 11.9999L11.9999 11.3683L6.63162 6.00003L12 0.631668L11.3684 9.42307e-05L6.00005 5.36846Z"/>\n      </svg>\n    </div>\n    </div>\n')}function tr(){return'<div class="yandex-map__dot-marker j-yandex-map-marker"></div>'}function tl(e){return'<div class="yandex-map__text-marker j-yandex-map-marker">'.concat(e.text,"</div>")}function tc(e){return'<div class="yandex-map__infrastructure-marker j-yandex-map-marker" style="background: '.concat(e.color,'">\n    <i class="yandex-map__infrastructure-marker-icon ').concat(e.icon,'"></i>\n</div>')}var tu=function(){return window.innerWidth<1199};function th(e){return'<div class="yandex-map__marker j-yandex-map-marker">\n    <img src="'.concat(e.icon,'" alt=""/>\n</div>')}function td(e){return'<div data-href="'.concat(e.href,'" class="yandex-map__object-marker j-yandex-map-marker j-map-project ').concat(e.active?" is-active":"",'" data-marker-id="').concat(e.id,'">\n      <div class="marker-image">\n      ').concat(e.icon?'<img class="marker-image__image" src="'+e.icon+'" alt="ЖК"/>':"",'\n      </div>\n      <div class="marker-content">\n        <div class="marker-content__type">').concat(e.typeName?e.typeName:"",'</div>\n        <div class="marker-content__name">').concat(e.name?e.name:"","</div>\n      </div>\n</div>")}function tp(e){return'<div class="yandex-map__point-marker j-yandex-map-marker data-marker-id="'.concat(e.id,'">\n    <div class="marker-image">\n    ').concat(e.icon?'<img class="marker-image__image" src="'+e.icon+'" alt="ЖК"/>':"","\n    </div>\n</div>")}function tf(e){return'\n    <div class="yandex-map__office-marker j-yandex-map-marker" data-marker-id="'.concat(e.id,'">\n        <svg class="yandex-map__office-marker-svg" width="46" height="46" viewBox="0 0 46 46" xmlns="http://www.w3.org/2000/svg">\n          <path d="M22.9998 24.9167C26.1755 24.9167 28.7498 22.3423 28.7498 19.1667C28.7498 15.9911 26.1755 13.4167 22.9998 13.4167C19.8242 13.4167 17.2498 15.9911 17.2498 19.1667C17.2498 22.3423 19.8242 24.9167 22.9998 24.9167Z"  stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"/>\n          <path d="M22.9998 42.1667C30.6665 34.5 38.3332 27.6351 38.3332 19.1667C38.3332 10.6983 31.4682 3.83337 22.9998 3.83337C14.5315 3.83337 7.6665 10.6983 7.6665 19.1667C7.6665 27.6351 15.3332 34.5 22.9998 42.1667Z"  stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"/>\n        </svg>\n    </div>')}var tm=new d,tv=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.state="close",this.id=null,this.defDelay=300,this.aciveClass="is-active",this._subscribes()}return e=[{key:"_subscribes",value:function(){var e=this;tm.subscribe("fullscreenexit",function(){"close"!==e.state&&e._close()})}},{key:"open",value:function(e){this.data=e.options.get("data"),this.template=e.options.get("template"),this.domTarget=e.getOverlaySync().getLayoutSync().getElement(),this.marker=this.domTarget.querySelector(".j-yandex-map-marker"),this.wrapper=document.querySelector(".j-yandex-map-root"),this.id===Number(this.data.id)?this._close():this.id!==Number(this.data.id)&&"close"!==this.state?(this._close(),this._createTemplate("repeat")):this._createTemplate()}},{key:"_createTemplate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t?this.defDelay:0;this._setStateMarker(),setTimeout(function(){o.insetContent(e.wrapper,e.template(e.data)),e.id=Number(e.data.id),e._getElements(),e._bindEvents(),e._showPanel()},n)}},{key:"_getElements",value:function(){this.panel=this.wrapper.querySelector(".j-yandex-map-balloon"),this.panelHeight=this.panel.offsetHeight}},{key:"_bindEvents",value:function(){var e=this,t=Array.from(this.panel.querySelectorAll(".j-yandex-map-balloon-close"));t.length&&t.forEach(function(t){t.addEventListener("click",function(){e._close()})})}},{key:"_showPanel",value:function(){this.panel.style.transform="translateY(".concat(-this.panelHeight,"px)"),this.state="show",this.wrapper.classList.add(this.aciveClass)}},{key:"_hideAll",value:function(){this.panel.style.transform="translateY(0)",this.state="close",this.wrapper.classList.remove(this.aciveClass)}},{key:"_close",value:function(){var e=this;this._removeStateMarker(),this._hideAll(),this.id="тест",setTimeout(function(){o.removeElement(e.panel)},this.defDelay)}},{key:"_setStateMarker",value:function(){this.marker&&this.marker.classList.add(this.aciveClass)}},{key:"_removeStateMarker",value:function(){this.marker&&(this.activeMarker=document.querySelector(".j-yandex-map-marker.is-active"),this.activeMarker&&this.activeMarker.classList.remove(this.aciveClass),this.marker.classList.remove(this.aciveClass))}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}(),ty=n(692),tg=new tv,tb=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.ymaps=window.ymaps,this.desktopBreakpoint=1199}return e=[{key:"createMarker",value:function(e){return(this._setSettings(e),e.balloon.title||e.balloon.text)?this._initWithBallon():this._initWithoutBalloon()}},{key:"createHtmlMarker",value:function(e){this._setTemplateMarker(e),this._setTemplateBalloon(e),this.ballon=e,this.office=e.office||!1,this.route=e.route||!1;var t=this.ymaps.templateLayoutFactory.createClass(this.markerTemplate(e),{build:function(){this.constructor.superclass.build.call(this),this._$element=ty(".yandex-map__".concat(e.modifyClass,"-marker"),this.getParentElement()),this._options=this.getData().options,this._size=[this._$element[0].offsetWidth,this._$element[0].offsetHeight],this._offset=this._calcElementOffset();var t={type:"Rectangle",coordinates:[this._offset,[this._offset[0]+this._size[0],this._offset[1]+this._size[1]]]};this._options.set("shape",t),this._applyElementOffset(this._offset),this._bindEvents()},_bindEvents:function(){var e=this;this.inited||(this.inited=!0,this.innerWidth=window.innerWidth,window.addEventListener("resize",function(){window.innerWidth!==e.innerWidth&&(e.innerWidth=window.innerWidth,e.rebuild())}))},_calcElementOffset:function(){switch(e.modifyClass){case"infrastructure":case"point":return[-this._size[0]/2,-this._size[1]/2];case"object":return[-this._size[1]/2,-this._size[1]/2];default:return[-this._size[0]/2,-this._size[1]]}},_applyElementOffset:function(e){this._$element[0].style.marginLeft="".concat(e[0],"px"),this._$element[0].style.marginTop="".concat(e[1],"px")}}),n=e.zIndex||!1,i=e.balloon,o=!tu()&&!!i&&this._createBalloonContentLayout(),a=new this.ymaps.Placemark(e.coords,{},{type:"Placemark",balloonLayout:o,iconLayout:t,hideIconOnBalloonOpen:this.hideIconOnBalloonOpen,office:this.office,template:this.balloonTemplate,data:e,iconShape:this._setIconShape(e),zIndex:n,panel:tg,cursor:i?"pointer":"default",isBalloon:i});return this._bindEventsMarker(a),e.isHidden&&a.options.set("visible",!1),a}},{key:"_setSettings",value:function(e){var t={};t.lat=59.939014,t.lon=30.315545,t.iconWidth=24,t.iconHeight=24,t.offsetTop=0,t.offsetLeft=0,this.type=e.type||"Point",this.coords=e.coords||[t.lat,t.lon],this.iconLayout="default#image",this.iconImageHref=e.icon||"../../webicons/map/media/markers/marker.svg",this.iconImageSize=e.size||[t.iconWidth,t.iconHeight],this.iconImageOffset=e.offset||[t.offsetTop,t.offsetLeft],this.route=e.route||!1,this.ballon=e}},{key:"_initWithoutBalloon",value:function(){return new this.ymaps.Placemark(this.coords,{type:this.type},{iconLayout:this.iconLayout,iconImageHref:this.iconImageHref,iconImageSize:this.iconImageSize,iconImageOffset:this.iconImageOffset})}},{key:"_initWithBallon",value:function(){this._setTemplateBalloon();var e=new this.ymaps.Placemark(this.coords,{type:this.type},{balloonLayout:this._createBalloonContentLayout(),iconLayout:this.iconLayout,iconImageHref:this.iconImageHref,iconImageSize:this.iconImageSize,iconImageOffset:this.iconImageOffset,route:this.route,template:this.balloonTemplate,data:this.ballon,hideIconOnBalloonOpen:!1});return this._bindEventsMarker(e),e}},{key:"_setTemplateMarker",value:function(e){switch(e.modifyClass){case"object":this.hideIconOnBalloonOpen=!1,this.markerTemplate=td;break;case"point":this.hideIconOnBalloonOpen=!1,this.markerTemplate=tp;break;case"infrastructure":this.hideIconOnBalloonOpen=!1,this.markerTemplate=tc;break;case"office":this.hideIconOnBalloonOpen=!1,this.markerTemplate=tf;break;case"dot":this.hideIconOnBalloonOpen=!1,this.markerTemplate=tr;break;case"text":this.hideIconOnBalloonOpen=!1,this.markerTemplate=tl;break;default:this.hideIconOnBalloonOpen=!1,this.markerTemplate=th}}},{key:"_setTemplateBalloon",value:function(e){switch(e.modifyClass){case"object":this.balloonTemplate=ti;break;case"point":this.balloonTemplate=to;break;case"office":this.balloonTemplate=ta;break;case"infrastructure":this.balloonTemplate=ts;break;default:this.balloonTemplate=tn}}},{key:"_setIconShape",value:function(e){return tu()?this.iconImageSize=[Number(e.size.height),Number(e.size.height)]:this.iconImageSize=[-Number(e.size.width/2),-Number(e.size.height)],{type:"Rectangle",coordinates:[[0,0],this.iconImageSize]}}},{key:"_createBalloonContentLayout",value:function(){var e=this,t=this.ymaps.templateLayoutFactory.createClass(this.balloonTemplate(this.ballon),{build:function(){var t=this;this.constructor.superclass.build.call(this),this.balloon=document.querySelector(".j-yandex-map-balloon"),this.closeBallooneButtons=Array.from(document.querySelectorAll(".j-yandex-map-balloon-close")),e.markerOffset(this.balloon),this.closeBallooneButtons.forEach(function(e){e.addEventListener("click",t.onCloseClick.bind(t))})},clear:function(){this.constructor.superclass.clear.call(this)},onCloseClick:function(e){e.preventDefault(),this.events.fire("userclose")},onSublayoutSizeChange:function(){t.superclass.onSublayoutSizeChange.apply(this,arguments),this.balloon&&(e.markerOffset(this.balloon),this.events.fire("shapechange"))},getShape:function(){if(!this.balloon)return t.superclass.getShape.call(this);var e=this.balloon.offsetHeight,n=this.balloon.offsetWidth,i=this.balloon.offsetTop,o=this.balloon.offsetLeft;return new window.ymaps.shape.Rectangle(new window.ymaps.geometry.pixel.Rectangle([[o,i],[o+n,i+e]]))}});return t}},{key:"markerOffset",value:function(e){var t=this.iconImageSize[0],n=this.iconImageSize[1],i=e.classList;switch(!0){case i.contains("yandex-map-balloon--infrastructure"):e.style.left="".concat(-(e.offsetWidth/2),"px"),e.style.top="".concat(-e.offsetHeight-10+n/2,"px");break;case i.contains("yandex-map-balloon--object"):e.style.left="".concat(t,"px"),e.style.top="".concat(-(n-10)/2,"px");break;case i.contains("yandex-map-balloon--point"):e.style.left="".concat(-(e.offsetWidth/2),"px"),e.style.top="".concat(-e.offsetHeight-10+n/2,"px");break;case i.contains("yandex-map-balloon--office"):e.style.left="".concat(-(e.offsetWidth/2),"px"),e.style.top="".concat(-e.offsetHeight-10+n,"px");break;default:e.style.left="".concat(-(e.offsetWidth/2)+t/2,"px"),e.style.top="".concat(-e.offsetHeight-n/2,"px")}}},{key:"closeBalloonOnClickMap",value:function(e){window.innerWidth>this.desktopBreakpoint&&(e.geoObjects.events.add("click",function(){e.balloon.isOpen()&&e.balloon.close()}),e.events.add("click",function(){e.balloon.isOpen()&&e.balloon.close()}))}},{key:"_bindEventsMarker",value:function(e){window.innerWidth>=this.desktopBreakpoint&&!e.options.get("data").onlyPanel?(e.events.add("mouseenter",this.onMouseenterMarker.bind(this)),e.events.add("mousemove",this.onMousemoveMarker.bind(this)),e.events.add("mouseleave",this.onMouseleaveMarker.bind(this)),e.events.add("click",this._onMouseClickMarker.bind(this))):e.events.add("click",this.onMouseenterMarker.bind(this))}},{key:"_getMarkerElement",value:function(e){return e.get("target").getOverlaySync().getLayoutSync().getElement().querySelector(".j-yandex-map-marker")}},{key:"_onMouseClickMarker",value:function(e){var t=e.get("target"),n=this._getMarkerElement(e);if(t.options.get("data").href){n.closest(".j-map-project")&&n.classList.contains("is-active")&&window.open(t.options.get("data").href);return}tu()&&t.options.get("balloonLayout")&&(e.preventDefault(),tg.open(t))}},{key:"onMousemoveMarker",value:function(e){var t=e.get("target").balloon,n=t.isOpen(),i=this._getMarkerElement(e);n||(this.bindEventsBalloon(t),i.classList.add("is-open-balloon"),t.open())}},{key:"onMouseenterMarker",value:function(e){var t=e.get("target"),n=t.balloon,i=t.options.get("data").onlyPanel;tu()||i?tg.open(t):this.bindEventsBalloon(n)}},{key:"onMouseleaveMarker",value:function(e){var t=e.get("target").balloon,n=this._getMarkerElement(e);this.timerCloseBalloon=this.getSetTimeoutClosingBalloon(t,n)}},{key:"bindEventsBalloon",value:function(e){e.events.add("mouseenter",this.onMouseenterBalloon.bind(this)),e.events.add("mouseleave",this.onMouseleaveBalloon.bind(this))}},{key:"onMouseenterBalloon",value:function(){clearTimeout(this.timerCloseBalloon),this.timerCloseBalloon=null}},{key:"onMouseleaveBalloon",value:function(e){var t=e.get("target").balloon,n=this._getMarkerElement(e);this.getSetTimeoutClosingBalloon(t,n)}},{key:"getSetTimeoutClosingBalloon",value:function(e,t){t.classList.remove("is-open-balloon"),t.classList.add("is-hide-balloon");var n=document.querySelector(".yandex-map-balloon");return n&&n.classList.add("is-hide-balloon"),setTimeout(function(){e.close(),t.classList.remove("is-hide-balloon")},300)}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}(),t_=new d,tk=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.buttons=null,this.resetButton=null,this.disableClass="is-active"}return e=[{key:"init",value:function(e){this.buttons=Array.from(e.target.querySelectorAll(".j-map-filter-item")),this.resetButton=e.resetButton||null,this._bindEvents()}},{key:"_bindEvents",value:function(){var e=this;this.buttons.forEach(function(t){t.addEventListener("change",function(){e._changeFilter(t)})}),this._resetFilter(),this.resetButton.addEventListener("click",function(){e._resetFilter()})}},{key:"_changeFilter",value:function(e){if(this.buttons.every(function(e){return!1===e.checked})){this.resetButton.classList.add(this.disableClass),t_.publish("showAllMarkers");return}var t=e.checked?"addFilterItem":"removeFilterItem",n=[];this.buttons.forEach(function(e){!0===e.checked&&n.push(e.dataset.type)}),this.resetButton.classList.remove(this.disableClass),t_.publish(t,n),t_.publish("filterUpdated")}},{key:"_resetFilter",value:function(){this.buttons.forEach(function(e){e.checked=!1}),this.resetButton.classList.add(this.disableClass),t_.publish("showAllMarkers")}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}();function tw(e,t,n,i,o,a,s){try{var r=e[a](s),l=r.value}catch(e){n(e);return}r.done?t(l):Promise.resolve(l).then(i,o)}function tS(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){tw(a,i,o,s,r,"next",e)}function r(e){tw(a,i,o,s,r,"throw",e)}s(void 0)})}}function tE(e,t){var n,i,o,a,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(a){return function(r){return function(a){if(n)throw TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,r])}}}var tx=new d,tC=function(){var e;function t(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.ymaps=e,this.geoObjectCollection=new this.ymaps.GeoObjectCollection,this.settings={},this.map=null,this.desktopBreakpoint=1199}return e=[{key:"init",value:function(e){this.outerOptions=e,this.mapWrapper=e.wrapper,this.content=this.mapWrapper.querySelector(".yandex-map__base"),this.mapRoot=this.mapWrapper.closest(".j-yandex-map-root"),this.id=this.content.id,this.json=this.mapWrapper.dataset.json||e.json,this.mapWrapper.removeAttribute("data-json"),this._runMap(),this._subscribes()}},{key:"update",value:function(){this.geoObjectCollection&&(this.map.geoObjects.remove(this.geoObjectCollection),this.geoObjectCollection=new this.ymaps.GeoObjectCollection),this._initHistoricalPolygon(),this._initMarker(),this._initGroups(),this._initCircles()}},{key:"_subscribes",value:function(){var e=this;this._showGeoObject=this._showGeoObject.bind(this),this._hideGeoObject=this._hideGeoObject.bind(this),tx.subscribe("addFilterItem",function(t){e._toggleGeoObjects(t,e._showGeoObject)}),tx.subscribe("removeFilterItem",function(t){e._toggleGeoObjects(t,e._hideGeoObject)}),tx.subscribe("showAllMarkers",function(){e._visibleAllMarkers()}),tx.subscribe("mapSetCenter",function(){e._setCenterMap()})}},{key:"removeFilterItem",value:function(e){var t=this;e.forEach(function(e){t.geoObjectCollectionArray.forEach(function(n){n.options.get("data").type===e&&t._hideGeoObject(n)})})}},{key:"addFilterItem",value:function(e){var t=this;e.forEach(function(e){t.geoObjectCollectionArray.forEach(function(n){n.options.get("data").type===e&&t._showGeoObject(n)})})}},{key:"updateGroups",value:function(e){if(this.settings.groups){var t=[],n=!0,i=!1,o=void 0;try{for(var a,s,r=this.settings.groups[Symbol.iterator]();!(n=(s=r.next()).done);n=!0)a=this,function(){var n=s.value,i=a.geoObjectCollectionArray.filter(function(t){return t.options.get("data").type===e&&t.options.get("data").group===n.id});t.push({groupId:n.id,count:i.length})}()}catch(e){i=!0,o=e}finally{try{n||null==r.return||r.return()}finally{if(i)throw o}}tx.publish("map:updateGroups",t)}}},{key:"_runMap",value:function(){var e=this;return tS(function(){return tE(this,function(t){switch(t.label){case 0:return[4,e._setSettings()];case 1:return t.sent(),[4,e._initYandexMap()];case 2:return t.sent(),e._setDeviceSettings(),e._initMarker(),e._initControls(),e._initCluster(),e._initGroups(),e._initCircles(),e._bindEvents(),e._showMap(),e._createFilterList(),e._initMapFilter(),tx.publish("map:ready"),[2]}})})()}},{key:"_setSettings",value:function(){var e=this;return tS(function(){var t;return tE(this,function(n){return e._connectSettings(e._setDefaultSettings()),e._connectSettings(e._setScriptSettings()),e.json&&(t=JSON.parse(e.json),e._connectSettings(t.data)),[2]})})()}},{key:"_initYandexMap",value:function(){var e=this;return tS(function(){var t,n;return tE(this,function(i){switch(i.label){case 0:t=function(){return new Promise(function(t){if(e.map=new e.ymaps.Map(e.id,e.settings,{suppressMapOpenBlock:!0}),e.map)t();else throw Error()})},i.label=1;case 1:return i.trys.push([1,3,,4]),[4,t()];case 2:return[2,i.sent()];case 3:throw n=i.sent(),console.error("При инициализации Яндекс Карт произошла критическая ошибка ".concat(n)),Error();case 4:return[2]}})})()}},{key:"_connectSettings",value:function(e){"object"==typeof e&&Object.assign(this.settings,e)}},{key:"_setDefaultSettings",value:function(){return{center:[59.939014,30.315545],mapTypeControl:!1,autoZoom:!1,zoom:12,zoomMargin:250,minZoom:10,maxZoom:18,zoomStep:1,controls:[],zoomControl:!0,name:"default",customZoomControl:!0,fullScreenControl:!0,customFullScreenControl:!0,height:this.content.offsetHeight,zoomScroll:!1,markers:[]}}},{key:"_setScriptSettings",value:function(){return this.outerOptions}},{key:"_setDeviceSettings",value:function(){this._setDeviceCenter(),this._setDeviceZoom(),this.outerOptions.disableZoom&&this._disableZoom(),this.outerOptions.disableDrag&&this._disableDrag()}},{key:"_setDeviceCenter",value:function(){if(this.settings.centerMobile){var e=this.map.getZoom();o.isMobile()?this.map.setCenter(this.settings.centerMobile,e,{useMapMargin:!0}):this.map.setCenter(this.settings.center,e,{useMapMargin:!0})}}},{key:"_setDeviceZoom",value:function(){this.settings.zoomMobile&&(o.isMobile()?this.map.setZoom(this.settings.zoomMobile):this.map.setZoom(this.settings.zoom))}},{key:"_initMarker",value:function(){var e=this;this.settings.markers.forEach(function(t){var n=new tb;e.geoObjectCollection.add(n.createHtmlMarker(t)),n.closeBalloonOnClickMap(e.map)}),this.geoObjectCollectionArray=this.geoObjectCollection.toArray().map(function(e){return e}),this.map.geoObjects.add(this.geoObjectCollection),this.geoObjectCollectionArray.length>1&&this.settings.autoZoom&&this.map.setBounds(this.geoObjectCollection.getBounds(),{zoomMargin:this.settings.zoomMargin}),this._bindMapClick()}},{key:"_bindMapClick",value:function(){var e=this,t=new CustomEvent("bindMapClick");window.dispatchEvent(t),this.map.events.add("click",function(){window.innerWidth<e.desktopBreakpoint&&window.dispatchEvent(t)})}},{key:"_initControls",value:function(){new e7().init(this.map,this.settings,this.ymaps)}},{key:"_initCluster",value:function(){var e=this.settings.markers.filter(function(e){return"object-min"===e.modifyClass});this.outerOptions.cluster&&!e.length&&(this.cluster=new e9,this.cluster.init(this.geoObjectCollection))}},{key:"_initGroups",value:function(){this.settings.groups&&this.settings.groups.length&&new tt().init(this.content,this.map,this.settings)}},{key:"_initCircles",value:function(){var e=this,t=this.settings.circles;t&&t.forEach(function(t){var n=new ymaps.Circle([t.center,t.radius],{},{fillColor:t.fillColor,fillOpacity:t.fillOpacity,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWidth:t.strokeWidth,strokeStyle:t.strokeStyle});e.map.geoObjects.add(n)})}},{key:"_bindEvents",value:function(){var e=this;this._setDeviceSettings=this._setDeviceSettings.bind(this),["resize","orientationchange"].forEach(function(t){window.addEventListener(t,o.debounce(e._setDeviceSettings,100))})}},{key:"_showMap",value:function(){this.content.classList.remove("is-loading"),this.content.style.opacity="1",this.outerOptions.afterShow&&this.outerOptions.afterShow()}},{key:"_createFilterList",value:function(){var e=this;if(this.mapRoot&&this.mapRoot.querySelector(".j-yandex-map-infrastructure")){var t=this.mapRoot.querySelector(".j-map-filter"),n=this.settings.markers,i="",o=[];n.forEach(function(t){if("infrastructure"===t.modifyClass){var n=t.type;o.includes(n)||(i+=e.createFilterItem(t),o.push(n))}}),t.innerHTML=i}}},{key:"createFilterItem",value:function(e){return'\n        <li class="infrastructure-legend__list-item">\n          <label class="infrastructure-label">\n            <input class="infrastructure-label__checkbox j-map-filter-item" type="checkbox" name="'.concat(e.type,'" data-type="').concat(e.type,'" id="').concat(e.type,'" />\n            <div class="infrastructure-label__inner">\n              <span class="infrastructure-label__text">').concat(e.name,'</span>\n              <span class="infrastructure-label__icon">\n                <i class="').concat(e.icon,'"></i>\n              </span>\n            </div>\n          </label>\n        </li>\n      ')}},{key:"_initMapFilter",value:function(){if(this.mapRoot){var e=this.mapRoot.querySelector(".j-map-filter"),t=this.mapRoot.querySelector(".j-map-filter-reset"),n=this.mapRoot.querySelector(".j-map-filter-apply");e&&(new tk().init({target:e,resetButton:t}),n&&tx.subscribe("filterUpdated",function(){n.classList.remove("is-hidden")}));var i=this.mapRoot.querySelector(".j-yandex-map-infrastructure"),o=this.mapRoot.querySelector(".j-yandex-map-filter-toggle");o&&i&&(o.addEventListener("click",function(){i.classList.toggle("is-open"),o.classList.toggle("is-open")}),n.addEventListener("click",function(){n.classList.add("is-hidden"),i.classList.remove("is-open"),o.classList.remove("is-open")}))}}},{key:"_showGeoObject",value:function(e){this.cluster.addGeoObjectToClusterer(e)}},{key:"_hideGeoObject",value:function(e){this.cluster.removeGeoObjectToClusterer(e)}},{key:"_toggleGeoObjects",value:function(e,t){var n=this;this.geoObjectCollectionArray.forEach(function(e){"point"!==e.options.get("data").type&&"text"!==e.options.get("data").type&&n._hideGeoObject(e)}),e.forEach(function(e){n.geoObjectCollectionArray.forEach(function(i){i.options.get("data").type===e&&(t(i),n._showGeoObject(i))})})}},{key:"_visibleAllMarkers",value:function(){var e=this;this.geoObjectCollectionArray.forEach(function(t){"point"!==t.options.get("data").type&&e._showGeoObject(t)})}},{key:"hideAllMarkers",value:function(){var e=this;this.geoObjectCollectionArray.forEach(function(t){"point"!==t.options.get("data").type&&e._hideGeoObject(t)})}},{key:"_setCenterMap",value:function(e){window.innerWidth<1199&&this.setCenter(e,this.settings.zoom)}},{key:"_disableZoom",value:function(){var e=this.map.getZoom();this.map.behaviors.disable("dblClickZoom"),this.map.behaviors.disable("scrollZoom"),this.map.options.set("maxZoom",e),this.map.options.set("minZoom",e)}},{key:"_disableDrag",value:function(){this.map.behaviors.disable("drag")}},{key:"getMarkers",value:function(){return this.settings.markers}},{key:"setCenter",value:function(e,t){this.map.setCenter(e,t)}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}(),tT=new d,tO=function(){function e(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e)}return function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e,[{key:"init",value:function(){this._subscribe()}},{key:"_loadScriptApi",value:function(){if(!window.ymapsInited)return new Promise(function(e,t){var n=document.createElement("script");n.src="https://api-maps.yandex.ru/2.1/?apikey=fc8ccd61-8a5d-43e8-ae97-d91256868293&lang=ru_RU",n.async=!0,n.defer=!0,n.type="text/javascript",n.onload=e,n.onerror=function(e){t(e)},document.body.appendChild(n)}).then(function(){return window.ymapsInited=!0,new Promise(function(e){window.ymaps.ready(e)})})}},{key:"_subscribe",value:function(){var e=this;window.ymapsInited=!1,tT.subscribe("map:init",function(t){e._initMap(t)})}},{key:"_initMap",value:function(e){e&&(window.ymapsInited?new tC(window.ymaps).init({wrapper:e,cluster:!0,fullScreenControl:!0,customFullScreenControl:!0,customZoomControl:!0}):this._loadScriptApi().then(function(t){new tC(t).init({wrapper:e,cluster:!0,fullScreenControl:!0,customFullScreenControl:!0,customZoomControl:!0}),window.ymapsInited=!0}).catch(function(e){console.error("При загрузке яндекс карт произошла ошибка: ".concat(e))}))}}]),e}(),tP=n(248),tL=n(600),tA=n(960);function tj(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tI=function(){var e,t;function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.wrapper=e.element,this.trigger=this.wrapper.querySelectorAll("[data-gallery-zoom-trigger]"),this.items=Array.from(this.wrapper.querySelectorAll("[data-gallery-zoom-item]")),this.isMultyple=this.items.length>1,this.inlineGallery=null}return e=[{key:"init",value:function(){this.trigger&&this.items&&(this._initGallery(),this._bindEvents())}},{key:"_bindEvents",value:function(){var e=this;this.trigger.forEach(function(t){t.addEventListener("click",function(t){t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault(),e._open()})})}},{key:"_open",value:function(){var e=this._getIndex();this.inlineGallery.openGallery(e)}},{key:"_initGallery",value:function(){var e={plugins:[tL.A,tA.A],selector:"[data-gallery-zoom-item]",licenseKey:"1111-1111-1111-1111",getCaptionFromTitleOrAlt:!1,zoomFromOrigin:!1,download:!1,mobileSettings:{controls:!0,showCloseIcon:!0,download:!1},youTubePlayerParams:{modestbranding:1,showinfo:0,rel:0}};this.inlineGallery=(0,tP.A)(this.wrapper,e),this.wrapper.classList.add("_inited")}},{key:"_getIndex",value:function(){var e=0;if(this.isMultyple){var t=this.wrapper.querySelector(".tab-content__item.is-active");t.length&&(e=o.getElementIndex(t))}return e}}],t=[{key:"init",value:function(){window.GalleryZoom={};var e=document.querySelectorAll("[data-gallery-zoom]");e.length&&e.forEach(function(e){new n({element:e}).init()}),window.GalleryZoom.update=function(){var e=document.querySelectorAll("[data-gallery-zoom]");e.length&&e.forEach(function(e){e.classList.contains("_inited")||new n({element:e}).init()})}}}],e&&tj(n.prototype,e),t&&tj(n,t),n}(),tM=function(e,t){var n=function(t){var n="";return t.caption&&(n='<div class="slide-caption"><span class="slide-caption__name">'.concat(t.caption,'</span> <span class="slide-caption__count">').concat(t.count," / ").concat(e.length,"</span></div>")),'\n      <div class="swiper-slide">\n        <div class="slide-inner">\n          <div class="swiper-zoom-container">\n            <img class="slide-image" loading="lazy" src="'.concat(t.src,'" alt="#"/>\n            ').concat(n,'<div class="swiper-lazy-preloader"></div>\n          </div>\n        </div>\n      </div>')},i="";return e.forEach(function(e){i+=n(e)}),'<div class="popup-gallery mfp-hide" id="'.concat(t,'" data-remove="false">\n  <div class="popup-content">\n    <div class="slider-gallery-popup__wrapper is-hide">\n      <div class="slider-gallery-popup__slider _pagination-counter _button-center-in _button-secondary">\n        <div class="swiper">\n          <div class="swiper-wrapper">\n            ').concat(i,"\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>")};function tq(e,t){var n;return console.log("⟶ data",e),'<div class="popup-gallery mfp-hide" id="'.concat(t,'" data-remove="true">\n                <div class="popup-content">\n                    <div class="popup-content__video-wrapper is-hide">\n                        ').concat((n=e[0].source[0],'<video class="popup-content__video" controls\n         playsinline loop preload="auto">\n                    <source src="'.concat(n.src,'" type="').concat(n.type,'"></source>\n                </video>')),"\n                    </div>\n                </div>\n            </div>")}function tB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function tD(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function tN(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t$(e,t,n){return t&&tN(e.prototype,t),n&&tN(e,n),e}function tR(e,t,n){return(tR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tz(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(n||e):o.value}})(e,t,n||e)}function tz(e){return(tz=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tH(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tF(e,t)}function tF(e,t){return(tF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tW(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=tz(e);return n=t?Reflect.construct(i,arguments,tz(this).constructor):i.apply(this,arguments),n&&("object"==(n&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":typeof n)||"function"==typeof n)?n:function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this)}}var tV=new d,tG=function(){function e(t){tD(this,e),this.wrapper=t.item,this.selector=t.selector||"[data-gallery-item]",this.template=t.template,this.id=t.galleryId||"gallery-base",this.data=t.data||[],this.isVideo=t.isVideo||!1}return t$(e,[{key:"init",value:function(){this._subscribe(),this._setData(),this._bindEvents()}},{key:"_subscribe",value:function(){tV.subscribe("closeGalleryPopup",this._remove)}},{key:"_setData",value:function(){var e,t=this;this.data=((function(e){if(Array.isArray(e))return tB(e)})(e=this.wrapper.querySelectorAll(this.selector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return tB(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tB(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(e){var n,i,o,a,s,r,l,c,u,h;return{image:e,id:e.dataset.popupId||t.id,src:(null===(n=e.dataset)||void 0===n?void 0:n.src)||e.src,caption:(null===(i=e.dataset)||void 0===i?void 0:i.title)||!1,width:(null===(a=e.dataset)||void 0===a?void 0:null===(o=a.size)||void 0===o?void 0:o.split(",")[0])?(null===(r=e.dataset)||void 0===r?void 0:null===(s=r.size)||void 0===s?void 0:s.split(",")[0])+"px":"100%",height:(null===(c=e.dataset)||void 0===c?void 0:null===(l=c.size)||void 0===l?void 0:l.split(",")[1])?(null===(h=e.dataset)||void 0===h?void 0:null===(u=h.size)||void 0===u?void 0:u.split(",")[1])+"px":"100vh"}})}},{key:"_bindEvents",value:function(){var e=this;this.data.forEach(function(t){t.image.addEventListener("click",e._makeOpen.bind(e))})}},{key:"_makeOpen",value:function(e){var t=this;e.preventDefault();var n=e.target,i=this.data.length?this.data[0].id:this.id;this.openPopup=document.querySelector("#".concat(i)),this.openPopup?this._show(i):(this._create(i),this._show(i),setTimeout(function(){t._setElements(),t.isVideo||(t._initSlider(),t._toSlide(t._setIndex(n))),t.isVideo&&t._initVideo()},200)),tV.publish("openGalleryPopup")}},{key:"_create",value:function(e){this.template&&document.body.insertAdjacentHTML("beforeend",this.template(this.data,e))}},{key:"_show",value:function(e){window.Site.Modules.Popup.showPopup({items:{src:"#".concat(e)},type:"inline"},"gallery")}},{key:"_setElements",value:function(){var e=document.querySelector(".mfp-content");this.gallerySlider=e.querySelector(".slider-gallery-popup__slider"),this.gallerySliderWrap=this.isVideo?e.querySelector(".popup-content__video-wrapper"):e.querySelector(".slider-gallery-popup__wrapper")}},{key:"_initSlider",value:function(){var e=this.data.length;this.sliderBase=new el({item:this.gallerySlider,settings:{effect:"linear",mousewheel:!0,speed:500,zoom:!1,loop:e>1,keyboard:!0}}),this.sliderBase.init()}},{key:"_toSlide",value:function(e){this._preloaderShow();var t,n=this.gallerySlider.querySelector(".swiper").swiper;null===(t=this.sliderBase)||void 0===t||t.settingsCommon.loop,n.slideTo(e,0,!1),this._preloaderHide()}},{key:"_initVideo",value:function(){this._preloaderShow(),this.gallerySliderWrap.querySelector(".popup-content__video").play(),this._preloaderHide()}},{key:"_preloaderShow",value:function(){this.gallerySliderWrap.classList.remove("is-show")}},{key:"_preloaderHide",value:function(){var e=this;setTimeout(function(){e.gallerySliderWrap.classList.add("is-show")},300)}},{key:"_remove",value:function(e){if("false"!==e.items[0].inlineElement[0].dataset.remove){var t=e.items[0].data.src,n=document.querySelector(t);n&&o.removeElement(n)}}},{key:"_setIndex",value:function(e){var t=0;return this.data.forEach(function(n,i){n.image===e&&(t=i)}),t}}]),e}(),tZ=function(e){tH(n,e);var t=tW(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return tD(this,n),t.call(this,e)}return t$(n,[{key:"init",value:function(){this._subscribe(),this._bindEvents()}},{key:"_subscribe",value:function(){tR(tz(n.prototype),"_subscribe",this).call(this)}},{key:"_bindEvents",value:function(){this.wrapper.addEventListener("click",this._makeOpen.bind(this))}}],[{key:"init",value:function(){tV.subscribe("initProgressSlider",function(){var e=document.querySelectorAll("[data-gallery-progress]");e.length&&e.forEach(function(e){var t=e.dataset.json;new n({item:e,template:tM,data:JSON.parse(t)}).init()})})}}]),n}(tG),tU=function(e){tH(n,e);var t=tW(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return tD(this,n),t.call(this,e)}return t$(n,[{key:"init",value:function(){this._subscribe(),this._bindEvents()}},{key:"_subscribe",value:function(){tR(tz(n.prototype),"_subscribe",this).call(this)}},{key:"_bindEvents",value:function(){this.wrapper.addEventListener("click",this._makeOpen.bind(this))}}],[{key:"init",value:function(){var e=document.querySelectorAll("[data-gallery-video]");e.length&&e.forEach(function(e){var t=e.dataset.json;new n({item:e,template:tq,data:JSON.parse(t),isVideo:!0}).init()})}}]),n}(tG);function tY(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tK=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.get=window.location.search,this.cookies=G.A,this.getObject={},this.utm=["utm_source","utm_medium","utm_campaign","utm_content","utm_term"],this.utmID=[["ym_uid","_ym_uid"],["ga_uid","_ga"],["roistat_visit","roistat_visit"]],this.utmCookieCount=0}return e=[{key:"init",value:function(){this._searchStringToObject(),Object.keys(this.getObject).length&&this._addUtmToCookie(),this._checkCookie(),this.utmCookieCount>0&&this._addUtmValueToInputs(),this._addToInputsFromUtmID()}},{key:"_searchStringToObject",value:function(){if(-1!==this.get.indexOf("&")){var e=this.get.slice(1).split("&");this.getObject=e.reduce(function(e,t){return(t=t.split("="))[0].includes("utm")&&(e[t[0]]=t[1]),e},{})}}},{key:"_addUtmToCookie",value:function(){for(var e in this.getObject){var t=this.getObject[e];this._setCookie(e,t)}}},{key:"_checkCookie",value:function(){var e=this;this.utm.forEach(function(t){e._getCookie(t)&&e.utmCookieCount++})}},{key:"_addUtmValueToInputs",value:function(){var e=this;this.formElems=document.querySelectorAll("form"),0!==this.formElems.length&&this.formElems.forEach(function(t){e.utm.forEach(function(n){var i=t.querySelector('input[name="'.concat(n,'"]'));if(i){var o=e._getCookie(n);o&&(i.value=o)}})})}},{key:"_addToInputsFromUtmID",value:function(){var e=this;this.formElems=document.querySelectorAll("form"),0!==this.formElems.length&&this.formElems.forEach(function(t){e.utmID.forEach(function(n){var i=t.querySelector('input[name="'.concat(n[0],'"]'));if(i){var o=e._getCookie(n[1]);o&&(i.value=o)}})})}},{key:"_setCookie",value:function(e,t){this.cookies.set(e,t,{expires:+this.cookieDuration})}},{key:"_getCookie",value:function(e){return this.cookies.get(e)}}],t=[{key:"init",value:function(){new n().init()}}],e&&tY(n.prototype,e),t&&tY(n,t),n}();function tJ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var tX=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.elem=e,this.openClass="is-open"}return e=[{key:"_init",value:function(){this.elem&&(this._initElements(),this._bindEvents())}},{key:"_initElements",value:function(){this.button=this.elem.querySelector(".j-share-button"),this.tooltipClose=this.elem.querySelector(".j-share-close"),this.copyUrl=this.elem.querySelector(".j-share-url"),this.copyUrlText=this.copyUrl.querySelector(".j-share-url-text")}},{key:"_bindEvents",value:function(){var e=this;this.button.addEventListener("click",this._toggleOpen.bind(this)),this.tooltipClose.addEventListener("click",this._toggleOpen.bind(this)),this.copyUrl.addEventListener("click",function(t){t.preventDefault(),e._copyUrl()}),o.clickOutside([".j-share"],this._close.bind(this),null,!0)}},{key:"_toggleOpen",value:function(){this.elem.classList.toggle(this.openClass),this._changeCopyText()}},{key:"_close",value:function(){this.elem.classList.contains(this.openClass)&&(this.elem.classList.remove(this.openClass),this._changeCopyText())}},{key:"_copyUrl",value:function(){var e=document.createElement("input");e.value=window.location.href,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),this._changeCopyText(!0)}},{key:"_changeCopyText",value:function(e){this.copyUrlText.innerHTML=e?"Ссылка скопирована":"Скопировать ссылку"}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll(".j-share");t.length&&t.forEach(function(e){new n(e)._init()})}}],e&&tJ(n.prototype,e),t&&tJ(n,t),n}();function tQ(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t0=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n)}return e=[{key:"init",value:function(e){this.options={},this.options.targets=e.targets,this.options.autoload=!1!==e.autoload,this.options.quality=e.quality||1.5,this.options.orientation=e.orientation||"portrait",this.options.pageBreak=e.pageBreak||".pdf__page-break",this.scriptInit=!1,this._bindEvents()}},{key:"_bindEvents",value:function(){var e=this;this.options.targets.forEach(function(t){t.addEventListener("click",e._start.bind(e))})}},{key:"_start",value:function(e){this._collectData(e),this._startPreloader(),this._getScript()}},{key:"_getScript",value:function(){var e=this;this.scriptInit?e._getHtml():o.addScript("https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js",{onload:function(){this.scriptInit=!0,e._getHtml()}})}},{key:"_collectData",value:function(e){this.currentTarget=e.currentTarget;var t=["ajax","element","file"];for(var n in this.dataset=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){var i,o,a;i=e,o=t,a=n[t],o in i?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a})}return e}({},this.currentTarget.dataset),this.currentTarget.hasAttribute("data-autoload")&&(this.options.autoload=!0),this.formData=new FormData,this.dataset)0>t.indexOf(n)&&this.formData.set(n,this.dataset[n])}},{key:"_getHtml",value:function(){if(this.dataset.element){this.html=document.querySelector("".concat(this.dataset.element)).innerHTML,this._createContainer(),this._openPdf(),this._stopPreloader();return}if(this.dataset.ajax){var e=this;o.send(this.formData,this.dataset.ajax,{success:function(t){e.html=t.html,e._createContainer(),e._openPdf(),e._stopPreloader()},error:function(e){console.error("Ошибка при получении данных для pdf - ".concat(e))},complete:function(){}})}}},{key:"_createContainer",value:function(){this.pdfContainer=document.createElement("div"),this.pdfContainer.innerHTML=this.html}},{key:"_openPdf",value:function(){var e=this,t={filename:this.dataset.file||"flat-pdf.pdf",html2canvas:{dpi:192,scale:this.options.quality,letterRendering:!0},jsPDF:{unit:"mm",format:"a4",orientation:this.options.orientation,compress:!0},pagebreak:{after:this.options.pageBreak}};return new Promise(function(n){if(e.options.autoload){html2pdf().set(t).from(e.pdfContainer).save().then(function(){n()});return}html2pdf().set(t).from(e.pdfContainer).toPdf().get("pdf").then(function(e){window.open(e.output("bloburl"),"_blank"),n()})})}},{key:"_startPreloader",value:function(){this.currentTarget.classList.add("is-loading")}},{key:"_stopPreloader",value:function(){this.currentTarget.classList.remove("is-loading")}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=Array.from(e.querySelectorAll(".j-html2pdf"));t.length&&new n().init({targets:t,autoload:!1})}}],e&&tQ(n.prototype,e),t&&tQ(n,t),n}();function t1(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t3=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.link=e.element,this.id=this.link.getAttribute("href"),this.popupContent=null,this.html=document.querySelector("html"),this.body=document.body}return e=[{key:"init",value:function(){this._bindLinkEvents()}},{key:"_bindLinkEvents",value:function(){this.link.addEventListener("click",this._openPopup.bind(this))}},{key:"_bindContentEvents",value:function(){this.overlay.addEventListener("click",this._popupClose.bind(this)),this.closeButton.addEventListener("click",this._popupClose.bind(this))}},{key:"_openPopup",value:function(e){e.preventDefault(),this._getContent(this.id),this.popupContent&&(o.bodyFixed(this.popupContent),this._setTemplate(this.popupContent),this._insertTemplate(),this._getElements(),this.popupTop.style.display="flex",this.popupTop.classList.add("_show"),this.html.classList.add("_open-popup-bottom"))}},{key:"_popupClose",value:function(){var e=this;this.popupTop.classList.add("_hide"),setTimeout(function(){e.popupTop.classList.remove("_show"),e.popupTop.classList.remove("_hide"),e.html.classList.add("_open-popup-bottom"),e.popupTop.style.display="none",o.bodyStatic(),e._removeTemplate()},300)}},{key:"_getContent",value:function(e){this.popupContent=document.querySelector(e),this.popupContent||console.error("[PopupBottom]: Упсс... не найден попап ",e)}},{key:"_getElements",value:function(){this.popupTop=document.querySelector(".popup-bottom-top"),this.overlay=this.popupTop.querySelector(".popup-bottom__overlay"),this.closeButton=this.popupTop.querySelector(".popup-bottom__content-close"),this._bindContentEvents()}},{key:"_setTemplate",value:function(e){this.template='<div class="popup-bottom-top">'.concat(e.innerHTML,"</div>")}},{key:"_insertTemplate",value:function(){this.body.insertAdjacentHTML("afterbegin",this.template)}},{key:"_removeTemplate",value:function(){o.removeElement(this.popupTop)}}],t=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e.querySelectorAll("[data-popup-bottom-link]");t.length&&t.forEach(function(e){new n({element:e}).init()})}}],e&&t1(n.prototype,e),t&&t1(n,t),n}();function t2(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t6=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n),this.wrapper=e.element,this.items=this.wrapper.querySelectorAll(".point-info__item")}return e=[{key:"init",value:function(){this._setPostion()}},{key:"_setPostion",value:function(){this.items.forEach(function(e){var t,n,i=null===(t=e.style.left)||void 0===t?void 0:t.replace("%",""),o=null===(n=e.style.top)||void 0===n?void 0:n.replace("%","");i&&o&&(e.classList.remove("_top","_bottom","_right","_left"),+i>75?e.classList.add("_left"):15>+i?e.classList.add("_right"):+o>70?e.classList.add("_top"):30>+o?e.classList.add("_bottom"):e.classList.add("_top"))})}}],t=[{key:"init",value:function(){var e=document.querySelectorAll(".point-info__scroll");e.length&&e.forEach(function(e){new n({element:e}).init()})}}],e&&t2(n.prototype,e),t&&t2(n,t),n}();function t5(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t9=new d,t4=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n)}return e=[{key:"init",value:function(){var e=document.querySelectorAll(".main-slider-center");e.length&&e.forEach(function(e){new el({item:e,settings:{loop:!0,speed:1e3,watchSlidesProgress:!0,effect:"fade",dots:!0,autoplay:{delay:6e3,enabled:!0,disableOnInteraction:!1},pagination:{el:".swiper-pagination",type:"bullets",clickable:!0}}}).init()});var t=document.querySelector(".main-slider__params-slider");t&&!o.isDesktop()&&new el({item:t,settings:{slidesPerView:"auto",centeredSlides:!0,loop:!0,navigation:!1,autoplay:{delay:4e3,enabled:!0,disableOnInteraction:!1}}}).init(),t9.subscribe("preloader:end",function(){setTimeout(function(){document.querySelectorAll(".main-slider .swiper-slide").forEach(function(e){e.classList.remove("_hidden")})},300),setTimeout(function(){var e=document.querySelector(".main-slider .main-selection");e&&(e.style.opacity=1)},900)})}}],t=[{key:"init",value:function(){new n().init()}}],e&&t5(n.prototype,e),t&&t5(n,t),n}();function t8(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t7=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n)}return e=[{key:"init",value:function(){var e=document.querySelectorAll(".news-list-block__slider");e.length&&e.forEach(function(e){new el({item:e,settings:{slidesPerView:1,spaceBetween:24,speed:750,loop:!1,pagination:!1,breakpoints:{680:{slidesPerView:2,spaceBetween:32},1023:{slidesPerView:3},1540:{slidesPerView:4}}}}).init()})}}],t=[{key:"init",value:function(){new n().init()}}],e&&t8(n.prototype,e),t&&t8(n,t),n}();c.os.registerPlugin(M.u);var ne=function(){var e;function t(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.filtresWrapper=e,this.filtresResults=document.querySelector(".realty-catalog"),this.filtresMobile=document.querySelector(".realty-catalog__mobile"),this.toggleButtons=document.querySelectorAll(".realty-filtres__mobile-button-toggle, .realty-catalog__mobile-button-toggle"),this.filtresMobileCloseButton=this.filtresWrapper.querySelector(".realty-filtres__mobile-close"),this.html=document.querySelector("html"),this.desktopBreakpoint=768}return e=[{key:"init",value:function(){this.filtresMobile&&window.innerWidth<this.desktopBreakpoint&&(this._buttonFixed(),this._bindEvents())}},{key:"_bindEvents",value:function(){var e=this;this.toggleButtons.forEach(function(t){t.addEventListener("click",e._openFilter.bind(e))}),this.filtresMobileCloseButton&&this.filtresMobileCloseButton.addEventListener("click",this._closeFilter.bind(this))}},{key:"_buttonFixed",value:function(){var e=this;this.filtresResults&&M.u.create({trigger:this.filtresResults,start:"300px 50%",end:"bottom 50%",onEnter:function(){return e._showButton()},onEnterBack:function(){return e._showButton()},onLeave:function(){return e._hideButton()},onLeaveBack:function(){return e._hideButton()}})}},{key:"_openFilter",value:function(){this.html.classList.add("_realty-filtres-open")}},{key:"_closeFilter",value:function(){this.html.classList.remove("_realty-filtres-open")}},{key:"_hideButton",value:function(){this.filtresMobile.classList.remove("is-active")}},{key:"_showButton",value:function(){this.filtresMobile.classList.add("is-active")}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}(),nt=n(692),nn=new d,ni=function(){var e;function t(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t),this.element=e.element}return e=[{key:"init",value:function(){this.trigger=this.element.querySelector(".realty-filtres__controls-button-reset"),this.trigger&&(this.selectAll=this.element.querySelectorAll(".j-select"),this.checkboxAll=this.element.querySelectorAll('input[type="checkbox"]'),this._bindEvents())}},{key:"_bindEvents",value:function(){this.trigger.addEventListener("click",this._resetElems.bind(this))}},{key:"_resetElems",value:function(){nn.publish("resetFilter",this.element),this.checkboxAll&&this.checkboxAll.forEach(function(e){e.checked=!1}),this.selectAll&&this.selectAll.forEach(function(e){var t=e.querySelector("option").value;nt(e).val(t).trigger("change.select2")})}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}(),no=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"init",value:function(){var e=document.querySelector(".slider-compare");e&&new el({item:e,settings:{loop:!1,speed:750,dots:!1,slidesPerView:1,spaceBetween:10,breakpoints:{480:{slidesPerView:3,spaceBetween:20},1024:{slidesPerView:4,spaceBetween:20}}}}).init()}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}(),na=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"init",value:function(){var e=document.querySelectorAll(".realty-space-finishing__slider");e.length&&e.forEach(function(e){new el({item:e,settings:{loop:!0,spaceBetween:10,speed:750,allowTouchMove:!1}}).init()})}}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(t.prototype,e),t}();function ns(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var nr=function(){var e,t;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n)}return e=[{key:"init",value:function(){this._initFiltresMobile(),this._resetFilter(),this._initSliders()}},{key:"_initFiltresMobile",value:function(){var e=document.querySelector(".realty-filtres__wrapper");e&&new ne(e).init()}},{key:"_resetFilter",value:function(){var e=document.querySelectorAll(".realty-filtres__form");e.length&&e.forEach(function(e){new ni({element:e}).init()})}},{key:"_initSliders",value:function(){new no().init(),new na().init()}}],t=[{key:"init",value:function(){new n().init()}}],e&&ns(n.prototype,e),t&&ns(n,t),n}();n.p;var nl=n(692);window.Site||(window.Site={},window.Site.Modules={},window.Site.Env={});var nc=new l;nc.register([v,b,k,U,I,F,eH,V,tZ,tU,ej,t4,t7,ex,eC,eT,e1,eK,eP,eB,eR,K,tI,O,t6,e2,tO,e5,tK,tX,t0,t3,nr,f,eh]),o.handlerDocumentReady(function(){window.jQuery=window.$=nl,nc.init()})}},a={};function s(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=o,s.amdD=function(){throw Error("define cannot be used indirect")},s.amdO={},e=[],s.O=function(t,n,i,o){if(n){o=o||0;for(var a=e.length;a>0&&e[a-1][2]>o;a--)e[a]=e[a-1];e[a]=[n,i,o];return}for(var r=1/0,a=0;a<e.length;a++){for(var n=e[a][0],i=e[a][1],o=e[a][2],l=!0,c=0;c<n.length;c++)r>=o&&Object.keys(s.O).every(function(e){return s.O[e](n[c])})?n.splice(c--,1):(l=!1,o<r&&(r=o));if(l){e.splice(a--,1);var u=i();void 0!==u&&(t=u)}}return t},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,{a:t}),t},s.d=function(e,t){for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},s.p="",t={792:0},s.O.j=function(e){return 0===t[e]},n=function(e,n){var i,o,a=n[0],r=n[1],l=n[2],c=0;if(a.some(function(e){return 0!==t[e]})){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(l)var u=l(s)}for(e&&e(n);c<a.length;c++)o=a[c],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(u)},(i=self.webpackChunkstarttemplate=self.webpackChunkstarttemplate||[]).forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i));var r=s.O(void 0,[96],function(){return s(166)});s.O(r)}();